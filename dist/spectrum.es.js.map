{"version":3,"file":"spectrum.es.js","mappings":"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EAAE,CAAC;EACtD,OAAO;IACLR,GAAG,EAAEA,GAAG,GAAGiB,QAAQ,CAACD,SAAS,EAAE,EAAE,CAAC;IAClCd,IAAI,EAAEA,IAAI,GAAGe,QAAQ,CAAC5F,UAAU,EAAE,EAAE;GACrC;AACH;;;;;;;;;;;;;AC5KA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,aAAa;AACb,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,aAAa;AACb,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB,UAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,UAAU;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe;AACf,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,WAAW;AACX;;AAEA;AACA;AACA;AACA,gBAAgB,UAAU;AAC1B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB;AACnB,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAW;AACX;;AAEA;AACA;AACA;AACA,gBAAgB,UAAU;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,WAAW;AACX,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;;AAEA;AACA;AACA;AACA,gBAAgB,UAAU;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAW;AACX;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,YAAY;AAC9B,4BAA4B,iDAAiD;AAC7E;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB,uCAAuC;AACvD,gBAAgB,wCAAwC;AACxD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,8DAA8D,WAAW;AACzE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yBAAyB,kBAAkB;AAC3C;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,2DAA2D,wBAAwB;;AAEnF;AACA;AACA,2CAA2C,wBAAwB;AACnE;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,8EAA8E,4BAA4B,iBAAiB;AAC3H,8EAA8E,2BAA2B,kBAAkB;AAC3H,qDAAqD,oDAAoD,iBAAiB;AAC1H,qDAAqD,oDAAoD,iBAAiB;AAC1H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,sBAAsB;AACxC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;;AAEA,MAAM,iBAAiB,aAAa,iBAAiB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,EAAE,cAAc,EAAE,cAAc,EAAE;AAC7D,2BAA2B,EAAE,cAAc,EAAE,cAAc,EAAE;AAC7D,2BAA2B,EAAE,cAAc,EAAE,cAAc,EAAE,cAAc,EAAE;AAC7E,2BAA2B,EAAE,cAAc,EAAE,cAAc,EAAE,cAAc,EAAE;AAC7E;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yCAAyC,SAAS,QAAQ,SAAS,QAAQ,QAAQ;AACnF;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,yCAAyC;AACzC;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;;AAEgC;;;;;;;SC7vChC;SACA;;SAEA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;;SAEA;SACA;;SAEA;SACA;SACA;;;;;UCtBA;UACA;UACA;UACA;UACA,yCAAyC,wCAAwC;UACjF;UACA;UACA;;;;;UCPA;;;;;;;;;;;;;;;;ACA6D;AACG;AAa/C;AAEjB,MAAM8F,WAAW,GAAqB;IAElC;IACAC,UAAU,EAAEC,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","sources":["webpack://spectrum-vanilla/./src/dom.ts","webpack://spectrum-vanilla/./src/utils.ts","webpack://spectrum-vanilla/./node_modules/tinycolor2/esm/tinycolor.js","webpack://spectrum-vanilla/webpack/bootstrap","webpack://spectrum-vanilla/webpack/runtime/define property getters","webpack://spectrum-vanilla/webpack/runtime/hasOwnProperty shorthand","webpack://spectrum-vanilla/./src/index.ts"],"sourcesContent":["/**\r\n * Part of spectrum-vanilla project.\r\n *\r\n * @copyright  Copyright (C) 2023 __ORGANIZATION__.\r\n * @license    __LICENSE__\r\n */\r\n\r\nexport function insertAfter<T extends Element>(existingNode: T, newNode: Element): T {\r\n  existingNode.parentNode?.insertBefore(newNode, existingNode.nextSibling);\r\n  return existingNode;\r\n}\r\n\r\nexport function insertBefore<T extends Element>(existingNode: T, newNode: Element): T {\r\n  existingNode.parentNode?.insertBefore(newNode, existingNode);\r\n  return existingNode;\r\n}\r\n\r\nexport function wrap<T extends Element>(ele: T, wrapper: Element): T {\r\n  ele.replaceWith(wrapper);\r\n  wrapper.appendChild(ele);\r\n  return ele;\r\n}\r\n\r\nexport function outerWidthWithMargin(ele: HTMLElement) {\r\n  const style = window.getComputedStyle(ele);\r\n\r\n  return (\r\n    ele.getBoundingClientRect().width +\r\n    parseFloat(style.marginLeft) +\r\n    parseFloat(style.marginRight)\r\n  );\r\n}\r\n","/**\r\n * Part of spectrum-vanilla project.\r\n *\r\n * @copyright  Copyright (C) 2023 __ORGANIZATION__.\r\n * @license    __LICENSE__\r\n */\r\n\r\nexport function html(html: string, doc = document) {\r\n  const div = doc.createElement('div');\r\n  div.innerHTML = html;\r\n  return div.children[0];\r\n}\r\n\r\nexport function camelize(str: string): string {\r\n  return str.replace(/(?:^\\w|[A-Z]|\\b\\w)/g, function (word, index) {\r\n    return index === 0 ? word.toLowerCase() : word.toUpperCase();\r\n  }).replace(/\\s+/g, '');\r\n}\r\n\r\nexport function throttle(func: Function, wait: number, debounce: Function | undefined = undefined) {\r\n  let timeout: any;\r\n  return function () {\r\n    // @ts-ignore\r\n    const context = this, args = arguments;\r\n    const throttler = function () {\r\n      timeout = null;\r\n      func.apply(context, args);\r\n    };\r\n    if (debounce) clearTimeout(timeout);\r\n    if (debounce || !timeout) {\r\n      timeout = setTimeout(throttler, wait);\r\n    }\r\n  };\r\n}\r\n\r\nexport function addClass(ele: HTMLElement, className: string) {\r\n  const classes = className.split(' ').filter((c) => c !== '');\r\n\r\n  if (className !== '' && classes.length) {\r\n    ele.classList.add(...classes);\r\n  }\r\n  return ele;\r\n}\r\n\r\nexport function removeClass(ele: HTMLElement, className: string) {\r\n  const classes = className.split(' ').filter((c) => c !== '');\r\n  if (className !== '' && classes.length) {\r\n    ele.classList.remove(...classes);\r\n  }\r\n  return ele;\r\n}\r\n\r\nexport function toggleClass(\r\n  ele: HTMLElement,\r\n  className: string,\r\n  state: boolean | undefined = undefined\r\n) {\r\n  if (state != undefined) {\r\n    ele.classList.toggle(className, state);\r\n  } else if (state === true) {\r\n    addClass(ele, className);\r\n  } else {\r\n    removeClass(ele, className);\r\n  }\r\n  return ele;\r\n}\r\n\r\nexport function emit(ele: EventTarget, eventName: string, detail: any = {}) {\r\n  const event = new CustomEvent(\r\n    eventName,\r\n    {\r\n      cancelable: true,\r\n      bubbles: true,\r\n      detail,\r\n    },\r\n  );\r\n\r\n  ele.dispatchEvent(event);\r\n\r\n  return event;\r\n}\r\n\r\nexport function eventDelegate(\r\n  ele: HTMLElement,\r\n  eventName: string,\r\n  selector: string,\r\n  listener: Function,\r\n  payload: { [name: string]: any } = {},\r\n) {\r\n  ele.addEventListener(eventName, (e) => {\r\n    if ((e.target as Element).closest(selector)) {\r\n      // @ts-ignore\r\n      e.data = Object.assign({}, e.data || {}, payload);\r\n\r\n      listener(e);\r\n    }\r\n  }, payload);\r\n}\r\n\r\nexport type OffsetCSSOptions = { top?: number, bottom?: number, left?: number, right?: number, using?: Function };\r\n\r\nexport function setElementOffset(\r\n  elem: HTMLElement,\r\n  options: OffsetCSSOptions,\r\n) {\r\n  let curPosition;\r\n  let curTop;\r\n  let curLeft;\r\n  let calculatePosition;\r\n  let position = elem.style.position;\r\n  let curElem = elem;\r\n  let props: OffsetCSSOptions = {};\r\n\r\n  // Set position first, in-case top/left are set even on static elem\r\n  if (position === \"static\") {\r\n    elem.style.position = \"relative\";\r\n  }\r\n\r\n  let curOffset = getElementOffset(curElem);\r\n  let curCSSTop = elem.style.top;\r\n  let curCSSLeft = elem.style.left;\r\n  calculatePosition = (position === \"absolute\" || position === \"fixed\") &&\r\n    (curCSSTop + curCSSLeft).indexOf(\"auto\") > -1;\r\n\r\n  // Need to be able to calculate position if either\r\n  // top or left is auto and position is either absolute or fixed\r\n  if (calculatePosition) {\r\n    curPosition = getElementPosition(curElem);\r\n    curTop = curPosition.top;\r\n    curLeft = curPosition.left;\r\n\r\n  } else {\r\n    curTop = parseFloat(curCSSTop) || 0;\r\n    curLeft = parseFloat(curCSSLeft) || 0;\r\n  }\r\n\r\n  // if (typeof options === 'function') {\r\n  //   options = options.call(elem, Object.assign({}, curOffset)) as OffsetCSSOptions;\r\n  // }\r\n\r\n  if (options.top != null) {\r\n    props.top = (options.top - curOffset.top) + curTop;\r\n  }\r\n  if (options.left != null) {\r\n    props.left = (options.left - curOffset.left) + curLeft;\r\n  }\r\n  \r\n  if (\"using\" in options) {\r\n    options.using.call(elem, props);\r\n  } else {\r\n    for (const k in props) {\r\n      curElem.style[k] = props[k] + 'px';\r\n    }\r\n  }\r\n}\r\n\r\nexport function getElementOffset(el: HTMLElement) {\r\n  const box = el.getBoundingClientRect();\r\n  const docElem = document.documentElement;\r\n  return {\r\n    top: box.top + window.pageYOffset - docElem.clientTop,\r\n    left: box.left + window.pageXOffset - docElem.clientLeft,\r\n  };\r\n}\r\n\r\nexport function getElementPosition(el: HTMLElement) {\r\n  const { top, left } = el.getBoundingClientRect();\r\n  const { marginTop, marginLeft } = getComputedStyle(el);\r\n  return {\r\n    top: top - parseInt(marginTop, 10),\r\n    left: left - parseInt(marginLeft, 10),\r\n  };\r\n}\r\n","// This file is autogenerated. It's used to publish ESM to npm.\n// https://github.com/bgrins/TinyColor\n// Brian Grinstead, MIT License\n\nconst trimLeft = /^\\s+/;\nconst trimRight = /\\s+$/;\n\nfunction tinycolor(color, opts) {\n  color = color ? color : \"\";\n  opts = opts || {};\n\n  // If input is already a tinycolor, return itself\n  if (color instanceof tinycolor) {\n    return color;\n  }\n  // If we are called as a function, call using new instead\n  if (!(this instanceof tinycolor)) {\n    return new tinycolor(color, opts);\n  }\n\n  var rgb = inputToRGB(color);\n  (this._originalInput = color),\n    (this._r = rgb.r),\n    (this._g = rgb.g),\n    (this._b = rgb.b),\n    (this._a = rgb.a),\n    (this._roundA = Math.round(100 * this._a) / 100),\n    (this._format = opts.format || rgb.format);\n  this._gradientType = opts.gradientType;\n\n  // Don't let the range of [0,255] come back in [0,1].\n  // Potentially lose a little bit of precision here, but will fix issues where\n  // .5 gets interpreted as half of the total, instead of half of 1\n  // If it was supposed to be 128, this was already taken care of by `inputToRgb`\n  if (this._r < 1) this._r = Math.round(this._r);\n  if (this._g < 1) this._g = Math.round(this._g);\n  if (this._b < 1) this._b = Math.round(this._b);\n\n  this._ok = rgb.ok;\n}\n\ntinycolor.prototype = {\n  isDark: function () {\n    return this.getBrightness() < 128;\n  },\n  isLight: function () {\n    return !this.isDark();\n  },\n  isValid: function () {\n    return this._ok;\n  },\n  getOriginalInput: function () {\n    return this._originalInput;\n  },\n  getFormat: function () {\n    return this._format;\n  },\n  getAlpha: function () {\n    return this._a;\n  },\n  getBrightness: function () {\n    //http://www.w3.org/TR/AERT#color-contrast\n    var rgb = this.toRgb();\n    return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\n  },\n  getLuminance: function () {\n    //http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    var rgb = this.toRgb();\n    var RsRGB, GsRGB, BsRGB, R, G, B;\n    RsRGB = rgb.r / 255;\n    GsRGB = rgb.g / 255;\n    BsRGB = rgb.b / 255;\n\n    if (RsRGB <= 0.03928) R = RsRGB / 12.92;\n    else R = Math.pow((RsRGB + 0.055) / 1.055, 2.4);\n    if (GsRGB <= 0.03928) G = GsRGB / 12.92;\n    else G = Math.pow((GsRGB + 0.055) / 1.055, 2.4);\n    if (BsRGB <= 0.03928) B = BsRGB / 12.92;\n    else B = Math.pow((BsRGB + 0.055) / 1.055, 2.4);\n    return 0.2126 * R + 0.7152 * G + 0.0722 * B;\n  },\n  setAlpha: function (value) {\n    this._a = boundAlpha(value);\n    this._roundA = Math.round(100 * this._a) / 100;\n    return this;\n  },\n  toHsv: function () {\n    var hsv = rgbToHsv(this._r, this._g, this._b);\n    return { h: hsv.h * 360, s: hsv.s, v: hsv.v, a: this._a };\n  },\n  toHsvString: function () {\n    var hsv = rgbToHsv(this._r, this._g, this._b);\n    var h = Math.round(hsv.h * 360),\n      s = Math.round(hsv.s * 100),\n      v = Math.round(hsv.v * 100);\n    return this._a == 1\n      ? \"hsv(\" + h + \", \" + s + \"%, \" + v + \"%)\"\n      : \"hsva(\" + h + \", \" + s + \"%, \" + v + \"%, \" + this._roundA + \")\";\n  },\n  toHsl: function () {\n    var hsl = rgbToHsl(this._r, this._g, this._b);\n    return { h: hsl.h * 360, s: hsl.s, l: hsl.l, a: this._a };\n  },\n  toHslString: function () {\n    var hsl = rgbToHsl(this._r, this._g, this._b);\n    var h = Math.round(hsl.h * 360),\n      s = Math.round(hsl.s * 100),\n      l = Math.round(hsl.l * 100);\n    return this._a == 1\n      ? \"hsl(\" + h + \", \" + s + \"%, \" + l + \"%)\"\n      : \"hsla(\" + h + \", \" + s + \"%, \" + l + \"%, \" + this._roundA + \")\";\n  },\n  toHex: function (allow3Char) {\n    return rgbToHex(this._r, this._g, this._b, allow3Char);\n  },\n  toHexString: function (allow3Char) {\n    return \"#\" + this.toHex(allow3Char);\n  },\n  toHex8: function (allow4Char) {\n    return rgbaToHex(this._r, this._g, this._b, this._a, allow4Char);\n  },\n  toHex8String: function (allow4Char) {\n    return \"#\" + this.toHex8(allow4Char);\n  },\n  toRgb: function () {\n    return {\n      r: Math.round(this._r),\n      g: Math.round(this._g),\n      b: Math.round(this._b),\n      a: this._a,\n    };\n  },\n  toRgbString: function () {\n    return this._a == 1\n      ? \"rgb(\" +\n          Math.round(this._r) +\n          \", \" +\n          Math.round(this._g) +\n          \", \" +\n          Math.round(this._b) +\n          \")\"\n      : \"rgba(\" +\n          Math.round(this._r) +\n          \", \" +\n          Math.round(this._g) +\n          \", \" +\n          Math.round(this._b) +\n          \", \" +\n          this._roundA +\n          \")\";\n  },\n  toPercentageRgb: function () {\n    return {\n      r: Math.round(bound01(this._r, 255) * 100) + \"%\",\n      g: Math.round(bound01(this._g, 255) * 100) + \"%\",\n      b: Math.round(bound01(this._b, 255) * 100) + \"%\",\n      a: this._a,\n    };\n  },\n  toPercentageRgbString: function () {\n    return this._a == 1\n      ? \"rgb(\" +\n          Math.round(bound01(this._r, 255) * 100) +\n          \"%, \" +\n          Math.round(bound01(this._g, 255) * 100) +\n          \"%, \" +\n          Math.round(bound01(this._b, 255) * 100) +\n          \"%)\"\n      : \"rgba(\" +\n          Math.round(bound01(this._r, 255) * 100) +\n          \"%, \" +\n          Math.round(bound01(this._g, 255) * 100) +\n          \"%, \" +\n          Math.round(bound01(this._b, 255) * 100) +\n          \"%, \" +\n          this._roundA +\n          \")\";\n  },\n  toName: function () {\n    if (this._a === 0) {\n      return \"transparent\";\n    }\n\n    if (this._a < 1) {\n      return false;\n    }\n\n    return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false;\n  },\n  toFilter: function (secondColor) {\n    var hex8String = \"#\" + rgbaToArgbHex(this._r, this._g, this._b, this._a);\n    var secondHex8String = hex8String;\n    var gradientType = this._gradientType ? \"GradientType = 1, \" : \"\";\n\n    if (secondColor) {\n      var s = tinycolor(secondColor);\n      secondHex8String = \"#\" + rgbaToArgbHex(s._r, s._g, s._b, s._a);\n    }\n\n    return (\n      \"progid:DXImageTransform.Microsoft.gradient(\" +\n      gradientType +\n      \"startColorstr=\" +\n      hex8String +\n      \",endColorstr=\" +\n      secondHex8String +\n      \")\"\n    );\n  },\n  toString: function (format) {\n    var formatSet = !!format;\n    format = format || this._format;\n\n    var formattedString = false;\n    var hasAlpha = this._a < 1 && this._a >= 0;\n    var needsAlphaFormat =\n      !formatSet &&\n      hasAlpha &&\n      (format === \"hex\" ||\n        format === \"hex6\" ||\n        format === \"hex3\" ||\n        format === \"hex4\" ||\n        format === \"hex8\" ||\n        format === \"name\");\n\n    if (needsAlphaFormat) {\n      // Special case for \"transparent\", all other non-alpha formats\n      // will return rgba when there is transparency.\n      if (format === \"name\" && this._a === 0) {\n        return this.toName();\n      }\n      return this.toRgbString();\n    }\n    if (format === \"rgb\") {\n      formattedString = this.toRgbString();\n    }\n    if (format === \"prgb\") {\n      formattedString = this.toPercentageRgbString();\n    }\n    if (format === \"hex\" || format === \"hex6\") {\n      formattedString = this.toHexString();\n    }\n    if (format === \"hex3\") {\n      formattedString = this.toHexString(true);\n    }\n    if (format === \"hex4\") {\n      formattedString = this.toHex8String(true);\n    }\n    if (format === \"hex8\") {\n      formattedString = this.toHex8String();\n    }\n    if (format === \"name\") {\n      formattedString = this.toName();\n    }\n    if (format === \"hsl\") {\n      formattedString = this.toHslString();\n    }\n    if (format === \"hsv\") {\n      formattedString = this.toHsvString();\n    }\n\n    return formattedString || this.toHexString();\n  },\n  clone: function () {\n    return tinycolor(this.toString());\n  },\n\n  _applyModification: function (fn, args) {\n    var color = fn.apply(null, [this].concat([].slice.call(args)));\n    this._r = color._r;\n    this._g = color._g;\n    this._b = color._b;\n    this.setAlpha(color._a);\n    return this;\n  },\n  lighten: function () {\n    return this._applyModification(lighten, arguments);\n  },\n  brighten: function () {\n    return this._applyModification(brighten, arguments);\n  },\n  darken: function () {\n    return this._applyModification(darken, arguments);\n  },\n  desaturate: function () {\n    return this._applyModification(desaturate, arguments);\n  },\n  saturate: function () {\n    return this._applyModification(saturate, arguments);\n  },\n  greyscale: function () {\n    return this._applyModification(greyscale, arguments);\n  },\n  spin: function () {\n    return this._applyModification(spin, arguments);\n  },\n\n  _applyCombination: function (fn, args) {\n    return fn.apply(null, [this].concat([].slice.call(args)));\n  },\n  analogous: function () {\n    return this._applyCombination(analogous, arguments);\n  },\n  complement: function () {\n    return this._applyCombination(complement, arguments);\n  },\n  monochromatic: function () {\n    return this._applyCombination(monochromatic, arguments);\n  },\n  splitcomplement: function () {\n    return this._applyCombination(splitcomplement, arguments);\n  },\n  // Disabled until https://github.com/bgrins/TinyColor/issues/254\n  // polyad: function (number) {\n  //   return this._applyCombination(polyad, [number]);\n  // },\n  triad: function () {\n    return this._applyCombination(polyad, [3]);\n  },\n  tetrad: function () {\n    return this._applyCombination(polyad, [4]);\n  },\n};\n\n// If input is an object, force 1 into \"1.0\" to handle ratios properly\n// String input requires \"1.0\" as input, so 1 will be treated as 1\ntinycolor.fromRatio = function (color, opts) {\n  if (typeof color == \"object\") {\n    var newColor = {};\n    for (var i in color) {\n      if (color.hasOwnProperty(i)) {\n        if (i === \"a\") {\n          newColor[i] = color[i];\n        } else {\n          newColor[i] = convertToPercentage(color[i]);\n        }\n      }\n    }\n    color = newColor;\n  }\n\n  return tinycolor(color, opts);\n};\n\n// Given a string or object, convert that input to RGB\n// Possible string inputs:\n//\n//     \"red\"\n//     \"#f00\" or \"f00\"\n//     \"#ff0000\" or \"ff0000\"\n//     \"#ff000000\" or \"ff000000\"\n//     \"rgb 255 0 0\" or \"rgb (255, 0, 0)\"\n//     \"rgb 1.0 0 0\" or \"rgb (1, 0, 0)\"\n//     \"rgba (255, 0, 0, 1)\" or \"rgba 255, 0, 0, 1\"\n//     \"rgba (1.0, 0, 0, 1)\" or \"rgba 1.0, 0, 0, 1\"\n//     \"hsl(0, 100%, 50%)\" or \"hsl 0 100% 50%\"\n//     \"hsla(0, 100%, 50%, 1)\" or \"hsla 0 100% 50%, 1\"\n//     \"hsv(0, 100%, 100%)\" or \"hsv 0 100% 100%\"\n//\nfunction inputToRGB(color) {\n  var rgb = { r: 0, g: 0, b: 0 };\n  var a = 1;\n  var s = null;\n  var v = null;\n  var l = null;\n  var ok = false;\n  var format = false;\n\n  if (typeof color == \"string\") {\n    color = stringInputToObject(color);\n  }\n\n  if (typeof color == \"object\") {\n    if (\n      isValidCSSUnit(color.r) &&\n      isValidCSSUnit(color.g) &&\n      isValidCSSUnit(color.b)\n    ) {\n      rgb = rgbToRgb(color.r, color.g, color.b);\n      ok = true;\n      format = String(color.r).substr(-1) === \"%\" ? \"prgb\" : \"rgb\";\n    } else if (\n      isValidCSSUnit(color.h) &&\n      isValidCSSUnit(color.s) &&\n      isValidCSSUnit(color.v)\n    ) {\n      s = convertToPercentage(color.s);\n      v = convertToPercentage(color.v);\n      rgb = hsvToRgb(color.h, s, v);\n      ok = true;\n      format = \"hsv\";\n    } else if (\n      isValidCSSUnit(color.h) &&\n      isValidCSSUnit(color.s) &&\n      isValidCSSUnit(color.l)\n    ) {\n      s = convertToPercentage(color.s);\n      l = convertToPercentage(color.l);\n      rgb = hslToRgb(color.h, s, l);\n      ok = true;\n      format = \"hsl\";\n    }\n\n    if (color.hasOwnProperty(\"a\")) {\n      a = color.a;\n    }\n  }\n\n  a = boundAlpha(a);\n\n  return {\n    ok: ok,\n    format: color.format || format,\n    r: Math.min(255, Math.max(rgb.r, 0)),\n    g: Math.min(255, Math.max(rgb.g, 0)),\n    b: Math.min(255, Math.max(rgb.b, 0)),\n    a: a,\n  };\n}\n\n// Conversion Functions\n// --------------------\n\n// `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\n// <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\n\n// `rgbToRgb`\n// Handle bounds / percentage checking to conform to CSS color spec\n// <http://www.w3.org/TR/css3-color/>\n// *Assumes:* r, g, b in [0, 255] or [0, 1]\n// *Returns:* { r, g, b } in [0, 255]\nfunction rgbToRgb(r, g, b) {\n  return {\n    r: bound01(r, 255) * 255,\n    g: bound01(g, 255) * 255,\n    b: bound01(b, 255) * 255,\n  };\n}\n\n// `rgbToHsl`\n// Converts an RGB color value to HSL.\n// *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\n// *Returns:* { h, s, l } in [0,1]\nfunction rgbToHsl(r, g, b) {\n  r = bound01(r, 255);\n  g = bound01(g, 255);\n  b = bound01(b, 255);\n\n  var max = Math.max(r, g, b),\n    min = Math.min(r, g, b);\n  var h,\n    s,\n    l = (max + min) / 2;\n\n  if (max == min) {\n    h = s = 0; // achromatic\n  } else {\n    var d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n    switch (max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0);\n        break;\n      case g:\n        h = (b - r) / d + 2;\n        break;\n      case b:\n        h = (r - g) / d + 4;\n        break;\n    }\n\n    h /= 6;\n  }\n\n  return { h: h, s: s, l: l };\n}\n\n// `hslToRgb`\n// Converts an HSL color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\nfunction hslToRgb(h, s, l) {\n  var r, g, b;\n\n  h = bound01(h, 360);\n  s = bound01(s, 100);\n  l = bound01(l, 100);\n\n  function hue2rgb(p, q, t) {\n    if (t < 0) t += 1;\n    if (t > 1) t -= 1;\n    if (t < 1 / 6) return p + (q - p) * 6 * t;\n    if (t < 1 / 2) return q;\n    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n    return p;\n  }\n\n  if (s === 0) {\n    r = g = b = l; // achromatic\n  } else {\n    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    var p = 2 * l - q;\n    r = hue2rgb(p, q, h + 1 / 3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1 / 3);\n  }\n\n  return { r: r * 255, g: g * 255, b: b * 255 };\n}\n\n// `rgbToHsv`\n// Converts an RGB color value to HSV\n// *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\n// *Returns:* { h, s, v } in [0,1]\nfunction rgbToHsv(r, g, b) {\n  r = bound01(r, 255);\n  g = bound01(g, 255);\n  b = bound01(b, 255);\n\n  var max = Math.max(r, g, b),\n    min = Math.min(r, g, b);\n  var h,\n    s,\n    v = max;\n\n  var d = max - min;\n  s = max === 0 ? 0 : d / max;\n\n  if (max == min) {\n    h = 0; // achromatic\n  } else {\n    switch (max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0);\n        break;\n      case g:\n        h = (b - r) / d + 2;\n        break;\n      case b:\n        h = (r - g) / d + 4;\n        break;\n    }\n    h /= 6;\n  }\n  return { h: h, s: s, v: v };\n}\n\n// `hsvToRgb`\n// Converts an HSV color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\nfunction hsvToRgb(h, s, v) {\n  h = bound01(h, 360) * 6;\n  s = bound01(s, 100);\n  v = bound01(v, 100);\n\n  var i = Math.floor(h),\n    f = h - i,\n    p = v * (1 - s),\n    q = v * (1 - f * s),\n    t = v * (1 - (1 - f) * s),\n    mod = i % 6,\n    r = [v, q, p, p, t, v][mod],\n    g = [t, v, v, q, p, p][mod],\n    b = [p, p, t, v, v, q][mod];\n\n  return { r: r * 255, g: g * 255, b: b * 255 };\n}\n\n// `rgbToHex`\n// Converts an RGB color to hex\n// Assumes r, g, and b are contained in the set [0, 255]\n// Returns a 3 or 6 character hex\nfunction rgbToHex(r, g, b, allow3Char) {\n  var hex = [\n    pad2(Math.round(r).toString(16)),\n    pad2(Math.round(g).toString(16)),\n    pad2(Math.round(b).toString(16)),\n  ];\n\n  // Return a 3 character hex if possible\n  if (\n    allow3Char &&\n    hex[0].charAt(0) == hex[0].charAt(1) &&\n    hex[1].charAt(0) == hex[1].charAt(1) &&\n    hex[2].charAt(0) == hex[2].charAt(1)\n  ) {\n    return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\n  }\n\n  return hex.join(\"\");\n}\n\n// `rgbaToHex`\n// Converts an RGBA color plus alpha transparency to hex\n// Assumes r, g, b are contained in the set [0, 255] and\n// a in [0, 1]. Returns a 4 or 8 character rgba hex\nfunction rgbaToHex(r, g, b, a, allow4Char) {\n  var hex = [\n    pad2(Math.round(r).toString(16)),\n    pad2(Math.round(g).toString(16)),\n    pad2(Math.round(b).toString(16)),\n    pad2(convertDecimalToHex(a)),\n  ];\n\n  // Return a 4 character hex if possible\n  if (\n    allow4Char &&\n    hex[0].charAt(0) == hex[0].charAt(1) &&\n    hex[1].charAt(0) == hex[1].charAt(1) &&\n    hex[2].charAt(0) == hex[2].charAt(1) &&\n    hex[3].charAt(0) == hex[3].charAt(1)\n  ) {\n    return (\n      hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0) + hex[3].charAt(0)\n    );\n  }\n\n  return hex.join(\"\");\n}\n\n// `rgbaToArgbHex`\n// Converts an RGBA color to an ARGB Hex8 string\n// Rarely used, but required for \"toFilter()\"\nfunction rgbaToArgbHex(r, g, b, a) {\n  var hex = [\n    pad2(convertDecimalToHex(a)),\n    pad2(Math.round(r).toString(16)),\n    pad2(Math.round(g).toString(16)),\n    pad2(Math.round(b).toString(16)),\n  ];\n\n  return hex.join(\"\");\n}\n\n// `equals`\n// Can be called with any tinycolor input\ntinycolor.equals = function (color1, color2) {\n  if (!color1 || !color2) return false;\n  return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();\n};\n\ntinycolor.random = function () {\n  return tinycolor.fromRatio({\n    r: Math.random(),\n    g: Math.random(),\n    b: Math.random(),\n  });\n};\n\n// Modification Functions\n// ----------------------\n// Thanks to less.js for some of the basics here\n// <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\n\nfunction desaturate(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.s -= amount / 100;\n  hsl.s = clamp01(hsl.s);\n  return tinycolor(hsl);\n}\n\nfunction saturate(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.s += amount / 100;\n  hsl.s = clamp01(hsl.s);\n  return tinycolor(hsl);\n}\n\nfunction greyscale(color) {\n  return tinycolor(color).desaturate(100);\n}\n\nfunction lighten(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.l += amount / 100;\n  hsl.l = clamp01(hsl.l);\n  return tinycolor(hsl);\n}\n\nfunction brighten(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var rgb = tinycolor(color).toRgb();\n  rgb.r = Math.max(0, Math.min(255, rgb.r - Math.round(255 * -(amount / 100))));\n  rgb.g = Math.max(0, Math.min(255, rgb.g - Math.round(255 * -(amount / 100))));\n  rgb.b = Math.max(0, Math.min(255, rgb.b - Math.round(255 * -(amount / 100))));\n  return tinycolor(rgb);\n}\n\nfunction darken(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.l -= amount / 100;\n  hsl.l = clamp01(hsl.l);\n  return tinycolor(hsl);\n}\n\n// Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\n// Values outside of this range will be wrapped into this range.\nfunction spin(color, amount) {\n  var hsl = tinycolor(color).toHsl();\n  var hue = (hsl.h + amount) % 360;\n  hsl.h = hue < 0 ? 360 + hue : hue;\n  return tinycolor(hsl);\n}\n\n// Combination Functions\n// ---------------------\n// Thanks to jQuery xColor for some of the ideas behind these\n// <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\n\nfunction complement(color) {\n  var hsl = tinycolor(color).toHsl();\n  hsl.h = (hsl.h + 180) % 360;\n  return tinycolor(hsl);\n}\n\nfunction polyad(color, number) {\n  if (isNaN(number) || number <= 0) {\n    throw new Error(\"Argument to polyad must be a positive number\");\n  }\n  var hsl = tinycolor(color).toHsl();\n  var result = [tinycolor(color)];\n  var step = 360 / number;\n  for (var i = 1; i < number; i++) {\n    result.push(tinycolor({ h: (hsl.h + i * step) % 360, s: hsl.s, l: hsl.l }));\n  }\n\n  return result;\n}\n\nfunction splitcomplement(color) {\n  var hsl = tinycolor(color).toHsl();\n  var h = hsl.h;\n  return [\n    tinycolor(color),\n    tinycolor({ h: (h + 72) % 360, s: hsl.s, l: hsl.l }),\n    tinycolor({ h: (h + 216) % 360, s: hsl.s, l: hsl.l }),\n  ];\n}\n\nfunction analogous(color, results, slices) {\n  results = results || 6;\n  slices = slices || 30;\n\n  var hsl = tinycolor(color).toHsl();\n  var part = 360 / slices;\n  var ret = [tinycolor(color)];\n\n  for (hsl.h = (hsl.h - ((part * results) >> 1) + 720) % 360; --results; ) {\n    hsl.h = (hsl.h + part) % 360;\n    ret.push(tinycolor(hsl));\n  }\n  return ret;\n}\n\nfunction monochromatic(color, results) {\n  results = results || 6;\n  var hsv = tinycolor(color).toHsv();\n  var h = hsv.h,\n    s = hsv.s,\n    v = hsv.v;\n  var ret = [];\n  var modification = 1 / results;\n\n  while (results--) {\n    ret.push(tinycolor({ h: h, s: s, v: v }));\n    v = (v + modification) % 1;\n  }\n\n  return ret;\n}\n\n// Utility Functions\n// ---------------------\n\ntinycolor.mix = function (color1, color2, amount) {\n  amount = amount === 0 ? 0 : amount || 50;\n\n  var rgb1 = tinycolor(color1).toRgb();\n  var rgb2 = tinycolor(color2).toRgb();\n\n  var p = amount / 100;\n\n  var rgba = {\n    r: (rgb2.r - rgb1.r) * p + rgb1.r,\n    g: (rgb2.g - rgb1.g) * p + rgb1.g,\n    b: (rgb2.b - rgb1.b) * p + rgb1.b,\n    a: (rgb2.a - rgb1.a) * p + rgb1.a,\n  };\n\n  return tinycolor(rgba);\n};\n\n// Readability Functions\n// ---------------------\n// <http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef (WCAG Version 2)\n\n// `contrast`\n// Analyze the 2 colors and returns the color contrast defined by (WCAG Version 2)\ntinycolor.readability = function (color1, color2) {\n  var c1 = tinycolor(color1);\n  var c2 = tinycolor(color2);\n  return (\n    (Math.max(c1.getLuminance(), c2.getLuminance()) + 0.05) /\n    (Math.min(c1.getLuminance(), c2.getLuminance()) + 0.05)\n  );\n};\n\n// `isReadable`\n// Ensure that foreground and background color combinations meet WCAG2 guidelines.\n// The third argument is an optional Object.\n//      the 'level' property states 'AA' or 'AAA' - if missing or invalid, it defaults to 'AA';\n//      the 'size' property states 'large' or 'small' - if missing or invalid, it defaults to 'small'.\n// If the entire object is absent, isReadable defaults to {level:\"AA\",size:\"small\"}.\n\n// *Example*\n//    tinycolor.isReadable(\"#000\", \"#111\") => false\n//    tinycolor.isReadable(\"#000\", \"#111\",{level:\"AA\",size:\"large\"}) => false\ntinycolor.isReadable = function (color1, color2, wcag2) {\n  var readability = tinycolor.readability(color1, color2);\n  var wcag2Parms, out;\n\n  out = false;\n\n  wcag2Parms = validateWCAG2Parms(wcag2);\n  switch (wcag2Parms.level + wcag2Parms.size) {\n    case \"AAsmall\":\n    case \"AAAlarge\":\n      out = readability >= 4.5;\n      break;\n    case \"AAlarge\":\n      out = readability >= 3;\n      break;\n    case \"AAAsmall\":\n      out = readability >= 7;\n      break;\n  }\n  return out;\n};\n\n// `mostReadable`\n// Given a base color and a list of possible foreground or background\n// colors for that base, returns the most readable color.\n// Optionally returns Black or White if the most readable color is unreadable.\n// *Example*\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:false}).toHexString(); // \"#112255\"\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:true}).toHexString();  // \"#ffffff\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"large\"}).toHexString(); // \"#faf3f3\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"small\"}).toHexString(); // \"#ffffff\"\ntinycolor.mostReadable = function (baseColor, colorList, args) {\n  var bestColor = null;\n  var bestScore = 0;\n  var readability;\n  var includeFallbackColors, level, size;\n  args = args || {};\n  includeFallbackColors = args.includeFallbackColors;\n  level = args.level;\n  size = args.size;\n\n  for (var i = 0; i < colorList.length; i++) {\n    readability = tinycolor.readability(baseColor, colorList[i]);\n    if (readability > bestScore) {\n      bestScore = readability;\n      bestColor = tinycolor(colorList[i]);\n    }\n  }\n\n  if (\n    tinycolor.isReadable(baseColor, bestColor, {\n      level: level,\n      size: size,\n    }) ||\n    !includeFallbackColors\n  ) {\n    return bestColor;\n  } else {\n    args.includeFallbackColors = false;\n    return tinycolor.mostReadable(baseColor, [\"#fff\", \"#000\"], args);\n  }\n};\n\n// Big List of Colors\n// ------------------\n// <https://www.w3.org/TR/css-color-4/#named-colors>\nvar names = (tinycolor.names = {\n  aliceblue: \"f0f8ff\",\n  antiquewhite: \"faebd7\",\n  aqua: \"0ff\",\n  aquamarine: \"7fffd4\",\n  azure: \"f0ffff\",\n  beige: \"f5f5dc\",\n  bisque: \"ffe4c4\",\n  black: \"000\",\n  blanchedalmond: \"ffebcd\",\n  blue: \"00f\",\n  blueviolet: \"8a2be2\",\n  brown: \"a52a2a\",\n  burlywood: \"deb887\",\n  burntsienna: \"ea7e5d\",\n  cadetblue: \"5f9ea0\",\n  chartreuse: \"7fff00\",\n  chocolate: \"d2691e\",\n  coral: \"ff7f50\",\n  cornflowerblue: \"6495ed\",\n  cornsilk: \"fff8dc\",\n  crimson: \"dc143c\",\n  cyan: \"0ff\",\n  darkblue: \"00008b\",\n  darkcyan: \"008b8b\",\n  darkgoldenrod: \"b8860b\",\n  darkgray: \"a9a9a9\",\n  darkgreen: \"006400\",\n  darkgrey: \"a9a9a9\",\n  darkkhaki: \"bdb76b\",\n  darkmagenta: \"8b008b\",\n  darkolivegreen: \"556b2f\",\n  darkorange: \"ff8c00\",\n  darkorchid: \"9932cc\",\n  darkred: \"8b0000\",\n  darksalmon: \"e9967a\",\n  darkseagreen: \"8fbc8f\",\n  darkslateblue: \"483d8b\",\n  darkslategray: \"2f4f4f\",\n  darkslategrey: \"2f4f4f\",\n  darkturquoise: \"00ced1\",\n  darkviolet: \"9400d3\",\n  deeppink: \"ff1493\",\n  deepskyblue: \"00bfff\",\n  dimgray: \"696969\",\n  dimgrey: \"696969\",\n  dodgerblue: \"1e90ff\",\n  firebrick: \"b22222\",\n  floralwhite: \"fffaf0\",\n  forestgreen: \"228b22\",\n  fuchsia: \"f0f\",\n  gainsboro: \"dcdcdc\",\n  ghostwhite: \"f8f8ff\",\n  gold: \"ffd700\",\n  goldenrod: \"daa520\",\n  gray: \"808080\",\n  green: \"008000\",\n  greenyellow: \"adff2f\",\n  grey: \"808080\",\n  honeydew: \"f0fff0\",\n  hotpink: \"ff69b4\",\n  indianred: \"cd5c5c\",\n  indigo: \"4b0082\",\n  ivory: \"fffff0\",\n  khaki: \"f0e68c\",\n  lavender: \"e6e6fa\",\n  lavenderblush: \"fff0f5\",\n  lawngreen: \"7cfc00\",\n  lemonchiffon: \"fffacd\",\n  lightblue: \"add8e6\",\n  lightcoral: \"f08080\",\n  lightcyan: \"e0ffff\",\n  lightgoldenrodyellow: \"fafad2\",\n  lightgray: \"d3d3d3\",\n  lightgreen: \"90ee90\",\n  lightgrey: \"d3d3d3\",\n  lightpink: \"ffb6c1\",\n  lightsalmon: \"ffa07a\",\n  lightseagreen: \"20b2aa\",\n  lightskyblue: \"87cefa\",\n  lightslategray: \"789\",\n  lightslategrey: \"789\",\n  lightsteelblue: \"b0c4de\",\n  lightyellow: \"ffffe0\",\n  lime: \"0f0\",\n  limegreen: \"32cd32\",\n  linen: \"faf0e6\",\n  magenta: \"f0f\",\n  maroon: \"800000\",\n  mediumaquamarine: \"66cdaa\",\n  mediumblue: \"0000cd\",\n  mediumorchid: \"ba55d3\",\n  mediumpurple: \"9370db\",\n  mediumseagreen: \"3cb371\",\n  mediumslateblue: \"7b68ee\",\n  mediumspringgreen: \"00fa9a\",\n  mediumturquoise: \"48d1cc\",\n  mediumvioletred: \"c71585\",\n  midnightblue: \"191970\",\n  mintcream: \"f5fffa\",\n  mistyrose: \"ffe4e1\",\n  moccasin: \"ffe4b5\",\n  navajowhite: \"ffdead\",\n  navy: \"000080\",\n  oldlace: \"fdf5e6\",\n  olive: \"808000\",\n  olivedrab: \"6b8e23\",\n  orange: \"ffa500\",\n  orangered: \"ff4500\",\n  orchid: \"da70d6\",\n  palegoldenrod: \"eee8aa\",\n  palegreen: \"98fb98\",\n  paleturquoise: \"afeeee\",\n  palevioletred: \"db7093\",\n  papayawhip: \"ffefd5\",\n  peachpuff: \"ffdab9\",\n  peru: \"cd853f\",\n  pink: \"ffc0cb\",\n  plum: \"dda0dd\",\n  powderblue: \"b0e0e6\",\n  purple: \"800080\",\n  rebeccapurple: \"663399\",\n  red: \"f00\",\n  rosybrown: \"bc8f8f\",\n  royalblue: \"4169e1\",\n  saddlebrown: \"8b4513\",\n  salmon: \"fa8072\",\n  sandybrown: \"f4a460\",\n  seagreen: \"2e8b57\",\n  seashell: \"fff5ee\",\n  sienna: \"a0522d\",\n  silver: \"c0c0c0\",\n  skyblue: \"87ceeb\",\n  slateblue: \"6a5acd\",\n  slategray: \"708090\",\n  slategrey: \"708090\",\n  snow: \"fffafa\",\n  springgreen: \"00ff7f\",\n  steelblue: \"4682b4\",\n  tan: \"d2b48c\",\n  teal: \"008080\",\n  thistle: \"d8bfd8\",\n  tomato: \"ff6347\",\n  turquoise: \"40e0d0\",\n  violet: \"ee82ee\",\n  wheat: \"f5deb3\",\n  white: \"fff\",\n  whitesmoke: \"f5f5f5\",\n  yellow: \"ff0\",\n  yellowgreen: \"9acd32\",\n});\n\n// Make it easy to access colors via `hexNames[hex]`\nvar hexNames = (tinycolor.hexNames = flip(names));\n\n// Utilities\n// ---------\n\n// `{ 'name1': 'val1' }` becomes `{ 'val1': 'name1' }`\nfunction flip(o) {\n  var flipped = {};\n  for (var i in o) {\n    if (o.hasOwnProperty(i)) {\n      flipped[o[i]] = i;\n    }\n  }\n  return flipped;\n}\n\n// Return a valid alpha value [0,1] with all invalid values being set to 1\nfunction boundAlpha(a) {\n  a = parseFloat(a);\n\n  if (isNaN(a) || a < 0 || a > 1) {\n    a = 1;\n  }\n\n  return a;\n}\n\n// Take input from [0, n] and return it as [0, 1]\nfunction bound01(n, max) {\n  if (isOnePointZero(n)) n = \"100%\";\n\n  var processPercent = isPercentage(n);\n  n = Math.min(max, Math.max(0, parseFloat(n)));\n\n  // Automatically convert percentage into number\n  if (processPercent) {\n    n = parseInt(n * max, 10) / 100;\n  }\n\n  // Handle floating point rounding errors\n  if (Math.abs(n - max) < 0.000001) {\n    return 1;\n  }\n\n  // Convert into [0, 1] range if it isn't already\n  return (n % max) / parseFloat(max);\n}\n\n// Force a number between 0 and 1\nfunction clamp01(val) {\n  return Math.min(1, Math.max(0, val));\n}\n\n// Parse a base-16 hex value into a base-10 integer\nfunction parseIntFromHex(val) {\n  return parseInt(val, 16);\n}\n\n// Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\n// <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\nfunction isOnePointZero(n) {\n  return typeof n == \"string\" && n.indexOf(\".\") != -1 && parseFloat(n) === 1;\n}\n\n// Check to see if string passed in is a percentage\nfunction isPercentage(n) {\n  return typeof n === \"string\" && n.indexOf(\"%\") != -1;\n}\n\n// Force a hex value to have 2 characters\nfunction pad2(c) {\n  return c.length == 1 ? \"0\" + c : \"\" + c;\n}\n\n// Replace a decimal with it's percentage value\nfunction convertToPercentage(n) {\n  if (n <= 1) {\n    n = n * 100 + \"%\";\n  }\n\n  return n;\n}\n\n// Converts a decimal to a hex value\nfunction convertDecimalToHex(d) {\n  return Math.round(parseFloat(d) * 255).toString(16);\n}\n// Converts a hex value to a decimal\nfunction convertHexToDecimal(h) {\n  return parseIntFromHex(h) / 255;\n}\n\nvar matchers = (function () {\n  // <http://www.w3.org/TR/css3-values/#integers>\n  var CSS_INTEGER = \"[-\\\\+]?\\\\d+%?\";\n\n  // <http://www.w3.org/TR/css3-values/#number-value>\n  var CSS_NUMBER = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\";\n\n  // Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\n  var CSS_UNIT = \"(?:\" + CSS_NUMBER + \")|(?:\" + CSS_INTEGER + \")\";\n\n  // Actual matching.\n  // Parentheses and commas are optional, but not required.\n  // Whitespace can take the place of commas or opening paren\n  var PERMISSIVE_MATCH3 =\n    \"[\\\\s|\\\\(]+(\" +\n    CSS_UNIT +\n    \")[,|\\\\s]+(\" +\n    CSS_UNIT +\n    \")[,|\\\\s]+(\" +\n    CSS_UNIT +\n    \")\\\\s*\\\\)?\";\n  var PERMISSIVE_MATCH4 =\n    \"[\\\\s|\\\\(]+(\" +\n    CSS_UNIT +\n    \")[,|\\\\s]+(\" +\n    CSS_UNIT +\n    \")[,|\\\\s]+(\" +\n    CSS_UNIT +\n    \")[,|\\\\s]+(\" +\n    CSS_UNIT +\n    \")\\\\s*\\\\)?\";\n\n  return {\n    CSS_UNIT: new RegExp(CSS_UNIT),\n    rgb: new RegExp(\"rgb\" + PERMISSIVE_MATCH3),\n    rgba: new RegExp(\"rgba\" + PERMISSIVE_MATCH4),\n    hsl: new RegExp(\"hsl\" + PERMISSIVE_MATCH3),\n    hsla: new RegExp(\"hsla\" + PERMISSIVE_MATCH4),\n    hsv: new RegExp(\"hsv\" + PERMISSIVE_MATCH3),\n    hsva: new RegExp(\"hsva\" + PERMISSIVE_MATCH4),\n    hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n    hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n    hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n    hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n  };\n})();\n\n// `isValidCSSUnit`\n// Take in a single string / number and check to see if it looks like a CSS unit\n// (see `matchers` above for definition).\nfunction isValidCSSUnit(color) {\n  return !!matchers.CSS_UNIT.exec(color);\n}\n\n// `stringInputToObject`\n// Permissive string parsing.  Take in a number of formats, and output an object\n// based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\nfunction stringInputToObject(color) {\n  color = color.replace(trimLeft, \"\").replace(trimRight, \"\").toLowerCase();\n  var named = false;\n  if (names[color]) {\n    color = names[color];\n    named = true;\n  } else if (color == \"transparent\") {\n    return { r: 0, g: 0, b: 0, a: 0, format: \"name\" };\n  }\n\n  // Try to match string input using regular expressions.\n  // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\n  // Just return an object and let the conversion functions handle that.\n  // This way the result will be the same whether the tinycolor is initialized with string or object.\n  var match;\n  if ((match = matchers.rgb.exec(color))) {\n    return { r: match[1], g: match[2], b: match[3] };\n  }\n  if ((match = matchers.rgba.exec(color))) {\n    return { r: match[1], g: match[2], b: match[3], a: match[4] };\n  }\n  if ((match = matchers.hsl.exec(color))) {\n    return { h: match[1], s: match[2], l: match[3] };\n  }\n  if ((match = matchers.hsla.exec(color))) {\n    return { h: match[1], s: match[2], l: match[3], a: match[4] };\n  }\n  if ((match = matchers.hsv.exec(color))) {\n    return { h: match[1], s: match[2], v: match[3] };\n  }\n  if ((match = matchers.hsva.exec(color))) {\n    return { h: match[1], s: match[2], v: match[3], a: match[4] };\n  }\n  if ((match = matchers.hex8.exec(color))) {\n    return {\n      r: parseIntFromHex(match[1]),\n      g: parseIntFromHex(match[2]),\n      b: parseIntFromHex(match[3]),\n      a: convertHexToDecimal(match[4]),\n      format: named ? \"name\" : \"hex8\",\n    };\n  }\n  if ((match = matchers.hex6.exec(color))) {\n    return {\n      r: parseIntFromHex(match[1]),\n      g: parseIntFromHex(match[2]),\n      b: parseIntFromHex(match[3]),\n      format: named ? \"name\" : \"hex\",\n    };\n  }\n  if ((match = matchers.hex4.exec(color))) {\n    return {\n      r: parseIntFromHex(match[1] + \"\" + match[1]),\n      g: parseIntFromHex(match[2] + \"\" + match[2]),\n      b: parseIntFromHex(match[3] + \"\" + match[3]),\n      a: convertHexToDecimal(match[4] + \"\" + match[4]),\n      format: named ? \"name\" : \"hex8\",\n    };\n  }\n  if ((match = matchers.hex3.exec(color))) {\n    return {\n      r: parseIntFromHex(match[1] + \"\" + match[1]),\n      g: parseIntFromHex(match[2] + \"\" + match[2]),\n      b: parseIntFromHex(match[3] + \"\" + match[3]),\n      format: named ? \"name\" : \"hex\",\n    };\n  }\n\n  return false;\n}\n\nfunction validateWCAG2Parms(parms) {\n  // return valid WCAG2 parms for isReadable.\n  // If input parms are invalid, return {\"level\":\"AA\", \"size\":\"small\"}\n  var level, size;\n  parms = parms || { level: \"AA\", size: \"small\" };\n  level = (parms.level || \"AA\").toUpperCase();\n  size = (parms.size || \"small\").toLowerCase();\n  if (level !== \"AA\" && level !== \"AAA\") {\n    level = \"AA\";\n  }\n  if (size !== \"small\" && size !== \"large\") {\n    size = \"small\";\n  }\n  return { level: level, size: size };\n}\n\nexport { tinycolor as default };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import tinycolor, { ColorInput, Instance } from 'tinycolor2';\r\nimport { insertAfter, outerWidthWithMargin, wrap } from './dom';\r\nimport { ColorFormat, Options, SpLang, SpListener } from './types';\r\nimport {\r\n  addClass,\r\n  emit,\r\n  eventDelegate,\r\n  getElementOffset,\r\n  html,\r\n  OffsetCSSOptions,\r\n  removeClass,\r\n  setElementOffset,\r\n  throttle,\r\n  toggleClass,\r\n} from './utils';\r\n\r\nconst defaultOpts: Partial<Options> = {\r\n\r\n    // Callbacks\r\n    beforeShow: noop,\r\n    move: noop,\r\n    change: noop,\r\n    show: noop,\r\n    hide: noop,\r\n\r\n    // Options\r\n    color: '',\r\n    type: 'component', // text, color, component or flat\r\n    showInput: false,\r\n    allowEmpty: true,\r\n    showButtons: true,\r\n    clickoutFiresChange: true,\r\n    showInitial: false,\r\n    showPalette: true,\r\n    showPaletteOnly: false,\r\n    hideAfterPaletteSelect: false,\r\n    togglePaletteOnly: false,\r\n    showSelectionPalette: true,\r\n    localStorageKey: '',\r\n    appendTo: 'body',\r\n    maxSelectionSize: 8,\r\n    locale: 'en',\r\n    cancelText: 'cancel',\r\n    chooseText: 'choose',\r\n    togglePaletteMoreText: 'more',\r\n    togglePaletteLessText: 'less',\r\n    clearText: 'Clear Color Selection',\r\n    noColorSelectedText: 'No Color Selected',\r\n    preferredFormat: 'name',\r\n    containerClassName: '',\r\n    replacerClassName: '',\r\n    showAlpha: true,\r\n    theme: 'sp-light',\r\n    palette: [\r\n      ['#000000', '#444444', '#5b5b5b', '#999999', '#bcbcbc', '#eeeeee', '#f3f6f4', '#ffffff'],\r\n      ['#f44336', '#744700', '#ce7e00', '#8fce00', '#2986cc', '#16537e', '#6a329f', '#c90076'],\r\n      ['#f4cccc', '#fce5cd', '#fff2cc', '#d9ead3', '#d0e0e3', '#cfe2f3', '#d9d2e9', '#ead1dc'],\r\n      ['#ea9999', '#f9cb9c', '#ffe599', '#b6d7a8', '#a2c4c9', '#9fc5e8', '#b4a7d6', '#d5a6bd'],\r\n      ['#e06666', '#f6b26b', '#ffd966', '#93c47d', '#76a5af', '#6fa8dc', '#8e7cc3', '#c27ba0'],\r\n      ['#cc0000', '#e69138', '#f1c232', '#6aa84f', '#45818e', '#3d85c6', '#674ea7', '#a64d79'],\r\n      ['#990000', '#b45f06', '#bf9000', '#38761d', '#134f5c', '#0b5394', '#351c75', '#741b47'],\r\n      ['#660000', '#783f04', '#7f6000', '#274e13', '#0c343d', '#073763', '#20124d', '#4c1130'],\r\n    ],\r\n    selectionPalette: [] as string[],\r\n    disabled: false,\r\n    offset: null,\r\n  },\r\n  spectrums: any[] = [],\r\n  IE = !!/msie/i.exec(window.navigator.userAgent),\r\n  rgbaSupport = (() => {\r\n    function contains(str: string, substr: string) {\r\n      return !!~('' + str).indexOf(substr);\r\n    }\r\n\r\n    const elem = document.createElement('div');\r\n    const style = elem.style;\r\n    style.cssText = 'background-color:rgba(0,0,0,.5)';\r\n    return contains(style.backgroundColor, 'rgba') || contains(style.backgroundColor, 'hsla');\r\n  })(),\r\n  replaceInput = html(\r\n    [\r\n      '<div class=\\'sp-replacer\\'>',\r\n      '<div class=\\'sp-preview\\'><div class=\\'sp-preview-inner\\'></div></div>',\r\n      '<div class=\\'sp-dd\\'>&#9660;</div>',\r\n      '</div>',\r\n    ].join(''),\r\n  ) as HTMLElement,\r\n  markup = (function () {\r\n\r\n    // IE does not support gradients with multiple stops, so we need to simulate\r\n    //  that for the rainbow slider with 8 divs that each have a single gradient\r\n    let gradientFix = '';\r\n    if (IE) {\r\n      for (let i = 1; i <= 6; i++) {\r\n        gradientFix += '<div class=\\'sp-' + i + '\\'></div>';\r\n      }\r\n    }\r\n\r\n    return [\r\n      '<div class=\\'sp-container sp-hidden\\'>',\r\n      '<div class=\\'sp-palette-container\\'>',\r\n      '<div class=\\'sp-palette sp-thumb sp-cf\\'></div>',\r\n      '<div class=\\'sp-palette-button-container sp-cf\\'>',\r\n      '<button type=\\'button\\' class=\\'sp-palette-toggle\\'></button>',\r\n      '</div>',\r\n      '</div>',\r\n      '<div class=\\'sp-picker-container\\'>',\r\n      '<div class=\\'sp-top sp-cf\\'>',\r\n      '<div class=\\'sp-fill\\'></div>',\r\n      '<div class=\\'sp-top-inner\\'>',\r\n      '<div class=\\'sp-color\\'>',\r\n      '<div class=\\'sp-sat\\'>',\r\n      '<div class=\\'sp-val\\'>',\r\n      '<div class=\\'sp-dragger\\'></div>',\r\n      '</div>',\r\n      '</div>',\r\n      '</div>',\r\n      '<div class=\\'sp-clear sp-clear-display\\'>',\r\n      '</div>',\r\n      '<div class=\\'sp-hue\\'>',\r\n      '<div class=\\'sp-slider\\'></div>',\r\n      gradientFix,\r\n      '</div>',\r\n      '</div>',\r\n      '<div class=\\'sp-alpha\\'><div class=\\'sp-alpha-inner\\'><div class=\\'sp-alpha-handle\\'></div></div></div>',\r\n      '</div>',\r\n      '<div class=\\'sp-input-container sp-cf\\'>',\r\n      '<input class=\\'sp-input\\' type=\\'text\\' spellcheck=\\'false\\'  />',\r\n      '</div>',\r\n      '<div class=\\'sp-initial sp-thumb sp-cf\\'></div>',\r\n      '<div class=\\'sp-button-container sp-cf\\'>',\r\n      '<button class=\\'sp-cancel\\' href=\\'#\\'></button>',\r\n      '<button type=\\'button\\' class=\\'sp-choose\\'></button>',\r\n      '</div>',\r\n      '</div>',\r\n      '</div>',\r\n    ].join('');\r\n  })();\r\n\r\nfunction paletteTemplate(p: ColorInput[], color: ColorInput, className: string, opts: any) {\r\n  const html = [];\r\n  for (let i = 0; i < p.length; i++) {\r\n    const current = p[i];\r\n    if (current) {\r\n      const tiny = tinycolor(current);\r\n      let c = tiny.toHsl().l < 0.5 ? 'sp-thumb-el sp-thumb-dark' : 'sp-thumb-el sp-thumb-light';\r\n      c += (tinycolor.equals(color, current)) ? ' sp-thumb-active' : '';\r\n      const formattedString = tiny.toString(opts.preferredFormat || 'rgb');\r\n      const swatchStyle = rgbaSupport ? ('background-color:' + tiny.toRgbString()) : 'filter:' + tiny.toFilter();\r\n      html.push('<span title=\"' + formattedString + '\" data-color=\"' + tiny.toRgbString() + '\" class=\"' + c + '\"><span class=\"sp-thumb-inner\" style=\"' + swatchStyle + ';\"></span></span>');\r\n    } else {\r\n      html.push('<span class=\"sp-thumb-el sp-clear-display\" ><span class=\"sp-clear-palette-only\" style=\"background-color: transparent;\"></span></span>');\r\n    }\r\n  }\r\n  return '<div class=\\'sp-cf ' + className + '\\'>' + html.join('') + '</div>';\r\n}\r\n\r\nfunction hideAll() {\r\n  for (let i = 0; i < spectrums.length; i++) {\r\n    if (spectrums[i]) {\r\n      spectrums[i].hide();\r\n    }\r\n  }\r\n}\r\n\r\nfunction instanceOptions(options: Partial<Options>, callbackContext: object): Options {\r\n  options.locale = options.locale || window.navigator.language;\r\n\r\n  if (typeof options.locale === 'string') {\r\n    if (options.locale) {\r\n      // handle locale like \"zh-TW\" to \"zh-tw\"\r\n      // handle locale like \"fr-FR\" to \"fr\"\r\n      let parts = options.locale.split('-')\r\n        .map((p) => p.toLowerCase());\r\n\r\n      if (parts[0] === parts[1]) {\r\n        parts = [parts[0]];\r\n      }\r\n\r\n      options.locale = parts.join('-');\r\n    }\r\n\r\n    if (options.locale !== 'en' && Spectrum.localization[options.locale]) {\r\n      options = Object.assign({}, options, Spectrum.localization[options.locale]);\r\n    }\r\n  } else {\r\n    options = Object.assign({}, options, options.locale);\r\n  }\r\n\r\n  const opts = Object.assign({}, defaultOpts, options) as Options;\r\n\r\n  opts.callbacks = {\r\n    'move': bind(opts.move as Function, callbackContext),\r\n    'change': bind(opts.change as Function, callbackContext),\r\n    'show': bind(opts.show as Function, callbackContext),\r\n    'hide': bind(opts.hide as Function, callbackContext),\r\n    'beforeShow': bind(opts.beforeShow as Function, callbackContext),\r\n  };\r\n\r\n  return opts;\r\n}\r\n\r\nfunction spectrum(element: HTMLElement, options: Partial<Options>) {\r\n\r\n  let opts = instanceOptions(options, element),\r\n    type = opts.type,\r\n    flat = (type === 'flat'),\r\n    showSelectionPalette = opts.showSelectionPalette,\r\n    localStorageKey = opts.localStorageKey,\r\n    theme = opts.theme,\r\n    callbacks = opts.callbacks,\r\n    resize = throttle(reflow, 10),\r\n    visible = false,\r\n    isDragging = false,\r\n    dragWidth = 0,\r\n    dragHeight = 0,\r\n    dragHelperHeight = 0,\r\n    slideHeight = 0,\r\n    slideWidth = 0,\r\n    alphaWidth = 0,\r\n    alphaSlideHelperWidth = 0,\r\n    slideHelperHeight = 0,\r\n    currentHue = 0,\r\n    currentSaturation = 0,\r\n    currentValue = 0,\r\n    currentAlpha = 1,\r\n    palette: any = [],\r\n    paletteArray: any[] = [],\r\n    paletteLookup: any = {},\r\n    selectionPalette = opts.selectionPalette.slice(0),\r\n    maxSelectionSize = opts.maxSelectionSize,\r\n    draggingClass = 'sp-dragging',\r\n    abortNextInputChange = false,\r\n    shiftMovementDirection: any = null;\r\n\r\n  const doc = element.ownerDocument;\r\n\r\n  const container = html(markup, doc) as HTMLElement;\r\n  container.classList.add(theme);\r\n  doc.body.appendChild(container);\r\n\r\n  let body = doc.body,\r\n    boundElement: HTMLElement | HTMLInputElement = element,\r\n    disabled = false,\r\n    pickerContainer = container.querySelector('.sp-picker-container') as HTMLElement,\r\n    dragger = container.querySelector('.sp-color') as HTMLElement,\r\n    dragHelper = container.querySelector('.sp-dragger') as HTMLElement,\r\n    slider = container.querySelector('.sp-hue') as HTMLElement,\r\n    slideHelper = container.querySelector('.sp-slider') as HTMLElement,\r\n    alphaSliderInner = container.querySelector('.sp-alpha-inner') as HTMLElement,\r\n    alphaSlider = container.querySelector('.sp-alpha') as HTMLElement,\r\n    alphaSlideHelper = container.querySelector('.sp-alpha-handle') as HTMLElement,\r\n    textInput = container.querySelector('.sp-input') as HTMLInputElement,\r\n    paletteContainer = container.querySelector('.sp-palette') as HTMLElement,\r\n    initialColorContainer = container.querySelector('.sp-initial') as HTMLElement,\r\n    cancelButton = container.querySelector('.sp-cancel') as HTMLElement,\r\n    clearButton = container.querySelector('.sp-clear') as HTMLElement,\r\n    chooseButton = container.querySelector('.sp-choose') as HTMLElement,\r\n    toggleButton = container.querySelector('.sp-palette-toggle') as HTMLElement,\r\n    isInput = boundElement.nodeName === 'INPUT',\r\n    isInputTypeColor = isInput && boundElement.getAttribute('type') === 'color',\r\n    shouldReplace = isInput && type === 'color',\r\n    replacer = (shouldReplace)\r\n      ? (() => {\r\n        addClass(replaceInput, theme);\r\n        addClass(replaceInput, opts.replacerClassName);\r\n        return replaceInput;\r\n      })()\r\n      : null,\r\n    offsetElement = (shouldReplace) ? replacer : boundElement,\r\n    previewElement = replacer?.querySelector('.sp-preview-inner') as HTMLElement,\r\n    initialColor = opts.color || (isInput && (boundElement as HTMLInputElement).value),\r\n    colorOnShow: ColorInput = '',\r\n    currentPreferredFormat = opts.preferredFormat,\r\n    clickoutFiresChange = !opts.showButtons || opts.clickoutFiresChange,\r\n    isEmpty = !initialColor,\r\n    allowEmpty = opts.allowEmpty;\r\n\r\n  // Element to be updated with the input color. Populated in initialize method\r\n  let originalInputContainer: HTMLSpanElement;\r\n  let colorizeElement: HTMLElement | null;\r\n  let colorizeElementInitialColor: string;\r\n  let colorizeElementInitialBackground: string;\r\n\r\n  //If there is a label for this element, when clicked on, show the colour picker\r\n  const thisId = boundElement.getAttribute('id') || '';\r\n  if (thisId !== undefined && thisId.length > 0) {\r\n    const labels = document.querySelectorAll(`label[for=\"${thisId}\"]`);\r\n\r\n    labels.forEach((label) => {\r\n      label.addEventListener('click', function (e) {\r\n        e.preventDefault();\r\n        show();\r\n        return false;\r\n      });\r\n    });\r\n  }\r\n\r\n  function applyOptions() {\r\n\r\n    if (opts.showPaletteOnly) {\r\n      opts.showPalette = true;\r\n    }\r\n\r\n    if (toggleButton) {\r\n      toggleButton.textContent = opts.showPaletteOnly ? opts.togglePaletteMoreText : opts.togglePaletteLessText;\r\n    }\r\n\r\n    if (opts.palette) {\r\n      palette = opts.palette.slice(0);\r\n      paletteArray = Array.isArray(palette[0]) ? palette : [palette];\r\n      paletteLookup = {};\r\n      for (let i = 0; i < paletteArray.length; i++) {\r\n        for (let j = 0; j < paletteArray[i].length; j++) {\r\n          const rgb = tinycolor(paletteArray[i][j]).toRgbString();\r\n          paletteLookup[rgb] = true;\r\n        }\r\n      }\r\n\r\n      // if showPaletteOnly and didn't set initialcolor\r\n      // set initialcolor to first palette\r\n      if (opts.showPaletteOnly && !initialColor) {\r\n        initialColor = (palette[0][0] === '') ? palette[0][0] : Object.keys(paletteLookup)[0];\r\n      }\r\n    }\r\n\r\n    toggleClass(container, 'sp-flat', flat);\r\n    toggleClass(container, 'sp-input-disabled', !opts.showInput);\r\n    toggleClass(container, 'sp-alpha-enabled', opts.showAlpha);\r\n    toggleClass(container, 'sp-clear-enabled', allowEmpty);\r\n    toggleClass(container, 'sp-buttons-disabled', !opts.showButtons);\r\n    toggleClass(container, 'sp-palette-buttons-disabled', !opts.togglePaletteOnly);\r\n    toggleClass(container, 'sp-palette-disabled', !opts.showPalette);\r\n    toggleClass(container, 'sp-palette-only', opts.showPaletteOnly);\r\n    toggleClass(container, 'sp-initial-disabled', !opts.showInitial);\r\n    addClass(container, opts.containerClassName);\r\n\r\n    reflow();\r\n  }\r\n\r\n  function offsetElementStart(e: Event) {\r\n    if (!disabled) {\r\n      show();\r\n    }\r\n\r\n    e.stopPropagation();\r\n    const target = e.target as HTMLElement;\r\n\r\n    if (!target.matches('input')) {\r\n      e.preventDefault();\r\n    }\r\n  }\r\n\r\n  function initialize() {\r\n    applyOptions();\r\n    const inputStyle = window.getComputedStyle(boundElement);\r\n\r\n    originalInputContainer = html('<span class=\"sp-original-input-container\"></span>') as HTMLSpanElement;\r\n    ['margin'].forEach(function (cssProp: string) {\r\n      originalInputContainer.style[cssProp] = inputStyle[cssProp] || null;\r\n    });\r\n    // inline-flex by default, switching to flex if needed\r\n\r\n    if (inputStyle.display === 'block') {\r\n      originalInputContainer.style.display = 'flex';\r\n    }\r\n\r\n    if (shouldReplace) {\r\n      insertAfter(boundElement, replacer as Element);\r\n      boundElement.style.display = 'none';\r\n    } else if (type === 'text') {\r\n      addClass(originalInputContainer, 'sp-colorize-container');\r\n      addClass(boundElement, 'spectrum sp-colorize');\r\n      wrap(boundElement, originalInputContainer);\r\n    } else if (type === 'component') {\r\n      addClass(boundElement, 'spectrum');\r\n      wrap(boundElement, originalInputContainer);\r\n      const addOn = html(['<div class=\\'sp-colorize-container sp-add-on\\'>',\r\n        '<div class=\\'sp-colorize\\'></div> ',\r\n        '</div>'].join('')) as HTMLElement;\r\n\r\n      addOn.style.width = boundElement.offsetHeight + 'px';\r\n      addOn.style.borderRadius = inputStyle.borderRadius;\r\n      addOn.style.border = inputStyle.border;\r\n\r\n      boundElement.classList.add('with-add-on');\r\n\r\n      boundElement.before(addOn);\r\n    }\r\n\r\n    colorizeElement = boundElement.parentNode?.querySelector('.sp-colorize');\r\n    colorizeElementInitialColor = colorizeElement?.style.color || '';\r\n    colorizeElementInitialBackground = colorizeElement?.style.backgroundColor || '';\r\n\r\n    if (!allowEmpty) {\r\n      clearButton.style.display = 'none';\r\n    }\r\n\r\n    if (flat) {\r\n      boundElement.after(container);\r\n      boundElement.style.display = 'none';\r\n    } else {\r\n\r\n      let appendTo = opts.appendTo === 'parent' ? boundElement.parentElement : opts.appendTo;\r\n      if (!appendTo) {\r\n        appendTo = document.body;\r\n      }\r\n\r\n      if (typeof appendTo !== 'string') {\r\n        appendTo.append(container);\r\n      }\r\n    }\r\n\r\n    updateSelectionPaletteFromStorage();\r\n\r\n    offsetElement?.addEventListener('click', offsetElementStart);\r\n    offsetElement?.addEventListener('touchstart', offsetElementStart);\r\n\r\n    if (boundElement.matches(':disabled') || opts.disabled) {\r\n      disable();\r\n    }\r\n\r\n    // Prevent clicks from bubbling up to document.  This would cause it to be hidden.\r\n    container.addEventListener('click', (e) => e.stopPropagation());\r\n\r\n    // Handle user typed input\r\n    [textInput, boundElement].forEach(function (input: HTMLElement | HTMLInputElement) {\r\n      if (!('value' in input)) {\r\n        return;\r\n      }\r\n\r\n      input.addEventListener('change', () => {\r\n        setFromTextInput(input.value);\r\n      });\r\n      input.addEventListener('paste', () => {\r\n        setTimeout(() => {\r\n          setFromTextInput(input.value);\r\n        }, 1);\r\n      });\r\n      input.addEventListener('keydown', (e) => {\r\n        if (e.keyCode === 13) {\r\n          setFromTextInput(input.value);\r\n          if (input === boundElement) {\r\n            hide();\r\n          }\r\n        }\r\n      });\r\n    });\r\n\r\n    cancelButton.textContent = opts.cancelText;\r\n    cancelButton.addEventListener('click', function (e) {\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n      revert();\r\n      hide();\r\n    });\r\n\r\n    clearButton.setAttribute('title', opts.clearText);\r\n    clearButton.addEventListener('click', function (e) {\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n      isEmpty = true;\r\n      move();\r\n\r\n      if (flat) {\r\n        //for the flat style, this is a change event\r\n        updateOriginalInput(true);\r\n      }\r\n    });\r\n\r\n    chooseButton.textContent = opts.chooseText;\r\n    chooseButton.addEventListener('click', e => {\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n\r\n      // if (IE && textInput.matches(':focus')) {\r\n      //   textInput.dispatchEvent(new CustomEvent('change'));\r\n      // }\r\n\r\n      if (isValid()) {\r\n        updateOriginalInput(true);\r\n        hide();\r\n      }\r\n    });\r\n\r\n    toggleButton.textContent = opts.showPaletteOnly ? opts.togglePaletteMoreText : opts.togglePaletteLessText;\r\n    toggleButton.addEventListener('click', e => {\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n\r\n      opts.showPaletteOnly = !opts.showPaletteOnly;\r\n\r\n      // To make sure the Picker area is drawn on the right, next to the\r\n      // Palette area (and not below the palette), first move the Palette\r\n      // to the left to make space for the picker, plus 5px extra.\r\n      // The 'applyOptions' function puts the whole container back into place\r\n      // and takes care of the button-text and the sp-palette-only CSS class.\r\n      if (!opts.showPaletteOnly && !flat) {\r\n        container.style.left = '-=' + (outerWidthWithMargin(pickerContainer) + 5);\r\n      }\r\n      applyOptions();\r\n    });\r\n\r\n    draggable(alphaSlider, function (dragX, dragY, e) {\r\n      currentAlpha = (dragX / alphaWidth);\r\n      isEmpty = false;\r\n      if (e.shiftKey) {\r\n        currentAlpha = Math.round(currentAlpha * 10) / 10;\r\n      }\r\n\r\n      move();\r\n    }, dragStart, dragStop);\r\n\r\n    draggable(slider, function (dragX, dragY) {\r\n      currentHue = dragY / slideHeight;\r\n      isEmpty = false;\r\n      if (!opts.showAlpha) {\r\n        currentAlpha = 1;\r\n      }\r\n      move();\r\n    }, dragStart, dragStop);\r\n\r\n    draggable(dragger, function (dragX, dragY, e) {\r\n\r\n      // shift+drag should snap the movement to either the x or y axis.\r\n      if (!e.shiftKey) {\r\n        shiftMovementDirection = null;\r\n      } else if (!shiftMovementDirection) {\r\n        const oldDragX = currentSaturation * dragWidth;\r\n        const oldDragY = dragHeight - (currentValue * dragHeight);\r\n        const furtherFromX = Math.abs(dragX - oldDragX) > Math.abs(dragY - oldDragY);\r\n\r\n        shiftMovementDirection = furtherFromX ? 'x' : 'y';\r\n      }\r\n\r\n      const setSaturation = !shiftMovementDirection || shiftMovementDirection === 'x';\r\n      const setValue = !shiftMovementDirection || shiftMovementDirection === 'y';\r\n\r\n      if (setSaturation) {\r\n        currentSaturation = (dragX / dragWidth);\r\n      }\r\n      if (setValue) {\r\n        currentValue = ((dragHeight - dragY) / dragHeight);\r\n      }\r\n\r\n      isEmpty = false;\r\n      if (!opts.showAlpha) {\r\n        currentAlpha = 1;\r\n      }\r\n\r\n      move();\r\n\r\n    }, dragStart, dragStop);\r\n\r\n    if (!!initialColor) {\r\n      set(initialColor);\r\n\r\n      // In case color was black - update the preview UI and set the format\r\n      // since the set function will not run (default color is black).\r\n      updateUI();\r\n      currentPreferredFormat = tinycolor(initialColor).getFormat() as ColorFormat || opts.preferredFormat;\r\n      addColorToSelectionPalette(initialColor);\r\n    } else if (initialColor === '') {\r\n      set(initialColor);\r\n      updateUI();\r\n    } else {\r\n      updateUI();\r\n    }\r\n\r\n    if (flat) {\r\n      show();\r\n    }\r\n\r\n    function paletteElementClick(e: Event) {\r\n      // @ts-ignore\r\n      if (e.data && e.data.ignore) {\r\n        const el = (e.target as HTMLElement).closest('.sp-thumb-el') as HTMLElement | null;\r\n        set(el?.dataset?.color || '');\r\n        move();\r\n      } else {\r\n        const el = (e.target as HTMLElement).closest('.sp-thumb-el') as HTMLElement | null;\r\n        set(el?.dataset?.color || '');\r\n        move();\r\n\r\n        // If the picker is going to close immediately, a palette selection\r\n        // is a change.  Otherwise, it's a move only.\r\n        if (opts.hideAfterPaletteSelect) {\r\n          updateOriginalInput(true);\r\n          hide();\r\n        } else {\r\n          updateOriginalInput();\r\n        }\r\n      }\r\n\r\n      return false;\r\n    }\r\n\r\n    const paletteEvents = ['click', 'touchstart'];\r\n\r\n    for (const paletteEvent of paletteEvents) {\r\n      eventDelegate(paletteContainer, paletteEvent, '.sp-thumb-el', paletteElementClick);\r\n      eventDelegate(initialColorContainer, paletteEvent, '.sp-thumb-el:nth-child(1)', paletteElementClick, { ignore: true });\r\n    }\r\n  }\r\n\r\n  function updateSelectionPaletteFromStorage() {\r\n    if (localStorageKey) {\r\n      // Migrate old palettes over to new format.  May want to remove this eventually.\r\n      try {\r\n        const localStorage = window.localStorage;\r\n        const oldPalette = localStorage[localStorageKey].split(',#');\r\n        if (oldPalette.length > 1) {\r\n          delete localStorage[localStorageKey];\r\n\r\n          for (const c of oldPalette) {\r\n            addColorToSelectionPalette(c);\r\n          }\r\n        }\r\n      } catch (e) {\r\n      }\r\n\r\n      try {\r\n        selectionPalette = window.localStorage[localStorageKey].split(';');\r\n      } catch (e) {\r\n      }\r\n    }\r\n  }\r\n\r\n  function addColorToSelectionPalette(color: ColorInput) {\r\n    if (showSelectionPalette) {\r\n      const rgb = tinycolor(color).toRgbString();\r\n\r\n      if (!paletteLookup[rgb] && !selectionPalette.includes(rgb)) {\r\n        selectionPalette.push(rgb);\r\n        while (selectionPalette.length > maxSelectionSize) {\r\n          selectionPalette.shift();\r\n        }\r\n      }\r\n\r\n      if (localStorageKey) {\r\n        try {\r\n          window.localStorage[localStorageKey] = selectionPalette.join(';');\r\n        } catch (e) {\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function getUniqueSelectionPalette() {\r\n    var unique = [];\r\n    if (opts.showPalette) {\r\n      for (var i = 0; i < selectionPalette.length; i++) {\r\n        var rgb = tinycolor(selectionPalette[i]).toRgbString();\r\n\r\n        if (!paletteLookup[rgb]) {\r\n          unique.push(selectionPalette[i]);\r\n        }\r\n      }\r\n    }\r\n\r\n    return unique.reverse().slice(0, opts.maxSelectionSize);\r\n  }\r\n\r\n  function drawPalette() {\r\n\r\n    const currentColor = get();\r\n\r\n    const html = paletteArray.map((palette, i) => {\r\n      return paletteTemplate(palette, currentColor, 'sp-palette-row sp-palette-row-' + i, opts);\r\n    });\r\n\r\n    updateSelectionPaletteFromStorage();\r\n\r\n    if (selectionPalette) {\r\n      html.push(paletteTemplate(getUniqueSelectionPalette(), currentColor, 'sp-palette-row sp-palette-row-selection', opts));\r\n    }\r\n\r\n    paletteContainer.innerHTML = html.join('');\r\n  }\r\n\r\n  function drawInitial() {\r\n    if (opts.showInitial) {\r\n      const initial = colorOnShow;\r\n      const current = get();\r\n      initialColorContainer.innerHTML = paletteTemplate([initial, current], current, 'sp-palette-row-initial', opts);\r\n    }\r\n  }\r\n\r\n  function dragStart() {\r\n    if (dragHeight <= 0 || dragWidth <= 0 || slideHeight <= 0) {\r\n      reflow();\r\n    }\r\n    isDragging = true;\r\n    addClass(container, draggingClass);\r\n    shiftMovementDirection = null;\r\n\r\n    emit(boundElement, 'dragstart', { color: get() });\r\n  }\r\n\r\n  function dragStop() {\r\n    isDragging = false;\r\n    removeClass(container, draggingClass);\r\n    emit(boundElement, 'dragstop', { color: get() });\r\n  }\r\n\r\n  function setFromTextInput(value: string) {\r\n    if (abortNextInputChange) {\r\n      abortNextInputChange = false;\r\n      return;\r\n    }\r\n    if ((value === null || value === '') && allowEmpty) {\r\n      set('');\r\n      move();\r\n      updateOriginalInput();\r\n    } else {\r\n      const tiny = tinycolor(value);\r\n      if (tiny.isValid()) {\r\n        set(tiny);\r\n        move();\r\n        updateOriginalInput();\r\n      } else {\r\n        textInput.classList.add('sp-validation-error');\r\n      }\r\n    }\r\n  }\r\n\r\n  function toggle() {\r\n    if (visible) {\r\n      hide();\r\n    } else {\r\n      show();\r\n    }\r\n  }\r\n\r\n  function show() {\r\n    if (visible) {\r\n      reflow();\r\n      return;\r\n    }\r\n\r\n    const event = emit(boundElement, 'beforeShow', { color: get() });\r\n\r\n    if (callbacks.beforeShow(event) === false || event.defaultPrevented) {\r\n      return;\r\n    }\r\n\r\n    hideAll();\r\n    visible = true;\r\n\r\n    doc.addEventListener('keydown', onkeydown);\r\n    doc.addEventListener('click', clickout);\r\n    window.addEventListener('resize', resize);\r\n    replacer?.classList.add('sp-active');\r\n    container.classList.remove('sp-hidden');\r\n\r\n    reflow();\r\n    updateUI();\r\n\r\n    colorOnShow = get();\r\n\r\n    drawInitial();\r\n\r\n    const e = emit(boundElement, 'show', { color: colorOnShow });\r\n    callbacks.show(e);\r\n  }\r\n\r\n  function onkeydown(e: KeyboardEvent) {\r\n    // Close on ESC\r\n    if (e.keyCode === 27) {\r\n      hide();\r\n    }\r\n  }\r\n\r\n  function clickout(e: MouseEvent) {\r\n    // Return on right click.\r\n    if (e.button == 2) {\r\n      return;\r\n    }\r\n\r\n    // If a drag event was happening during the mouseup, don't hide\r\n    // on click.\r\n    if (isDragging) {\r\n      return;\r\n    }\r\n\r\n    if (clickoutFiresChange) {\r\n      updateOriginalInput(true);\r\n    } else {\r\n      revert();\r\n    }\r\n    hide();\r\n  }\r\n\r\n  function hide() {\r\n    // Return if hiding is unnecessary\r\n    if (!visible || flat) {\r\n      return;\r\n    }\r\n    visible = false;\r\n\r\n    doc.removeEventListener('keydown', onkeydown);\r\n    doc.removeEventListener('click', clickout);\r\n    window.removeEventListener('resize', resize);\r\n\r\n    replacer?.classList.remove('sp-active');\r\n    container.classList.add('sp-hidden');\r\n\r\n    const event = emit(boundElement, 'hide', { color: get() });\r\n    callbacks.hide(event);\r\n  }\r\n\r\n  function revert() {\r\n    set(colorOnShow, true);\r\n    updateOriginalInput(true);\r\n  }\r\n\r\n  function set(color: ColorInput, ignoreFormatChange: boolean = false) {\r\n    if (tinycolor.equals(color, get())) {\r\n      // Update UI just in case a validation error needs\r\n      // to be cleared.\r\n      updateUI();\r\n      return;\r\n    }\r\n\r\n    var newColor, newHsv;\r\n    if ((!color || color === undefined) && allowEmpty) {\r\n      isEmpty = true;\r\n    } else {\r\n      isEmpty = false;\r\n      newColor = tinycolor(color);\r\n      newHsv = newColor.toHsv();\r\n\r\n      currentHue = (newHsv.h % 360) / 360;\r\n      currentSaturation = newHsv.s;\r\n      currentValue = newHsv.v;\r\n      currentAlpha = newHsv.a;\r\n    }\r\n    updateUI();\r\n\r\n    if (newColor && newColor.isValid() && !ignoreFormatChange) {\r\n      currentPreferredFormat = opts.preferredFormat || newColor.getFormat() as ColorFormat;\r\n    }\r\n  }\r\n\r\n  function get(opts: any = {}): Instance | '' {\r\n    if (allowEmpty && isEmpty) {\r\n      return '';\r\n    }\r\n\r\n    return tinycolor.fromRatio({\r\n      h: currentHue,\r\n      s: currentSaturation,\r\n      v: currentValue,\r\n      a: Math.round(currentAlpha * 1000) / 1000,\r\n      // @ts-ignore\r\n    }, { format: opts.format || currentPreferredFormat });\r\n  }\r\n\r\n  function isValid() {\r\n    return !textInput.classList.contains('sp-validation-error');\r\n  }\r\n\r\n  function move() {\r\n    updateUI();\r\n\r\n    const event = emit(boundElement, 'move', { color: get() });\r\n    callbacks.move(event);\r\n  }\r\n\r\n  function updateUI() {\r\n\r\n    textInput.classList.remove('sp-validation-error');\r\n\r\n    updateHelperLocations();\r\n\r\n    // Update dragger background color (gradients take care of saturation and value).\r\n    const flatColor = tinycolor.fromRatio({ h: currentHue, s: 1, v: 1 });\r\n    dragger.style.backgroundColor = flatColor.toHexString();\r\n\r\n    // Get a format that alpha will be included in (hex and names ignore alpha)\r\n    let format = currentPreferredFormat;\r\n    if (currentAlpha < 1 && !(currentAlpha === 0 && format === 'name')) {\r\n      if (format === 'hex' || format === 'hex3' || format === 'hex6' || format === 'name') {\r\n        format = 'rgb';\r\n      }\r\n    }\r\n\r\n    let realColor = get({ format }),\r\n      displayColor = '';\r\n\r\n    //reset background info for preview element\r\n    if (previewElement) {\r\n      previewElement.classList.remove('sp-clear-display');\r\n      previewElement.style.backgroundColor = 'transparent';\r\n    }\r\n\r\n    if (realColor === '') {\r\n      // Update the replaced elements background with icon indicating no color selection\r\n      previewElement?.classList.add('sp-clear-display');\r\n    } else {\r\n      const realHex = realColor.toHexString();\r\n      const realRgb = realColor.toRgbString();\r\n\r\n      if (previewElement) {\r\n        // Update the replaced elements background color (with actual selected color)\r\n        if (rgbaSupport || realColor.getAlpha() === 1) {\r\n          previewElement.style.backgroundColor = realRgb;\r\n        } else {\r\n          previewElement.style.backgroundColor = 'transparent';\r\n          previewElement.style.filter = realColor.toFilter();\r\n        }\r\n      }\r\n\r\n      if (opts.showAlpha) {\r\n        const rgb = realColor.toRgb();\r\n        rgb.a = 0;\r\n        const realAlpha = tinycolor(rgb).toRgbString();\r\n        const gradient = 'linear-gradient(left, ' + realAlpha + ', ' + realHex + ')';\r\n\r\n        if (IE) {\r\n          alphaSliderInner.style.filter = tinycolor(realAlpha).toFilter(/* { gradientType: 1 }, realHex */);\r\n        } else {\r\n          // alphaSliderInner.css('background', '-webkit-' + gradient);\r\n          // alphaSliderInner.css('background', '-moz-' + gradient);\r\n          // alphaSliderInner.css('background', '-ms-' + gradient);\r\n          // Use current syntax gradient on unprefixed property.\r\n          alphaSliderInner.style.background = `linear-gradient(to right, ${realAlpha}, ${realHex})`;\r\n        }\r\n      }\r\n\r\n      displayColor = realColor.toString(format);\r\n    }\r\n\r\n    // Update the text entry input as it changes happen\r\n    if (opts.showInput) {\r\n      textInput.value = displayColor;\r\n    }\r\n    (boundElement as HTMLInputElement).value = displayColor;\r\n    if (opts.type == 'text' || opts.type == 'component') {\r\n      const color = realColor;\r\n      if (color && colorizeElement) {\r\n        const textColor = (color.isLight() || color.getAlpha() < 0.4) ? 'black' : 'white';\r\n        colorizeElement.style.backgroundColor = color.toRgbString();\r\n        colorizeElement.style.color = textColor;\r\n      } else {\r\n        colorizeElement.style.backgroundColor = colorizeElementInitialBackground;\r\n        colorizeElement.style.color = colorizeElementInitialColor;\r\n      }\r\n    }\r\n\r\n    if (opts.showPalette) {\r\n      drawPalette();\r\n    }\r\n\r\n    drawInitial();\r\n  }\r\n\r\n  function updateHelperLocations() {\r\n    if (allowEmpty && isEmpty) {\r\n      //if selected color is empty, hide the helpers\r\n      alphaSlideHelper.style.display = 'none';\r\n      slideHelper.style.display = 'none';\r\n      dragHelper.style.display = 'none';\r\n    } else {\r\n      //make sure helpers are visible\r\n      alphaSlideHelper.style.display = 'block';\r\n      slideHelper.style.display = 'block';\r\n      dragHelper.style.display = 'block';\r\n\r\n      // Where to show the little circle in that displays your current selected color\r\n      let dragX = currentSaturation * dragWidth;\r\n      let dragY = dragHeight - (currentValue * dragHeight);\r\n      dragX = Math.max(\r\n        -dragHelperHeight,\r\n        Math.min(dragWidth - dragHelperHeight, dragX - dragHelperHeight),\r\n      );\r\n      dragY = Math.max(\r\n        -dragHelperHeight,\r\n        Math.min(dragHeight - dragHelperHeight, dragY - dragHelperHeight),\r\n      );\r\n      dragHelper.style.top = dragY + 'px';\r\n      dragHelper.style.left = dragX + 'px';\r\n\r\n      const alphaX = currentAlpha * alphaWidth;\r\n      alphaSlideHelper.style.left = (alphaX - (alphaSlideHelperWidth / 2)) + 'px';\r\n\r\n      // Where to show the bar that displays your current selected hue\r\n      const slideY = (currentHue) * slideHeight;\r\n      slideHelper.style.top = (slideY - slideHelperHeight) + 'px';\r\n    }\r\n  }\r\n\r\n  function updateOriginalInput(fireCallback = false) {\r\n    let color = get(),\r\n      displayColor = '',\r\n      hasChanged = !tinycolor.equals(color, colorOnShow);\r\n\r\n    if (color) {\r\n      displayColor = color.toString(currentPreferredFormat);\r\n      // Update the selection palette with the current color\r\n      addColorToSelectionPalette(color);\r\n    }\r\n\r\n    if (fireCallback && hasChanged) {\r\n      // we trigger the change event or input, but the input change event is also binded\r\n      // to some spectrum processing, that we do no need\r\n      abortNextInputChange = true;\r\n      const event = emit(boundElement, 'change', { color });\r\n      callbacks.change(event);\r\n    }\r\n  }\r\n\r\n  function reflow() {\r\n    if (!visible) {\r\n      return; // Calculations would be useless and wouldn't be reliable anyways\r\n    }\r\n\r\n    dragWidth = dragger.getBoundingClientRect().width;\r\n    dragHeight = dragger.getBoundingClientRect().height;\r\n\r\n    dragHelperHeight = dragHelper.getBoundingClientRect().height;\r\n    slideWidth = slider.getBoundingClientRect().width;\r\n    slideHeight = slider.getBoundingClientRect().height;\r\n    slideHelperHeight = slideHelper.getBoundingClientRect().height;\r\n    alphaWidth = alphaSlider.getBoundingClientRect().width;\r\n    alphaSlideHelperWidth = alphaSlideHelper.getBoundingClientRect().width;\r\n\r\n    if (!flat) {\r\n      container.style.position = 'absolute';\r\n\r\n      if (opts.offset) {\r\n        setElementOffset(container, opts.offset);\r\n      } else {\r\n        setElementOffset(container, getOffset(container, offsetElement as HTMLElement));\r\n      }\r\n    }\r\n\r\n    updateHelperLocations();\r\n\r\n    if (opts.showPalette) {\r\n      drawPalette();\r\n    }\r\n\r\n    emit(boundElement, 'reflow');\r\n  }\r\n\r\n  function destroy() {\r\n    boundElement.style.display = 'inline-block';\r\n    boundElement.classList.remove('spectrum', 'with-add-on', 'sp-colorize');\r\n    offsetElement.removeEventListener('click', offsetElementStart);\r\n    offsetElement.removeEventListener('touchstart', offsetElementStart);\r\n    container.remove();\r\n    replacer?.remove();\r\n    if (colorizeElement) {\r\n      colorizeElement.style.backgroundColor = colorizeElementInitialBackground;\r\n      colorizeElement.style.color = colorizeElementInitialColor;\r\n    }\r\n    const originalInputContainer = boundElement.closest('.sp-original-input-container');\r\n    if (originalInputContainer) {\r\n      originalInputContainer.after(boundElement);\r\n      originalInputContainer.remove();\r\n    }\r\n    spectrums[spect.id] = null;\r\n  }\r\n\r\n  function option(optionName: string | undefined = undefined, optionValue: any = undefined) {\r\n    if (optionName === undefined) {\r\n      return Object.assign({}, opts);\r\n    }\r\n    if (optionValue === undefined) {\r\n      return opts[optionName];\r\n    }\r\n\r\n    opts[optionName] = optionValue;\r\n\r\n    if (optionName === 'preferredFormat') {\r\n      currentPreferredFormat = opts.preferredFormat;\r\n    }\r\n    applyOptions();\r\n  }\r\n\r\n  function enable() {\r\n    disabled = false;\r\n    (boundElement as HTMLInputElement).disabled = false;\r\n    offsetElement.classList.remove('sp-disabled');\r\n  }\r\n\r\n  function disable() {\r\n    hide();\r\n    disabled = true;\r\n    (boundElement as HTMLInputElement).disabled = true;\r\n    offsetElement.classList.add('sp-disabled');\r\n  }\r\n\r\n  function setOffset(coord: OffsetCSSOptions) {\r\n    opts.offset = coord;\r\n    reflow();\r\n  }\r\n\r\n  initialize();\r\n\r\n  let spect = {\r\n    id: 0,\r\n    show: show,\r\n    hide: hide,\r\n    toggle: toggle,\r\n    reflow: reflow,\r\n    option: option,\r\n    enable: enable,\r\n    disable: disable,\r\n    offset: setOffset,\r\n    set: function (c: ColorInput) {\r\n      set(c);\r\n      updateOriginalInput();\r\n    },\r\n    get: get,\r\n    destroy: destroy,\r\n    container: container,\r\n  };\r\n\r\n  spect.id = spectrums.push(spect) - 1;\r\n\r\n  return spect;\r\n}\r\n\r\n/**\r\n * checkOffset - get the offset below/above and left/right element depending on screen position\r\n * Thanks https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.datepicker.js\r\n */\r\nfunction getOffset(picker: HTMLElement, input: HTMLElement) {\r\n  const extraY = 0;\r\n  const dpWidth = picker.offsetWidth;\r\n  const dpHeight = picker.offsetHeight;\r\n  const inputHeight = input.offsetHeight;\r\n  const doc = picker.ownerDocument;\r\n  const docElem = doc.documentElement;\r\n  const viewWidth = docElem.clientWidth + window.pageXOffset;\r\n  const viewHeight = docElem.clientHeight + window.pageYOffset;\r\n  const offset = getElementOffset(input);\r\n  let offsetLeft = offset.left;\r\n  let offsetTop = offset.top;\r\n\r\n  offsetTop += inputHeight;\r\n\r\n  offsetLeft -=\r\n    Math.min(offsetLeft, (offsetLeft + dpWidth > viewWidth && viewWidth > dpWidth) ?\r\n      Math.abs(offsetLeft + dpWidth - viewWidth) : 0);\r\n\r\n  offsetTop -=\r\n    Math.min(offsetTop, ((offsetTop + dpHeight > viewHeight && viewHeight > dpHeight) ?\r\n      Math.abs(dpHeight + inputHeight - extraY) : extraY));\r\n\r\n  return {\r\n    top: offsetTop,\r\n    // bottom: offset.bottom,\r\n    left: offsetLeft,\r\n    // right: offset.right,\r\n    // width: offset.width,\r\n    // height: offset.height\r\n  };\r\n}\r\n\r\n/**\r\n * noop - do nothing\r\n */\r\nfunction noop() {\r\n\r\n}\r\n\r\n/**\r\n * Create a function bound to a given object\r\n * Thanks to underscore.js\r\n */\r\nfunction bind(func: Function, obj: object) {\r\n  const slice = Array.prototype.slice;\r\n  const args = slice.call(arguments, 2);\r\n  return function () {\r\n    return func.apply(obj, args.concat(slice.call(arguments)));\r\n  };\r\n}\r\n\r\n/**\r\n * Lightweight drag helper.  Handles containment within the element, so that\r\n * when dragging, the x is within [0,element.width] and y is within [0,element.height]\r\n */\r\nfunction draggable(\r\n  element: HTMLElement,\r\n  onmove: (x: number, y: number, e: DragEvent) => void,\r\n  onstart: (x: number, y: number, e: DragEvent) => void,\r\n  onstop: (x: number, y: number, e: DragEvent) => void,\r\n) {\r\n  onmove = onmove || noop;\r\n  onstart = onstart || noop;\r\n  onstop = onstop || noop;\r\n  const doc = document;\r\n  let dragging = false;\r\n  let offset: OffsetCSSOptions = {};\r\n  let maxHeight = 0;\r\n  let maxWidth = 0;\r\n  const hasTouch = ('ontouchstart' in window);\r\n\r\n  const duringDragEvents: { [P in keyof ElementEventMap]?: Function; } = {};\r\n  duringDragEvents['selectstart'] = prevent;\r\n  duringDragEvents['dragstart'] = prevent;\r\n  duringDragEvents['touchmove'] = move;\r\n  duringDragEvents['mousemove'] = move;\r\n  duringDragEvents['touchend'] = stop;\r\n  duringDragEvents['mouseup'] = stop;\r\n\r\n  function prevent(e: Event) {\r\n    if (e.stopPropagation) {\r\n      e.stopPropagation();\r\n    }\r\n    if (e.preventDefault) {\r\n      e.preventDefault();\r\n    }\r\n    e.returnValue = false;\r\n  }\r\n\r\n  function move(e: TouchEvent | MouseEvent) {\r\n    if (dragging) {\r\n      // @ts-ignore\r\n      // Mouseup happened outside of window\r\n      if (IE && doc.documentMode < 9 && !e.button) {\r\n        return stop();\r\n      }\r\n\r\n      const t0 = 'touches' in e && e.touches[0];\r\n      const pageX = t0 && t0.pageX || (e as MouseEvent).pageX;\r\n      const pageY = t0 && t0.pageY || (e as MouseEvent).pageY;\r\n\r\n      const dragX = Math.max(0, Math.min(pageX - offset.left, maxWidth));\r\n      const dragY = Math.max(0, Math.min(pageY - offset.top, maxHeight));\r\n\r\n      if (hasTouch) {\r\n        // Stop scrolling in iOS\r\n        prevent(e);\r\n      }\r\n\r\n      onmove.apply(element, [dragX, dragY, e]);\r\n    }\r\n  }\r\n\r\n  function start(e: TouchEvent | MouseEvent) {\r\n    const rightclick = (e.which) ? (e.which == 3) : ((e as MouseEvent).button === 2);\r\n\r\n    if (!rightclick && !dragging) {\r\n      if (onstart.apply(element, arguments) !== false) {\r\n        dragging = true;\r\n        maxHeight = element.getBoundingClientRect().height;\r\n        maxWidth = element.getBoundingClientRect().width;\r\n        offset = getElementOffset(element);\r\n\r\n        for (const eventName in duringDragEvents) {\r\n          doc.addEventListener(eventName, duringDragEvents[eventName]);\r\n        }\r\n\r\n        doc.body.classList.add('sp-dragging');\r\n\r\n        move(e);\r\n\r\n        prevent(e);\r\n      }\r\n    }\r\n  }\r\n\r\n  function stop() {\r\n    if (dragging) {\r\n      for (const eventName in duringDragEvents) {\r\n        doc.removeEventListener(eventName, duringDragEvents[eventName]);\r\n      }\r\n      doc.body.classList.remove('sp-dragging');\r\n\r\n      // Wait a tick before notifying observers to allow the click event\r\n      // to fire in Chrome.\r\n      setTimeout(function () {\r\n        onstop.apply(element, arguments);\r\n      }, 0);\r\n    }\r\n    dragging = false;\r\n  }\r\n\r\n  element.addEventListener('touchstart', start);\r\n  element.addEventListener('mousedown', start);\r\n}\r\n\r\nexport default class Spectrum {\r\n  private spectrum: any;\r\n  public ele: HTMLInputElement;\r\n  public options: Partial<Options>;\r\n  public eventListeners: { [event: string]: EventListener[] } = {};\r\n\r\n  static defaultOptions = defaultOpts;\r\n  static draggable = draggable;\r\n  static localization: { [locale: string]: SpLang } = {};\r\n  static palette: string[][] = [];\r\n\r\n  static create(selector: string | HTMLElement, options: Partial<Options> = {}): Spectrum {\r\n    const ele = this.wrap(selector);\r\n\r\n    if (!ele) {\r\n      let msg = 'Unable to find element';\r\n\r\n      if (typeof selector === 'string') {\r\n        msg += ' - Selector: ' + selector;\r\n      }\r\n      throw Error(msg);\r\n    }\r\n\r\n    return new this(ele, options);\r\n  }\r\n\r\n  static createIfExists(selector: string | HTMLElement, options: Partial<Options> = {}): Spectrum|null {\r\n    const ele = this.wrap(selector);\r\n\r\n    if (!ele) {\r\n      return null;\r\n    }\r\n\r\n    return new this(ele, options);\r\n  }\r\n\r\n  static getInstance(selector: string | HTMLElement, options: Partial<Options> = {}): Spectrum {\r\n    const ele = this.wrap(selector);\r\n\r\n    // @ts-ignore\r\n    return ele.__spectrum = ele.__spectrum || this.createIfExists(ele, options);\r\n  }\r\n\r\n  static hasInstance(selector: string | HTMLElement) {\r\n    const ele = this.wrap(selector);\r\n\r\n    // @ts-ignore\r\n    return ele.__spectrum !== undefined;\r\n  }\r\n\r\n  static createMultiple(\r\n    selector: string | NodeListOf<HTMLElement>,\r\n    options: Partial<Options> = {}\r\n  ) {\r\n    const instances: Spectrum[] = [];\r\n\r\n    this.wrapList(selector).forEach((ele) => {\r\n      instances.push(this.create(ele, options));\r\n    });\r\n\r\n    return instances;\r\n  }\r\n\r\n  static getInstanceMultiple(\r\n    selector: string | JQuery | NodeListOf<HTMLElement>,\r\n    options: Partial<Options> = {},\r\n  ) {\r\n    const instances: Spectrum[] = [];\r\n\r\n    this.wrapList(selector).forEach((ele) => {\r\n      instances.push(this.getInstance(ele, options));\r\n    });\r\n\r\n    return instances;\r\n  }\r\n\r\n  private static wrap(selector: string | JQuery | HTMLElement) {\r\n    if (typeof selector === 'string') {\r\n      return document.querySelector<HTMLElement>(selector);\r\n    } else if ((selector as JQuery).jquery) {\r\n      return selector[0];\r\n    } else {\r\n      return selector;\r\n    }\r\n  }\r\n\r\n  private static wrapList(selector: string | JQuery | NodeListOf<HTMLElement>): Array<HTMLElement> {\r\n    if (typeof selector === 'string') {\r\n      return Array.from(document.querySelectorAll<HTMLElement>(selector));\r\n    } else if ((selector as JQuery).jquery) {\r\n      return (selector as JQuery).toArray();\r\n    } else {\r\n      return Array.from(selector);\r\n    }\r\n  }\r\n\r\n  static locale(locale: string, localization: SpLang) {\r\n    this.localization[locale] = localization;\r\n    return this;\r\n  }\r\n\r\n  constructor(ele: HTMLInputElement, options: Partial<Options> = {}) {\r\n    this.spectrum = spectrum(ele, options);\r\n    this.ele = ele;\r\n    this.options = options;\r\n  }\r\n\r\n  get id(): number {\r\n    return this.spectrum.id;\r\n  }\r\n\r\n  get container(): HTMLElement {\r\n    // @ts-ignore\r\n    if (!this.ele.__spectrum) {\r\n      return this.ele;\r\n    }\r\n\r\n    return this.spectrum.container;\r\n  }\r\n\r\n  show() {\r\n    this.spectrum.show();\r\n    return this;\r\n  }\r\n\r\n  hide() {\r\n    this.spectrum.hide();\r\n    return this;\r\n  }\r\n\r\n  toggle() {\r\n    this.spectrum.toggle();\r\n    return this;\r\n  }\r\n\r\n  reflow() {\r\n    this.spectrum.reflow();\r\n    return this;\r\n  }\r\n\r\n  option(optionName: string | undefined = undefined, optionValue: any = undefined): any {\r\n    return this.spectrum.option(optionName, optionValue);\r\n  }\r\n\r\n  enable() {\r\n    this.spectrum.enable();\r\n    return this;\r\n  }\r\n\r\n  disable() {\r\n    this.spectrum.disable();\r\n    return this;\r\n  }\r\n\r\n  offset(coord: OffsetCSSOptions) {\r\n    this.spectrum.offset(coord);\r\n    return this;\r\n  }\r\n\r\n  set(color: ColorInput, ignoreFormatChange: boolean = false) {\r\n    this.spectrum.set(color, ignoreFormatChange);\r\n    return this;\r\n  }\r\n\r\n  get(): ColorInput {\r\n    return this.spectrum.get();\r\n  }\r\n\r\n  destroy() {\r\n    this.destroyInnerObject();\r\n    // @ts-ignore\r\n    delete this.ele.__spectrum;\r\n    return this;\r\n  }\r\n\r\n  rebuild(options?: Partial<Options>) {\r\n    this.destroyInnerObject();\r\n    if (options) {\r\n      this.options = Object.assign({}, this.options, options);\r\n    }\r\n    this.spectrum = spectrum(this.ele, this.options);\r\n    return this;\r\n  }\r\n\r\n  private destroyInnerObject() {\r\n    this.spectrum.destroy();\r\n    this.off();\r\n  }\r\n\r\n  listeners(eventName: string) {\r\n    return this.eventListeners[eventName] || [];\r\n  }\r\n\r\n  on(\r\n    eventName: string,\r\n    listener: SpListener,\r\n    options: AddEventListenerOptions|undefined = undefined\r\n  ): Function {\r\n    this.ele.addEventListener(eventName, listener, options);\r\n\r\n    this.eventListeners[eventName] = this.eventListeners[eventName] || [];\r\n\r\n    this.eventListeners[eventName].push(listener);\r\n\r\n    return () => {\r\n      this.off(eventName, listener);\r\n    };\r\n  }\r\n\r\n  once(\r\n    eventName: string,\r\n    listener: SpListener,\r\n    options: AddEventListenerOptions|undefined = undefined\r\n  ): Function {\r\n    const cancel = this.on(\r\n      eventName,\r\n      (e) => {\r\n        listener(e);\r\n\r\n        cancel();\r\n      },\r\n      options\r\n    );\r\n\r\n    return cancel;\r\n  }\r\n\r\n  off(eventName: string = undefined, listener: EventListener|SpListener|undefined = undefined) {\r\n    if (eventName && !this.eventListeners[eventName]) {\r\n      return;\r\n    }\r\n\r\n    if (!eventName) {\r\n      this.eventListeners = {};\r\n      return;\r\n    }\r\n\r\n    if (listener) {\r\n      this.eventListeners[eventName] = this.eventListeners[eventName]\r\n        .filter((l) => l === listener);\r\n\r\n      this.ele.removeEventListener(eventName, listener);\r\n    } else {\r\n      for (const listener of this.eventListeners[eventName]) {\r\n        this.ele.removeEventListener(eventName, listener);\r\n      }\r\n\r\n      this.eventListeners[eventName] = [];\r\n    }\r\n  }\r\n}\r\n\r\n// @ts-ignore\r\nconst $ = window.$;\r\n\r\nif ($) {\r\n  // @ts-ignore\r\n  $.fn.spectrum = function (action: string | undefined | Partial<Options> = undefined, ...args) {\r\n    if (typeof action === \"string\") {\r\n      let returnValue = this;\r\n      this.each(function () {\r\n        const spect = this.__spectrum;\r\n\r\n        if (spect) {\r\n          const method = spect[action];\r\n\r\n          if (!method) {\r\n            throw new Error(\"Spectrum: no such method: '\" + action + \"'\");\r\n          }\r\n\r\n          if (action === \"get\") {\r\n            returnValue = spect.get();\r\n          } else if (action === \"container\") {\r\n            returnValue = $(spect.container);\r\n          } else if (action === \"option\") {\r\n            returnValue = spect.option.apply(spect, args);\r\n          } else if (action === \"destroy\") {\r\n            spect.destroy();\r\n          } else {\r\n            spect[action](...args);\r\n          }\r\n        }\r\n      });\r\n\r\n      return returnValue;\r\n    }\r\n\r\n    // Initializing a new instance of spectrum\r\n    return this.each(function () {\r\n      const options: Options = $.extend({}, $(this).data(), action);\r\n      // Infer default type from input params and deprecated options\r\n      if (!$(this).is('input')) {\r\n        options.type = 'color';\r\n      } else if (options.type == \"flat\") {\r\n        options.type = 'flat';\r\n      } else if ($(this).attr('type') == 'color') {\r\n        options.type = 'color';\r\n      } else {\r\n        options.type = options.type || 'component';\r\n      }\r\n\r\n      if (Spectrum.hasInstance(this)) {\r\n        const sp = Spectrum.getInstance(this);\r\n\r\n        sp.options = options;\r\n        sp.rebuild();\r\n      } else {\r\n        Spectrum.getInstance(this, options);\r\n      }\r\n    });\r\n  };\r\n\r\n  $.fn.spectrum.load = true;\r\n  $.fn.spectrum.loadOpts = {};\r\n  $.fn.spectrum.draggable = draggable;\r\n  $.fn.spectrum.defaults = defaultOpts;\r\n  $.fn.spectrum.localization = Spectrum.localization;\r\n  $.fn.spectrum.palette = [];\r\n\r\n  $.fn.spectrum.processNativeColorInputs = function () {\r\n    const colorInputs = $(\"input[type=color]\");\r\n    if (colorInputs.length) {\r\n      colorInputs.spectrum({\r\n        preferredFormat: \"hex6\"\r\n      });\r\n    }\r\n  };\r\n}\r\n"],"names":["insertAfter","existingNode","newNode","parentNode","insertBefore","nextSibling","wrap","ele","wrapper","replaceWith","appendChild","outerWidthWithMargin","style","window","getComputedStyle","getBoundingClientRect","width","parseFloat","marginLeft","marginRight","html","doc","document","div","createElement","innerHTML","children","camelize","str","replace","word","index","toLowerCase","toUpperCase","throttle","func","wait","debounce","undefined","timeout","context","args","arguments","throttler","apply","clearTimeout","setTimeout","addClass","className","classes","split","filter","c","length","classList","add","removeClass","remove","toggleClass","state","toggle","emit","eventName","detail","event","CustomEvent","cancelable","bubbles","dispatchEvent","eventDelegate","selector","listener","payload","addEventListener","e","target","closest","data","Object","assign","setElementOffset","elem","options","curPosition","curTop","curLeft","calculatePosition","position","curElem","props","curOffset","getElementOffset","curCSSTop","top","curCSSLeft","left","indexOf","getElementPosition","using","call","k","el","box","docElem","documentElement","pageYOffset","clientTop","pageXOffset","clientLeft","marginTop","parseInt","tinycolor","defaultOpts","beforeShow","noop","move","change","show","hide","color","type","showInput","allowEmpty","showButtons","clickoutFiresChange","showInitial","showPalette","showPaletteOnly","hideAfterPaletteSelect","togglePaletteOnly","showSelectionPalette","localStorageKey","appendTo","maxSelectionSize","locale","cancelText","chooseText","togglePaletteMoreText","togglePaletteLessText","clearText","noColorSelectedText","preferredFormat","containerClassName","replacerClassName","showAlpha","theme","palette","selectionPalette","disabled","offset","spectrums","IE","exec","navigator","userAgent","rgbaSupport","contains","substr","cssText","backgroundColor","replaceInput","join","markup","gradientFix","i","paletteTemplate","p","opts","current","tiny","toHsl","l","equals","formattedString","toString","swatchStyle","toRgbString","toFilter","push","hideAll","instanceOptions","callbackContext","language","parts","map","Spectrum","localization","callbacks","bind","spectrum","element","flat","resize","reflow","visible","isDragging","dragWidth","dragHeight","dragHelperHeight","slideHeight","slideWidth","alphaWidth","alphaSlideHelperWidth","slideHelperHeight","currentHue","currentSaturation","currentValue","currentAlpha","paletteArray","paletteLookup","slice","draggingClass","abortNextInputChange","shiftMovementDirection","ownerDocument","container","body","boundElement","pickerContainer","querySelector","dragger","dragHelper","slider","slideHelper","alphaSliderInner","alphaSlider","alphaSlideHelper","textInput","paletteContainer","initialColorContainer","cancelButton","clearButton","chooseButton","toggleButton","isInput","nodeName","isInputTypeColor","getAttribute","shouldReplace","replacer","offsetElement","previewElement","initialColor","value","colorOnShow","currentPreferredFormat","isEmpty","originalInputContainer","colorizeElement","colorizeElementInitialColor","colorizeElementInitialBackground","thisId","labels","querySelectorAll","forEach","label","preventDefault","applyOptions","textContent","Array","isArray","j","rgb","keys","offsetElementStart","stopPropagation","matches","initialize","inputStyle","cssProp","display","addOn","offsetHeight","borderRadius","border","before","after","parentElement","append","updateSelectionPaletteFromStorage","disable","input","setFromTextInput","keyCode","revert","setAttribute","updateOriginalInput","isValid","draggable","dragX","dragY","shiftKey","Math","round","dragStart","dragStop","oldDragX","oldDragY","furtherFromX","abs","setSaturation","setValue","set","updateUI","getFormat","addColorToSelectionPalette","paletteElementClick","ignore","dataset","paletteEvents","paletteEvent","localStorage","oldPalette","includes","shift","getUniqueSelectionPalette","unique","reverse","drawPalette","currentColor","get","drawInitial","initial","defaultPrevented","onkeydown","clickout","button","removeEventListener","ignoreFormatChange","newColor","newHsv","toHsv","h","s","v","a","fromRatio","format","updateHelperLocations","flatColor","toHexString","realColor","displayColor","realHex","realRgb","getAlpha","toRgb","realAlpha","gradient","background","textColor","isLight","max","min","alphaX","slideY","fireCallback","hasChanged","height","getOffset","destroy","spect","id","option","optionName","optionValue","enable","setOffset","coord","picker","extraY","dpWidth","offsetWidth","dpHeight","inputHeight","viewWidth","clientWidth","viewHeight","clientHeight","offsetLeft","offsetTop","obj","prototype","concat","onmove","onstart","onstop","dragging","maxHeight","maxWidth","hasTouch","duringDragEvents","prevent","stop","returnValue","documentMode","t0","touches","pageX","pageY","start","rightclick","which","create","msg","Error","createIfExists","getInstance","__spectrum","hasInstance","createMultiple","instances","wrapList","getInstanceMultiple","jquery","from","toArray","constructor","destroyInnerObject","rebuild","off","listeners","eventListeners","on","once","cancel","$","fn","action","each","method","extend","is","attr","sp","load","loadOpts","defaults","processNativeColorInputs","colorInputs"],"sourceRoot":""}