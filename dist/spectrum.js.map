{"version":3,"file":"spectrum.js","mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;;;;;;;;;;ACVA;;;;;;AAOM,SAAUA,WAAW,CAAoBC,YAAe,EAAEC,OAAgB;;EAC9E,kBAAY,CAACC,UAAU,0CAAEC,YAAY,CAACF,OAAO,EAAED,YAAY,CAACI,WAAW,CAAC;EACxE,OAAOJ,YAAY;AACrB;AAEM,SAAUG,YAAY,CAAoBH,YAAe,EAAEC,OAAgB;;EAC/E,kBAAY,CAACC,UAAU,0CAAEC,YAAY,CAACF,OAAO,EAAED,YAAY,CAAC;EAC5D,OAAOA,YAAY;AACrB;AAEM,SAAUK,IAAI,CAAoBC,GAAM,EAAEC,OAAgB;EAC9DD,GAAG,CAACE,WAAW,CAACD,OAAO,CAAC;EACxBA,OAAO,CAACE,WAAW,CAACH,GAAG,CAAC;EACxB,OAAOA,GAAG;AACZ;AAEM,SAAUI,oBAAoB,CAACJ,GAAgB;EACnD,MAAMK,KAAK,GAAGC,MAAM,CAACC,gBAAgB,CAACP,GAAG,CAAC;EAE1C,OACEA,GAAG,CAACQ,qBAAqB,EAAE,CAACC,KAAK,GACjCC,UAAU,CAACL,KAAK,CAACM,UAAU,CAAC,GAC5BD,UAAU,CAACL,KAAK,CAACO,WAAW,CAAC;AAEjC;;;;;;;;;;;;;;;;;;;;;;AC/BA;;;;;;AAOM,SAAUC,IAAI,CAACA,IAAY,EAAgB;EAAA,IAAdC,GAAG,uEAAGC,QAAQ;EAC/C,MAAMC,GAAG,GAAGF,GAAG,CAACG,aAAa,CAAC,KAAK,CAAC;EACpCD,GAAG,CAACE,SAAS,GAAGL,IAAI;EACpB,OAAOG,GAAG,CAACG,QAAQ,CAAC,CAAC,CAAC;AACxB;AAEM,SAAUC,QAAQ,CAACC,GAAW;EAClC,OAAOA,GAAG,CAACC,OAAO,CAAC,qBAAqB,EAAE,UAAUC,IAAI,EAAEC,KAAK;IAC7D,OAAOA,KAAK,KAAK,CAAC,GAAGD,IAAI,CAACE,WAAW,EAAE,GAAGF,IAAI,CAACG,WAAW,EAAE;EAC9D,CAAC,CAAC,CAACJ,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC;AACxB;AAEM,SAAUK,QAAQ,CAACC,IAAc,EAAEC,IAAY,EAA4C;EAAA,IAA1CC,+EAAiCC,SAAS;EAC/F,IAAIC,OAAY;EAChB,OAAO;IACL;IACA,MAAMC,OAAO,GAAG,IAAI;MAAEC,IAAI,GAAGC,SAAS;IACtC,MAAMC,SAAS,GAAG;MAChBJ,OAAO,GAAG,IAAI;MACdJ,IAAI,CAACS,KAAK,CAACJ,OAAO,EAAEC,IAAI,CAAC;IAC3B,CAAC;IACD,IAAIJ,QAAQ,EAAEQ,YAAY,CAACN,OAAO,CAAC;IACnC,IAAIF,QAAQ,IAAI,CAACE,OAAO,EAAE;MACxBA,OAAO,GAAGO,UAAU,CAACH,SAAS,EAAEP,IAAI,CAAC;;EAEzC,CAAC;AACH;AAEM,SAAUW,QAAQ,CAACxC,GAAgB,EAAEyC,SAAiB;EAC1D,MAAMC,OAAO,GAAGD,SAAS,CAACE,KAAK,CAAC,GAAG,CAAC,CAACC,MAAM,CAAEC,CAAC,IAAKA,CAAC,KAAK,EAAE,CAAC;EAE5D,IAAIJ,SAAS,KAAK,EAAE,IAAIC,OAAO,CAACI,MAAM,EAAE;IACtC9C,GAAG,CAAC+C,SAAS,CAACC,GAAG,CAAC,GAAGN,OAAO,CAAC;;EAE/B,OAAO1C,GAAG;AACZ;AAEM,SAAUiD,WAAW,CAACjD,GAAgB,EAAEyC,SAAiB;EAC7D,MAAMC,OAAO,GAAGD,SAAS,CAACE,KAAK,CAAC,GAAG,CAAC,CAACC,MAAM,CAAEC,CAAC,IAAKA,CAAC,KAAK,EAAE,CAAC;EAC5D,IAAIJ,SAAS,KAAK,EAAE,IAAIC,OAAO,CAACI,MAAM,EAAE;IACtC9C,GAAG,CAAC+C,SAAS,CAACG,MAAM,CAAC,GAAGR,OAAO,CAAC;;EAElC,OAAO1C,GAAG;AACZ;AAEM,SAAUmD,WAAW,CACzBnD,GAAgB,EAChByC,SAAiB,EACqB;EAAA,IAAtCW,4EAA6BrB,SAAS;EAEtC,IAAIqB,KAAK,IAAIrB,SAAS,EAAE;IACtB/B,GAAG,CAAC+C,SAAS,CAACM,MAAM,CAACZ,SAAS,EAAEW,KAAK,CAAC;GACvC,MAAM,IAAIA,KAAK,KAAK,IAAI,EAAE;IACzBZ,QAAQ,CAACxC,GAAG,EAAEyC,SAAS,CAAC;GACzB,MAAM;IACLQ,WAAW,CAACjD,GAAG,EAAEyC,SAAS,CAAC;;EAE7B,OAAOzC,GAAG;AACZ;AAEM,SAAUsD,IAAI,CAACtD,GAAgB,EAAEuD,SAAiB,EAAkB;EAAA,IAAhBC,6EAAc,EAAE;EACxE,MAAMC,KAAK,GAAG,IAAIC,WAAW,CAC3BH,SAAS,EACT;IACEI,UAAU,EAAE,IAAI;IAChBC,OAAO,EAAE,IAAI;IACbJ;GACD,CACF;EAEDxD,GAAG,CAAC6D,aAAa,CAACJ,KAAK,CAAC;EAExB,OAAOA,KAAK;AACd;AAEM,SAAUK,aAAa,CAC3B9D,GAAgB,EAChBuD,SAAiB,EACjBQ,QAAgB,EAChBC,QAAkB,EACmB;EAAA,IAArCC,8EAAmC,EAAE;EAErCjE,GAAG,CAACkE,gBAAgB,CAACX,SAAS,EAAGY,CAAC,IAAI;IACpC,IAAKA,CAAC,CAACC,MAAkB,CAACC,OAAO,CAACN,QAAQ,CAAC,EAAE;MAC3C;MACAI,CAAC,CAACG,IAAI,GAAGC,MAAM,CAACC,MAAM,CAAC,EAAE,EAAEL,CAAC,CAACG,IAAI,IAAI,EAAE,EAAEL,OAAO,CAAC;MAEjDD,QAAQ,CAACG,CAAC,CAAC;;EAEf,CAAC,EAAEF,OAAO,CAAC;AACb;AAIM,SAAUQ,gBAAgB,CAC9BC,IAAiB,EACjBC,OAAyB;EAEzB,IAAIC,WAAW;EACf,IAAIC,MAAM;EACV,IAAIC,OAAO;EACX,IAAIC,iBAAiB;EACrB,IAAIC,QAAQ,GAAGN,IAAI,CAACrE,KAAK,CAAC2E,QAAQ;EAClC,IAAIC,OAAO,GAAGP,IAAI;EAClB,IAAIQ,KAAK,GAAqB,EAAE;EAEhC;EACA,IAAIF,QAAQ,KAAK,QAAQ,EAAE;IACzBN,IAAI,CAACrE,KAAK,CAAC2E,QAAQ,GAAG,UAAU;;EAGlC,IAAIG,SAAS,GAAGC,gBAAgB,CAACH,OAAO,CAAC;EACzC,IAAII,SAAS,GAAGX,IAAI,CAACrE,KAAK,CAACiF,GAAG;EAC9B,IAAIC,UAAU,GAAGb,IAAI,CAACrE,KAAK,CAACmF,IAAI;EAChCT,iBAAiB,GAAG,CAACC,QAAQ,KAAK,UAAU,IAAIA,QAAQ,KAAK,OAAO,KAClE,CAACK,SAAS,GAAGE,UAAU,EAAEE,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;EAE/C;EACA;EACA,IAAIV,iBAAiB,EAAE;IACrBH,WAAW,GAAGc,kBAAkB,CAACT,OAAO,CAAC;IACzCJ,MAAM,GAAGD,WAAW,CAACU,GAAG;IACxBR,OAAO,GAAGF,WAAW,CAACY,IAAI;GAE3B,MAAM;IACLX,MAAM,GAAGnE,UAAU,CAAC2E,SAAS,CAAC,IAAI,CAAC;IACnCP,OAAO,GAAGpE,UAAU,CAAC6E,UAAU,CAAC,IAAI,CAAC;;EAGvC;EACA;EACA;EAEA,IAAIZ,OAAO,CAACW,GAAG,IAAI,IAAI,EAAE;IACvBJ,KAAK,CAACI,GAAG,GAAIX,OAAO,CAACW,GAAG,GAAGH,SAAS,CAACG,GAAG,GAAIT,MAAM;;EAEpD,IAAIF,OAAO,CAACa,IAAI,IAAI,IAAI,EAAE;IACxBN,KAAK,CAACM,IAAI,GAAIb,OAAO,CAACa,IAAI,GAAGL,SAAS,CAACK,IAAI,GAAIV,OAAO;;EAGxD,IAAI,OAAO,IAAIH,OAAO,EAAE;IACtBA,OAAO,CAACgB,KAAK,CAACC,IAAI,CAAClB,IAAI,EAAEQ,KAAK,CAAC;GAChC,MAAM;IACL,KAAK,MAAMW,CAAC,IAAIX,KAAK,EAAE;MACrBD,OAAO,CAAC5E,KAAK,CAACwF,CAAC,CAAC,GAAGX,KAAK,CAACW,CAAC,CAAC,GAAG,IAAI;;;AAGxC;AAEM,SAAUT,gBAAgB,CAACU,EAAe;EAC9C,MAAMC,GAAG,GAAGD,EAAE,CAACtF,qBAAqB,EAAE;EACtC,MAAMwF,OAAO,GAAGjF,QAAQ,CAACkF,eAAe;EACxC,OAAO;IACLX,GAAG,EAAES,GAAG,CAACT,GAAG,GAAGhF,MAAM,CAAC4F,WAAW,GAAGF,OAAO,CAACG,SAAS;IACrDX,IAAI,EAAEO,GAAG,CAACP,IAAI,GAAGlF,MAAM,CAAC8F,WAAW,GAAGJ,OAAO,CAACK;GAC/C;AACH;AAEM,SAAUX,kBAAkB,CAACI,EAAe;EAChD,MAAM;IAAER,GAAG;IAAEE;EAAI,CAAE,GAAGM,EAAE,CAACtF,qBAAqB,EAAE;EAChD,MAAM;IAAE8F,SAAS;IAAE3F;EAAU,CAAE,GAAGJ,gBAAgB,CAACuF,EAAE,CAAC;EACtD,OAAO;IACLR,GAAG,EAAEA,GAAG,GAAGiB,QAAQ,CAACD,SAAS,EAAE,EAAE,CAAC;IAClCd,IAAI,EAAEA,IAAI,GAAGe,QAAQ,CAAC5F,UAAU,EAAE,EAAE;GACrC;AACH;;;;;;;;;;;;;AC5KA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,aAAa;AACb,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,aAAa;AACb,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB,UAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,UAAU;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe;AACf,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,WAAW;AACX;;AAEA;AACA;AACA;AACA,gBAAgB,UAAU;AAC1B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB;AACnB,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAW;AACX;;AAEA;AACA;AACA;AACA,gBAAgB,UAAU;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,WAAW;AACX,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;;AAEA;AACA;AACA;AACA,gBAAgB,UAAU;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAW;AACX;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,YAAY;AAC9B,4BAA4B,iDAAiD;AAC7E;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB,uCAAuC;AACvD,gBAAgB,wCAAwC;AACxD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,8DAA8D,WAAW;AACzE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yBAAyB,kBAAkB;AAC3C;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,2DAA2D,wBAAwB;;AAEnF;AACA;AACA,2CAA2C,wBAAwB;AACnE;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,8EAA8E,4BAA4B,iBAAiB;AAC3H,8EAA8E,2BAA2B,kBAAkB;AAC3H,qDAAqD,oDAAoD,iBAAiB;AAC1H,qDAAqD,oDAAoD,iBAAiB;AAC1H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,sBAAsB;AACxC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;;AAEA,MAAM,iBAAiB,aAAa,iBAAiB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,EAAE,cAAc,EAAE,cAAc,EAAE;AAC7D,2BAA2B,EAAE,cAAc,EAAE,cAAc,EAAE;AAC7D,2BAA2B,EAAE,cAAc,EAAE,cAAc,EAAE,cAAc,EAAE;AAC7E,2BAA2B,EAAE,cAAc,EAAE,cAAc,EAAE,cAAc,EAAE;AAC7E;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yCAAyC,SAAS,QAAQ,SAAS,QAAQ,QAAQ;AACnF;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,yCAAyC;AACzC;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;;AAEgC;;;;;;;UC7vChC;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;;;;;;;;;;;;A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","sources":["webpack://Spectrum/webpack/universalModuleDefinition","webpack://Spectrum/./src/dom.ts","webpack://Spectrum/./src/utils.ts","webpack://Spectrum/./node_modules/tinycolor2/esm/tinycolor.js","webpack://Spectrum/webpack/bootstrap","webpack://Spectrum/webpack/runtime/define property getters","webpack://Spectrum/webpack/runtime/hasOwnProperty shorthand","webpack://Spectrum/./src/index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Spectrum\"] = factory();\n\telse\n\t\troot[\"Spectrum\"] = factory();\n})(this, () => {\nreturn ","/**\n * Part of spectrum-vanilla project.\n *\n * @copyright  Copyright (C) 2023 __ORGANIZATION__.\n * @license    __LICENSE__\n */\n\nexport function insertAfter<T extends Element>(existingNode: T, newNode: Element): T {\n  existingNode.parentNode?.insertBefore(newNode, existingNode.nextSibling);\n  return existingNode;\n}\n\nexport function insertBefore<T extends Element>(existingNode: T, newNode: Element): T {\n  existingNode.parentNode?.insertBefore(newNode, existingNode);\n  return existingNode;\n}\n\nexport function wrap<T extends Element>(ele: T, wrapper: Element): T {\n  ele.replaceWith(wrapper);\n  wrapper.appendChild(ele);\n  return ele;\n}\n\nexport function outerWidthWithMargin(ele: HTMLElement) {\n  const style = window.getComputedStyle(ele);\n\n  return (\n    ele.getBoundingClientRect().width +\n    parseFloat(style.marginLeft) +\n    parseFloat(style.marginRight)\n  );\n}\n","/**\n * Part of spectrum-vanilla project.\n *\n * @copyright  Copyright (C) 2023 __ORGANIZATION__.\n * @license    __LICENSE__\n */\n\nexport function html(html: string, doc = document) {\n  const div = doc.createElement('div');\n  div.innerHTML = html;\n  return div.children[0];\n}\n\nexport function camelize(str: string): string {\n  return str.replace(/(?:^\\w|[A-Z]|\\b\\w)/g, function (word, index) {\n    return index === 0 ? word.toLowerCase() : word.toUpperCase();\n  }).replace(/\\s+/g, '');\n}\n\nexport function throttle(func: Function, wait: number, debounce: Function | undefined = undefined) {\n  let timeout: any;\n  return function () {\n    // @ts-ignore\n    const context = this, args = arguments;\n    const throttler = function () {\n      timeout = null;\n      func.apply(context, args);\n    };\n    if (debounce) clearTimeout(timeout);\n    if (debounce || !timeout) {\n      timeout = setTimeout(throttler, wait);\n    }\n  };\n}\n\nexport function addClass(ele: HTMLElement, className: string) {\n  const classes = className.split(' ').filter((c) => c !== '');\n\n  if (className !== '' && classes.length) {\n    ele.classList.add(...classes);\n  }\n  return ele;\n}\n\nexport function removeClass(ele: HTMLElement, className: string) {\n  const classes = className.split(' ').filter((c) => c !== '');\n  if (className !== '' && classes.length) {\n    ele.classList.remove(...classes);\n  }\n  return ele;\n}\n\nexport function toggleClass(\n  ele: HTMLElement,\n  className: string,\n  state: boolean | undefined = undefined\n) {\n  if (state != undefined) {\n    ele.classList.toggle(className, state);\n  } else if (state === true) {\n    addClass(ele, className);\n  } else {\n    removeClass(ele, className);\n  }\n  return ele;\n}\n\nexport function emit(ele: EventTarget, eventName: string, detail: any = {}) {\n  const event = new CustomEvent(\n    eventName,\n    {\n      cancelable: true,\n      bubbles: true,\n      detail,\n    },\n  );\n\n  ele.dispatchEvent(event);\n\n  return event;\n}\n\nexport function eventDelegate(\n  ele: HTMLElement,\n  eventName: string,\n  selector: string,\n  listener: Function,\n  payload: { [name: string]: any } = {},\n) {\n  ele.addEventListener(eventName, (e) => {\n    if ((e.target as Element).closest(selector)) {\n      // @ts-ignore\n      e.data = Object.assign({}, e.data || {}, payload);\n\n      listener(e);\n    }\n  }, payload);\n}\n\nexport type OffsetCSSOptions = { top?: number, bottom?: number, left?: number, right?: number, using?: Function };\n\nexport function setElementOffset(\n  elem: HTMLElement,\n  options: OffsetCSSOptions,\n) {\n  let curPosition;\n  let curTop;\n  let curLeft;\n  let calculatePosition;\n  let position = elem.style.position;\n  let curElem = elem;\n  let props: OffsetCSSOptions = {};\n\n  // Set position first, in-case top/left are set even on static elem\n  if (position === \"static\") {\n    elem.style.position = \"relative\";\n  }\n\n  let curOffset = getElementOffset(curElem);\n  let curCSSTop = elem.style.top;\n  let curCSSLeft = elem.style.left;\n  calculatePosition = (position === \"absolute\" || position === \"fixed\") &&\n    (curCSSTop + curCSSLeft).indexOf(\"auto\") > -1;\n\n  // Need to be able to calculate position if either\n  // top or left is auto and position is either absolute or fixed\n  if (calculatePosition) {\n    curPosition = getElementPosition(curElem);\n    curTop = curPosition.top;\n    curLeft = curPosition.left;\n\n  } else {\n    curTop = parseFloat(curCSSTop) || 0;\n    curLeft = parseFloat(curCSSLeft) || 0;\n  }\n\n  // if (typeof options === 'function') {\n  //   options = options.call(elem, Object.assign({}, curOffset)) as OffsetCSSOptions;\n  // }\n\n  if (options.top != null) {\n    props.top = (options.top - curOffset.top) + curTop;\n  }\n  if (options.left != null) {\n    props.left = (options.left - curOffset.left) + curLeft;\n  }\n  \n  if (\"using\" in options) {\n    options.using.call(elem, props);\n  } else {\n    for (const k in props) {\n      curElem.style[k] = props[k] + 'px';\n    }\n  }\n}\n\nexport function getElementOffset(el: HTMLElement) {\n  const box = el.getBoundingClientRect();\n  const docElem = document.documentElement;\n  return {\n    top: box.top + window.pageYOffset - docElem.clientTop,\n    left: box.left + window.pageXOffset - docElem.clientLeft,\n  };\n}\n\nexport function getElementPosition(el: HTMLElement) {\n  const { top, left } = el.getBoundingClientRect();\n  const { marginTop, marginLeft } = getComputedStyle(el);\n  return {\n    top: top - parseInt(marginTop, 10),\n    left: left - parseInt(marginLeft, 10),\n  };\n}\n","// This file is autogenerated. It's used to publish ESM to npm.\n// https://github.com/bgrins/TinyColor\n// Brian Grinstead, MIT License\n\nconst trimLeft = /^\\s+/;\nconst trimRight = /\\s+$/;\n\nfunction tinycolor(color, opts) {\n  color = color ? color : \"\";\n  opts = opts || {};\n\n  // If input is already a tinycolor, return itself\n  if (color instanceof tinycolor) {\n    return color;\n  }\n  // If we are called as a function, call using new instead\n  if (!(this instanceof tinycolor)) {\n    return new tinycolor(color, opts);\n  }\n\n  var rgb = inputToRGB(color);\n  (this._originalInput = color),\n    (this._r = rgb.r),\n    (this._g = rgb.g),\n    (this._b = rgb.b),\n    (this._a = rgb.a),\n    (this._roundA = Math.round(100 * this._a) / 100),\n    (this._format = opts.format || rgb.format);\n  this._gradientType = opts.gradientType;\n\n  // Don't let the range of [0,255] come back in [0,1].\n  // Potentially lose a little bit of precision here, but will fix issues where\n  // .5 gets interpreted as half of the total, instead of half of 1\n  // If it was supposed to be 128, this was already taken care of by `inputToRgb`\n  if (this._r < 1) this._r = Math.round(this._r);\n  if (this._g < 1) this._g = Math.round(this._g);\n  if (this._b < 1) this._b = Math.round(this._b);\n\n  this._ok = rgb.ok;\n}\n\ntinycolor.prototype = {\n  isDark: function () {\n    return this.getBrightness() < 128;\n  },\n  isLight: function () {\n    return !this.isDark();\n  },\n  isValid: function () {\n    return this._ok;\n  },\n  getOriginalInput: function () {\n    return this._originalInput;\n  },\n  getFormat: function () {\n    return this._format;\n  },\n  getAlpha: function () {\n    return this._a;\n  },\n  getBrightness: function () {\n    //http://www.w3.org/TR/AERT#color-contrast\n    var rgb = this.toRgb();\n    return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\n  },\n  getLuminance: function () {\n    //http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    var rgb = this.toRgb();\n    var RsRGB, GsRGB, BsRGB, R, G, B;\n    RsRGB = rgb.r / 255;\n    GsRGB = rgb.g / 255;\n    BsRGB = rgb.b / 255;\n\n    if (RsRGB <= 0.03928) R = RsRGB / 12.92;\n    else R = Math.pow((RsRGB + 0.055) / 1.055, 2.4);\n    if (GsRGB <= 0.03928) G = GsRGB / 12.92;\n    else G = Math.pow((GsRGB + 0.055) / 1.055, 2.4);\n    if (BsRGB <= 0.03928) B = BsRGB / 12.92;\n    else B = Math.pow((BsRGB + 0.055) / 1.055, 2.4);\n    return 0.2126 * R + 0.7152 * G + 0.0722 * B;\n  },\n  setAlpha: function (value) {\n    this._a = boundAlpha(value);\n    this._roundA = Math.round(100 * this._a) / 100;\n    return this;\n  },\n  toHsv: function () {\n    var hsv = rgbToHsv(this._r, this._g, this._b);\n    return { h: hsv.h * 360, s: hsv.s, v: hsv.v, a: this._a };\n  },\n  toHsvString: function () {\n    var hsv = rgbToHsv(this._r, this._g, this._b);\n    var h = Math.round(hsv.h * 360),\n      s = Math.round(hsv.s * 100),\n      v = Math.round(hsv.v * 100);\n    return this._a == 1\n      ? \"hsv(\" + h + \", \" + s + \"%, \" + v + \"%)\"\n      : \"hsva(\" + h + \", \" + s + \"%, \" + v + \"%, \" + this._roundA + \")\";\n  },\n  toHsl: function () {\n    var hsl = rgbToHsl(this._r, this._g, this._b);\n    return { h: hsl.h * 360, s: hsl.s, l: hsl.l, a: this._a };\n  },\n  toHslString: function () {\n    var hsl = rgbToHsl(this._r, this._g, this._b);\n    var h = Math.round(hsl.h * 360),\n      s = Math.round(hsl.s * 100),\n      l = Math.round(hsl.l * 100);\n    return this._a == 1\n      ? \"hsl(\" + h + \", \" + s + \"%, \" + l + \"%)\"\n      : \"hsla(\" + h + \", \" + s + \"%, \" + l + \"%, \" + this._roundA + \")\";\n  },\n  toHex: function (allow3Char) {\n    return rgbToHex(this._r, this._g, this._b, allow3Char);\n  },\n  toHexString: function (allow3Char) {\n    return \"#\" + this.toHex(allow3Char);\n  },\n  toHex8: function (allow4Char) {\n    return rgbaToHex(this._r, this._g, this._b, this._a, allow4Char);\n  },\n  toHex8String: function (allow4Char) {\n    return \"#\" + this.toHex8(allow4Char);\n  },\n  toRgb: function () {\n    return {\n      r: Math.round(this._r),\n      g: Math.round(this._g),\n      b: Math.round(this._b),\n      a: this._a,\n    };\n  },\n  toRgbString: function () {\n    return this._a == 1\n      ? \"rgb(\" +\n          Math.round(this._r) +\n          \", \" +\n          Math.round(this._g) +\n          \", \" +\n          Math.round(this._b) +\n          \")\"\n      : \"rgba(\" +\n          Math.round(this._r) +\n          \", \" +\n          Math.round(this._g) +\n          \", \" +\n          Math.round(this._b) +\n          \", \" +\n          this._roundA +\n          \")\";\n  },\n  toPercentageRgb: function () {\n    return {\n      r: Math.round(bound01(this._r, 255) * 100) + \"%\",\n      g: Math.round(bound01(this._g, 255) * 100) + \"%\",\n      b: Math.round(bound01(this._b, 255) * 100) + \"%\",\n      a: this._a,\n    };\n  },\n  toPercentageRgbString: function () {\n    return this._a == 1\n      ? \"rgb(\" +\n          Math.round(bound01(this._r, 255) * 100) +\n          \"%, \" +\n          Math.round(bound01(this._g, 255) * 100) +\n          \"%, \" +\n          Math.round(bound01(this._b, 255) * 100) +\n          \"%)\"\n      : \"rgba(\" +\n          Math.round(bound01(this._r, 255) * 100) +\n          \"%, \" +\n          Math.round(bound01(this._g, 255) * 100) +\n          \"%, \" +\n          Math.round(bound01(this._b, 255) * 100) +\n          \"%, \" +\n          this._roundA +\n          \")\";\n  },\n  toName: function () {\n    if (this._a === 0) {\n      return \"transparent\";\n    }\n\n    if (this._a < 1) {\n      return false;\n    }\n\n    return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false;\n  },\n  toFilter: function (secondColor) {\n    var hex8String = \"#\" + rgbaToArgbHex(this._r, this._g, this._b, this._a);\n    var secondHex8String = hex8String;\n    var gradientType = this._gradientType ? \"GradientType = 1, \" : \"\";\n\n    if (secondColor) {\n      var s = tinycolor(secondColor);\n      secondHex8String = \"#\" + rgbaToArgbHex(s._r, s._g, s._b, s._a);\n    }\n\n    return (\n      \"progid:DXImageTransform.Microsoft.gradient(\" +\n      gradientType +\n      \"startColorstr=\" +\n      hex8String +\n      \",endColorstr=\" +\n      secondHex8String +\n      \")\"\n    );\n  },\n  toString: function (format) {\n    var formatSet = !!format;\n    format = format || this._format;\n\n    var formattedString = false;\n    var hasAlpha = this._a < 1 && this._a >= 0;\n    var needsAlphaFormat =\n      !formatSet &&\n      hasAlpha &&\n      (format === \"hex\" ||\n        format === \"hex6\" ||\n        format === \"hex3\" ||\n        format === \"hex4\" ||\n        format === \"hex8\" ||\n        format === \"name\");\n\n    if (needsAlphaFormat) {\n      // Special case for \"transparent\", all other non-alpha formats\n      // will return rgba when there is transparency.\n      if (format === \"name\" && this._a === 0) {\n        return this.toName();\n      }\n      return this.toRgbString();\n    }\n    if (format === \"rgb\") {\n      formattedString = this.toRgbString();\n    }\n    if (format === \"prgb\") {\n      formattedString = this.toPercentageRgbString();\n    }\n    if (format === \"hex\" || format === \"hex6\") {\n      formattedString = this.toHexString();\n    }\n    if (format === \"hex3\") {\n      formattedString = this.toHexString(true);\n    }\n    if (format === \"hex4\") {\n      formattedString = this.toHex8String(true);\n    }\n    if (format === \"hex8\") {\n      formattedString = this.toHex8String();\n    }\n    if (format === \"name\") {\n      formattedString = this.toName();\n    }\n    if (format === \"hsl\") {\n      formattedString = this.toHslString();\n    }\n    if (format === \"hsv\") {\n      formattedString = this.toHsvString();\n    }\n\n    return formattedString || this.toHexString();\n  },\n  clone: function () {\n    return tinycolor(this.toString());\n  },\n\n  _applyModification: function (fn, args) {\n    var color = fn.apply(null, [this].concat([].slice.call(args)));\n    this._r = color._r;\n    this._g = color._g;\n    this._b = color._b;\n    this.setAlpha(color._a);\n    return this;\n  },\n  lighten: function () {\n    return this._applyModification(lighten, arguments);\n  },\n  brighten: function () {\n    return this._applyModification(brighten, arguments);\n  },\n  darken: function () {\n    return this._applyModification(darken, arguments);\n  },\n  desaturate: function () {\n    return this._applyModification(desaturate, arguments);\n  },\n  saturate: function () {\n    return this._applyModification(saturate, arguments);\n  },\n  greyscale: function () {\n    return this._applyModification(greyscale, arguments);\n  },\n  spin: function () {\n    return this._applyModification(spin, arguments);\n  },\n\n  _applyCombination: function (fn, args) {\n    return fn.apply(null, [this].concat([].slice.call(args)));\n  },\n  analogous: function () {\n    return this._applyCombination(analogous, arguments);\n  },\n  complement: function () {\n    return this._applyCombination(complement, arguments);\n  },\n  monochromatic: function () {\n    return this._applyCombination(monochromatic, arguments);\n  },\n  splitcomplement: function () {\n    return this._applyCombination(splitcomplement, arguments);\n  },\n  // Disabled until https://github.com/bgrins/TinyColor/issues/254\n  // polyad: function (number) {\n  //   return this._applyCombination(polyad, [number]);\n  // },\n  triad: function () {\n    return this._applyCombination(polyad, [3]);\n  },\n  tetrad: function () {\n    return this._applyCombination(polyad, [4]);\n  },\n};\n\n// If input is an object, force 1 into \"1.0\" to handle ratios properly\n// String input requires \"1.0\" as input, so 1 will be treated as 1\ntinycolor.fromRatio = function (color, opts) {\n  if (typeof color == \"object\") {\n    var newColor = {};\n    for (var i in color) {\n      if (color.hasOwnProperty(i)) {\n        if (i === \"a\") {\n          newColor[i] = color[i];\n        } else {\n          newColor[i] = convertToPercentage(color[i]);\n        }\n      }\n    }\n    color = newColor;\n  }\n\n  return tinycolor(color, opts);\n};\n\n// Given a string or object, convert that input to RGB\n// Possible string inputs:\n//\n//     \"red\"\n//     \"#f00\" or \"f00\"\n//     \"#ff0000\" or \"ff0000\"\n//     \"#ff000000\" or \"ff000000\"\n//     \"rgb 255 0 0\" or \"rgb (255, 0, 0)\"\n//     \"rgb 1.0 0 0\" or \"rgb (1, 0, 0)\"\n//     \"rgba (255, 0, 0, 1)\" or \"rgba 255, 0, 0, 1\"\n//     \"rgba (1.0, 0, 0, 1)\" or \"rgba 1.0, 0, 0, 1\"\n//     \"hsl(0, 100%, 50%)\" or \"hsl 0 100% 50%\"\n//     \"hsla(0, 100%, 50%, 1)\" or \"hsla 0 100% 50%, 1\"\n//     \"hsv(0, 100%, 100%)\" or \"hsv 0 100% 100%\"\n//\nfunction inputToRGB(color) {\n  var rgb = { r: 0, g: 0, b: 0 };\n  var a = 1;\n  var s = null;\n  var v = null;\n  var l = null;\n  var ok = false;\n  var format = false;\n\n  if (typeof color == \"string\") {\n    color = stringInputToObject(color);\n  }\n\n  if (typeof color == \"object\") {\n    if (\n      isValidCSSUnit(color.r) &&\n      isValidCSSUnit(color.g) &&\n      isValidCSSUnit(color.b)\n    ) {\n      rgb = rgbToRgb(color.r, color.g, color.b);\n      ok = true;\n      format = String(color.r).substr(-1) === \"%\" ? \"prgb\" : \"rgb\";\n    } else if (\n      isValidCSSUnit(color.h) &&\n      isValidCSSUnit(color.s) &&\n      isValidCSSUnit(color.v)\n    ) {\n      s = convertToPercentage(color.s);\n      v = convertToPercentage(color.v);\n      rgb = hsvToRgb(color.h, s, v);\n      ok = true;\n      format = \"hsv\";\n    } else if (\n      isValidCSSUnit(color.h) &&\n      isValidCSSUnit(color.s) &&\n      isValidCSSUnit(color.l)\n    ) {\n      s = convertToPercentage(color.s);\n      l = convertToPercentage(color.l);\n      rgb = hslToRgb(color.h, s, l);\n      ok = true;\n      format = \"hsl\";\n    }\n\n    if (color.hasOwnProperty(\"a\")) {\n      a = color.a;\n    }\n  }\n\n  a = boundAlpha(a);\n\n  return {\n    ok: ok,\n    format: color.format || format,\n    r: Math.min(255, Math.max(rgb.r, 0)),\n    g: Math.min(255, Math.max(rgb.g, 0)),\n    b: Math.min(255, Math.max(rgb.b, 0)),\n    a: a,\n  };\n}\n\n// Conversion Functions\n// --------------------\n\n// `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\n// <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\n\n// `rgbToRgb`\n// Handle bounds / percentage checking to conform to CSS color spec\n// <http://www.w3.org/TR/css3-color/>\n// *Assumes:* r, g, b in [0, 255] or [0, 1]\n// *Returns:* { r, g, b } in [0, 255]\nfunction rgbToRgb(r, g, b) {\n  return {\n    r: bound01(r, 255) * 255,\n    g: bound01(g, 255) * 255,\n    b: bound01(b, 255) * 255,\n  };\n}\n\n// `rgbToHsl`\n// Converts an RGB color value to HSL.\n// *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\n// *Returns:* { h, s, l } in [0,1]\nfunction rgbToHsl(r, g, b) {\n  r = bound01(r, 255);\n  g = bound01(g, 255);\n  b = bound01(b, 255);\n\n  var max = Math.max(r, g, b),\n    min = Math.min(r, g, b);\n  var h,\n    s,\n    l = (max + min) / 2;\n\n  if (max == min) {\n    h = s = 0; // achromatic\n  } else {\n    var d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n    switch (max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0);\n        break;\n      case g:\n        h = (b - r) / d + 2;\n        break;\n      case b:\n        h = (r - g) / d + 4;\n        break;\n    }\n\n    h /= 6;\n  }\n\n  return { h: h, s: s, l: l };\n}\n\n// `hslToRgb`\n// Converts an HSL color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\nfunction hslToRgb(h, s, l) {\n  var r, g, b;\n\n  h = bound01(h, 360);\n  s = bound01(s, 100);\n  l = bound01(l, 100);\n\n  function hue2rgb(p, q, t) {\n    if (t < 0) t += 1;\n    if (t > 1) t -= 1;\n    if (t < 1 / 6) return p + (q - p) * 6 * t;\n    if (t < 1 / 2) return q;\n    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n    return p;\n  }\n\n  if (s === 0) {\n    r = g = b = l; // achromatic\n  } else {\n    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    var p = 2 * l - q;\n    r = hue2rgb(p, q, h + 1 / 3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1 / 3);\n  }\n\n  return { r: r * 255, g: g * 255, b: b * 255 };\n}\n\n// `rgbToHsv`\n// Converts an RGB color value to HSV\n// *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\n// *Returns:* { h, s, v } in [0,1]\nfunction rgbToHsv(r, g, b) {\n  r = bound01(r, 255);\n  g = bound01(g, 255);\n  b = bound01(b, 255);\n\n  var max = Math.max(r, g, b),\n    min = Math.min(r, g, b);\n  var h,\n    s,\n    v = max;\n\n  var d = max - min;\n  s = max === 0 ? 0 : d / max;\n\n  if (max == min) {\n    h = 0; // achromatic\n  } else {\n    switch (max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0);\n        break;\n      case g:\n        h = (b - r) / d + 2;\n        break;\n      case b:\n        h = (r - g) / d + 4;\n        break;\n    }\n    h /= 6;\n  }\n  return { h: h, s: s, v: v };\n}\n\n// `hsvToRgb`\n// Converts an HSV color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\nfunction hsvToRgb(h, s, v) {\n  h = bound01(h, 360) * 6;\n  s = bound01(s, 100);\n  v = bound01(v, 100);\n\n  var i = Math.floor(h),\n    f = h - i,\n    p = v * (1 - s),\n    q = v * (1 - f * s),\n    t = v * (1 - (1 - f) * s),\n    mod = i % 6,\n    r = [v, q, p, p, t, v][mod],\n    g = [t, v, v, q, p, p][mod],\n    b = [p, p, t, v, v, q][mod];\n\n  return { r: r * 255, g: g * 255, b: b * 255 };\n}\n\n// `rgbToHex`\n// Converts an RGB color to hex\n// Assumes r, g, and b are contained in the set [0, 255]\n// Returns a 3 or 6 character hex\nfunction rgbToHex(r, g, b, allow3Char) {\n  var hex = [\n    pad2(Math.round(r).toString(16)),\n    pad2(Math.round(g).toString(16)),\n    pad2(Math.round(b).toString(16)),\n  ];\n\n  // Return a 3 character hex if possible\n  if (\n    allow3Char &&\n    hex[0].charAt(0) == hex[0].charAt(1) &&\n    hex[1].charAt(0) == hex[1].charAt(1) &&\n    hex[2].charAt(0) == hex[2].charAt(1)\n  ) {\n    return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\n  }\n\n  return hex.join(\"\");\n}\n\n// `rgbaToHex`\n// Converts an RGBA color plus alpha transparency to hex\n// Assumes r, g, b are contained in the set [0, 255] and\n// a in [0, 1]. Returns a 4 or 8 character rgba hex\nfunction rgbaToHex(r, g, b, a, allow4Char) {\n  var hex = [\n    pad2(Math.round(r).toString(16)),\n    pad2(Math.round(g).toString(16)),\n    pad2(Math.round(b).toString(16)),\n    pad2(convertDecimalToHex(a)),\n  ];\n\n  // Return a 4 character hex if possible\n  if (\n    allow4Char &&\n    hex[0].charAt(0) == hex[0].charAt(1) &&\n    hex[1].charAt(0) == hex[1].charAt(1) &&\n    hex[2].charAt(0) == hex[2].charAt(1) &&\n    hex[3].charAt(0) == hex[3].charAt(1)\n  ) {\n    return (\n      hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0) + hex[3].charAt(0)\n    );\n  }\n\n  return hex.join(\"\");\n}\n\n// `rgbaToArgbHex`\n// Converts an RGBA color to an ARGB Hex8 string\n// Rarely used, but required for \"toFilter()\"\nfunction rgbaToArgbHex(r, g, b, a) {\n  var hex = [\n    pad2(convertDecimalToHex(a)),\n    pad2(Math.round(r).toString(16)),\n    pad2(Math.round(g).toString(16)),\n    pad2(Math.round(b).toString(16)),\n  ];\n\n  return hex.join(\"\");\n}\n\n// `equals`\n// Can be called with any tinycolor input\ntinycolor.equals = function (color1, color2) {\n  if (!color1 || !color2) return false;\n  return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();\n};\n\ntinycolor.random = function () {\n  return tinycolor.fromRatio({\n    r: Math.random(),\n    g: Math.random(),\n    b: Math.random(),\n  });\n};\n\n// Modification Functions\n// ----------------------\n// Thanks to less.js for some of the basics here\n// <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\n\nfunction desaturate(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.s -= amount / 100;\n  hsl.s = clamp01(hsl.s);\n  return tinycolor(hsl);\n}\n\nfunction saturate(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.s += amount / 100;\n  hsl.s = clamp01(hsl.s);\n  return tinycolor(hsl);\n}\n\nfunction greyscale(color) {\n  return tinycolor(color).desaturate(100);\n}\n\nfunction lighten(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.l += amount / 100;\n  hsl.l = clamp01(hsl.l);\n  return tinycolor(hsl);\n}\n\nfunction brighten(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var rgb = tinycolor(color).toRgb();\n  rgb.r = Math.max(0, Math.min(255, rgb.r - Math.round(255 * -(amount / 100))));\n  rgb.g = Math.max(0, Math.min(255, rgb.g - Math.round(255 * -(amount / 100))));\n  rgb.b = Math.max(0, Math.min(255, rgb.b - Math.round(255 * -(amount / 100))));\n  return tinycolor(rgb);\n}\n\nfunction darken(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.l -= amount / 100;\n  hsl.l = clamp01(hsl.l);\n  return tinycolor(hsl);\n}\n\n// Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\n// Values outside of this range will be wrapped into this range.\nfunction spin(color, amount) {\n  var hsl = tinycolor(color).toHsl();\n  var hue = (hsl.h + amount) % 360;\n  hsl.h = hue < 0 ? 360 + hue : hue;\n  return tinycolor(hsl);\n}\n\n// Combination Functions\n// ---------------------\n// Thanks to jQuery xColor for some of the ideas behind these\n// <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\n\nfunction complement(color) {\n  var hsl = tinycolor(color).toHsl();\n  hsl.h = (hsl.h + 180) % 360;\n  return tinycolor(hsl);\n}\n\nfunction polyad(color, number) {\n  if (isNaN(number) || number <= 0) {\n    throw new Error(\"Argument to polyad must be a positive number\");\n  }\n  var hsl = tinycolor(color).toHsl();\n  var result = [tinycolor(color)];\n  var step = 360 / number;\n  for (var i = 1; i < number; i++) {\n    result.push(tinycolor({ h: (hsl.h + i * step) % 360, s: hsl.s, l: hsl.l }));\n  }\n\n  return result;\n}\n\nfunction splitcomplement(color) {\n  var hsl = tinycolor(color).toHsl();\n  var h = hsl.h;\n  return [\n    tinycolor(color),\n    tinycolor({ h: (h + 72) % 360, s: hsl.s, l: hsl.l }),\n    tinycolor({ h: (h + 216) % 360, s: hsl.s, l: hsl.l }),\n  ];\n}\n\nfunction analogous(color, results, slices) {\n  results = results || 6;\n  slices = slices || 30;\n\n  var hsl = tinycolor(color).toHsl();\n  var part = 360 / slices;\n  var ret = [tinycolor(color)];\n\n  for (hsl.h = (hsl.h - ((part * results) >> 1) + 720) % 360; --results; ) {\n    hsl.h = (hsl.h + part) % 360;\n    ret.push(tinycolor(hsl));\n  }\n  return ret;\n}\n\nfunction monochromatic(color, results) {\n  results = results || 6;\n  var hsv = tinycolor(color).toHsv();\n  var h = hsv.h,\n    s = hsv.s,\n    v = hsv.v;\n  var ret = [];\n  var modification = 1 / results;\n\n  while (results--) {\n    ret.push(tinycolor({ h: h, s: s, v: v }));\n    v = (v + modification) % 1;\n  }\n\n  return ret;\n}\n\n// Utility Functions\n// ---------------------\n\ntinycolor.mix = function (color1, color2, amount) {\n  amount = amount === 0 ? 0 : amount || 50;\n\n  var rgb1 = tinycolor(color1).toRgb();\n  var rgb2 = tinycolor(color2).toRgb();\n\n  var p = amount / 100;\n\n  var rgba = {\n    r: (rgb2.r - rgb1.r) * p + rgb1.r,\n    g: (rgb2.g - rgb1.g) * p + rgb1.g,\n    b: (rgb2.b - rgb1.b) * p + rgb1.b,\n    a: (rgb2.a - rgb1.a) * p + rgb1.a,\n  };\n\n  return tinycolor(rgba);\n};\n\n// Readability Functions\n// ---------------------\n// <http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef (WCAG Version 2)\n\n// `contrast`\n// Analyze the 2 colors and returns the color contrast defined by (WCAG Version 2)\ntinycolor.readability = function (color1, color2) {\n  var c1 = tinycolor(color1);\n  var c2 = tinycolor(color2);\n  return (\n    (Math.max(c1.getLuminance(), c2.getLuminance()) + 0.05) /\n    (Math.min(c1.getLuminance(), c2.getLuminance()) + 0.05)\n  );\n};\n\n// `isReadable`\n// Ensure that foreground and background color combinations meet WCAG2 guidelines.\n// The third argument is an optional Object.\n//      the 'level' property states 'AA' or 'AAA' - if missing or invalid, it defaults to 'AA';\n//      the 'size' property states 'large' or 'small' - if missing or invalid, it defaults to 'small'.\n// If the entire object is absent, isReadable defaults to {level:\"AA\",size:\"small\"}.\n\n// *Example*\n//    tinycolor.isReadable(\"#000\", \"#111\") => false\n//    tinycolor.isReadable(\"#000\", \"#111\",{level:\"AA\",size:\"large\"}) => false\ntinycolor.isReadable = function (color1, color2, wcag2) {\n  var readability = tinycolor.readability(color1, color2);\n  var wcag2Parms, out;\n\n  out = false;\n\n  wcag2Parms = validateWCAG2Parms(wcag2);\n  switch (wcag2Parms.level + wcag2Parms.size) {\n    case \"AAsmall\":\n    case \"AAAlarge\":\n      out = readability >= 4.5;\n      break;\n    case \"AAlarge\":\n      out = readability >= 3;\n      break;\n    case \"AAAsmall\":\n      out = readability >= 7;\n      break;\n  }\n  return out;\n};\n\n// `mostReadable`\n// Given a base color and a list of possible foreground or background\n// colors for that base, returns the most readable color.\n// Optionally returns Black or White if the most readable color is unreadable.\n// *Example*\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:false}).toHexString(); // \"#112255\"\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:true}).toHexString();  // \"#ffffff\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"large\"}).toHexString(); // \"#faf3f3\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"small\"}).toHexString(); // \"#ffffff\"\ntinycolor.mostReadable = function (baseColor, colorList, args) {\n  var bestColor = null;\n  var bestScore = 0;\n  var readability;\n  var includeFallbackColors, level, size;\n  args = args || {};\n  includeFallbackColors = args.includeFallbackColors;\n  level = args.level;\n  size = args.size;\n\n  for (var i = 0; i < colorList.length; i++) {\n    readability = tinycolor.readability(baseColor, colorList[i]);\n    if (readability > bestScore) {\n      bestScore = readability;\n      bestColor = tinycolor(colorList[i]);\n    }\n  }\n\n  if (\n    tinycolor.isReadable(baseColor, bestColor, {\n      level: level,\n      size: size,\n    }) ||\n    !includeFallbackColors\n  ) {\n    return bestColor;\n  } else {\n    args.includeFallbackColors = false;\n    return tinycolor.mostReadable(baseColor, [\"#fff\", \"#000\"], args);\n  }\n};\n\n// Big List of Colors\n// ------------------\n// <https://www.w3.org/TR/css-color-4/#named-colors>\nvar names = (tinycolor.names = {\n  aliceblue: \"f0f8ff\",\n  antiquewhite: \"faebd7\",\n  aqua: \"0ff\",\n  aquamarine: \"7fffd4\",\n  azure: \"f0ffff\",\n  beige: \"f5f5dc\",\n  bisque: \"ffe4c4\",\n  black: \"000\",\n  blanchedalmond: \"ffebcd\",\n  blue: \"00f\",\n  blueviolet: \"8a2be2\",\n  brown: \"a52a2a\",\n  burlywood: \"deb887\",\n  burntsienna: \"ea7e5d\",\n  cadetblue: \"5f9ea0\",\n  chartreuse: \"7fff00\",\n  chocolate: \"d2691e\",\n  coral: \"ff7f50\",\n  cornflowerblue: \"6495ed\",\n  cornsilk: \"fff8dc\",\n  crimson: \"dc143c\",\n  cyan: \"0ff\",\n  darkblue: \"00008b\",\n  darkcyan: \"008b8b\",\n  darkgoldenrod: \"b8860b\",\n  darkgray: \"a9a9a9\",\n  darkgreen: \"006400\",\n  darkgrey: \"a9a9a9\",\n  darkkhaki: \"bdb76b\",\n  darkmagenta: \"8b008b\",\n  darkolivegreen: \"556b2f\",\n  darkorange: \"ff8c00\",\n  darkorchid: \"9932cc\",\n  darkred: \"8b0000\",\n  darksalmon: \"e9967a\",\n  darkseagreen: \"8fbc8f\",\n  darkslateblue: \"483d8b\",\n  darkslategray: \"2f4f4f\",\n  darkslategrey: \"2f4f4f\",\n  darkturquoise: \"00ced1\",\n  darkviolet: \"9400d3\",\n  deeppink: \"ff1493\",\n  deepskyblue: \"00bfff\",\n  dimgray: \"696969\",\n  dimgrey: \"696969\",\n  dodgerblue: \"1e90ff\",\n  firebrick: \"b22222\",\n  floralwhite: \"fffaf0\",\n  forestgreen: \"228b22\",\n  fuchsia: \"f0f\",\n  gainsboro: \"dcdcdc\",\n  ghostwhite: \"f8f8ff\",\n  gold: \"ffd700\",\n  goldenrod: \"daa520\",\n  gray: \"808080\",\n  green: \"008000\",\n  greenyellow: \"adff2f\",\n  grey: \"808080\",\n  honeydew: \"f0fff0\",\n  hotpink: \"ff69b4\",\n  indianred: \"cd5c5c\",\n  indigo: \"4b0082\",\n  ivory: \"fffff0\",\n  khaki: \"f0e68c\",\n  lavender: \"e6e6fa\",\n  lavenderblush: \"fff0f5\",\n  lawngreen: \"7cfc00\",\n  lemonchiffon: \"fffacd\",\n  lightblue: \"add8e6\",\n  lightcoral: \"f08080\",\n  lightcyan: \"e0ffff\",\n  lightgoldenrodyellow: \"fafad2\",\n  lightgray: \"d3d3d3\",\n  lightgreen: \"90ee90\",\n  lightgrey: \"d3d3d3\",\n  lightpink: \"ffb6c1\",\n  lightsalmon: \"ffa07a\",\n  lightseagreen: \"20b2aa\",\n  lightskyblue: \"87cefa\",\n  lightslategray: \"789\",\n  lightslategrey: \"789\",\n  lightsteelblue: \"b0c4de\",\n  lightyellow: \"ffffe0\",\n  lime: \"0f0\",\n  limegreen: \"32cd32\",\n  linen: \"faf0e6\",\n  magenta: \"f0f\",\n  maroon: \"800000\",\n  mediumaquamarine: \"66cdaa\",\n  mediumblue: \"0000cd\",\n  mediumorchid: \"ba55d3\",\n  mediumpurple: \"9370db\",\n  mediumseagreen: \"3cb371\",\n  mediumslateblue: \"7b68ee\",\n  mediumspringgreen: \"00fa9a\",\n  mediumturquoise: \"48d1cc\",\n  mediumvioletred: \"c71585\",\n  midnightblue: \"191970\",\n  mintcream: \"f5fffa\",\n  mistyrose: \"ffe4e1\",\n  moccasin: \"ffe4b5\",\n  navajowhite: \"ffdead\",\n  navy: \"000080\",\n  oldlace: \"fdf5e6\",\n  olive: \"808000\",\n  olivedrab: \"6b8e23\",\n  orange: \"ffa500\",\n  orangered: \"ff4500\",\n  orchid: \"da70d6\",\n  palegoldenrod: \"eee8aa\",\n  palegreen: \"98fb98\",\n  paleturquoise: \"afeeee\",\n  palevioletred: \"db7093\",\n  papayawhip: \"ffefd5\",\n  peachpuff: \"ffdab9\",\n  peru: \"cd853f\",\n  pink: \"ffc0cb\",\n  plum: \"dda0dd\",\n  powderblue: \"b0e0e6\",\n  purple: \"800080\",\n  rebeccapurple: \"663399\",\n  red: \"f00\",\n  rosybrown: \"bc8f8f\",\n  royalblue: \"4169e1\",\n  saddlebrown: \"8b4513\",\n  salmon: \"fa8072\",\n  sandybrown: \"f4a460\",\n  seagreen: \"2e8b57\",\n  seashell: \"fff5ee\",\n  sienna: \"a0522d\",\n  silver: \"c0c0c0\",\n  skyblue: \"87ceeb\",\n  slateblue: \"6a5acd\",\n  slategray: \"708090\",\n  slategrey: \"708090\",\n  snow: \"fffafa\",\n  springgreen: \"00ff7f\",\n  steelblue: \"4682b4\",\n  tan: \"d2b48c\",\n  teal: \"008080\",\n  thistle: \"d8bfd8\",\n  tomato: \"ff6347\",\n  turquoise: \"40e0d0\",\n  violet: \"ee82ee\",\n  wheat: \"f5deb3\",\n  white: \"fff\",\n  whitesmoke: \"f5f5f5\",\n  yellow: \"ff0\",\n  yellowgreen: \"9acd32\",\n});\n\n// Make it easy to access colors via `hexNames[hex]`\nvar hexNames = (tinycolor.hexNames = flip(names));\n\n// Utilities\n// ---------\n\n// `{ 'name1': 'val1' }` becomes `{ 'val1': 'name1' }`\nfunction flip(o) {\n  var flipped = {};\n  for (var i in o) {\n    if (o.hasOwnProperty(i)) {\n      flipped[o[i]] = i;\n    }\n  }\n  return flipped;\n}\n\n// Return a valid alpha value [0,1] with all invalid values being set to 1\nfunction boundAlpha(a) {\n  a = parseFloat(a);\n\n  if (isNaN(a) || a < 0 || a > 1) {\n    a = 1;\n  }\n\n  return a;\n}\n\n// Take input from [0, n] and return it as [0, 1]\nfunction bound01(n, max) {\n  if (isOnePointZero(n)) n = \"100%\";\n\n  var processPercent = isPercentage(n);\n  n = Math.min(max, Math.max(0, parseFloat(n)));\n\n  // Automatically convert percentage into number\n  if (processPercent) {\n    n = parseInt(n * max, 10) / 100;\n  }\n\n  // Handle floating point rounding errors\n  if (Math.abs(n - max) < 0.000001) {\n    return 1;\n  }\n\n  // Convert into [0, 1] range if it isn't already\n  return (n % max) / parseFloat(max);\n}\n\n// Force a number between 0 and 1\nfunction clamp01(val) {\n  return Math.min(1, Math.max(0, val));\n}\n\n// Parse a base-16 hex value into a base-10 integer\nfunction parseIntFromHex(val) {\n  return parseInt(val, 16);\n}\n\n// Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\n// <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\nfunction isOnePointZero(n) {\n  return typeof n == \"string\" && n.indexOf(\".\") != -1 && parseFloat(n) === 1;\n}\n\n// Check to see if string passed in is a percentage\nfunction isPercentage(n) {\n  return typeof n === \"string\" && n.indexOf(\"%\") != -1;\n}\n\n// Force a hex value to have 2 characters\nfunction pad2(c) {\n  return c.length == 1 ? \"0\" + c : \"\" + c;\n}\n\n// Replace a decimal with it's percentage value\nfunction convertToPercentage(n) {\n  if (n <= 1) {\n    n = n * 100 + \"%\";\n  }\n\n  return n;\n}\n\n// Converts a decimal to a hex value\nfunction convertDecimalToHex(d) {\n  return Math.round(parseFloat(d) * 255).toString(16);\n}\n// Converts a hex value to a decimal\nfunction convertHexToDecimal(h) {\n  return parseIntFromHex(h) / 255;\n}\n\nvar matchers = (function () {\n  // <http://www.w3.org/TR/css3-values/#integers>\n  var CSS_INTEGER = \"[-\\\\+]?\\\\d+%?\";\n\n  // <http://www.w3.org/TR/css3-values/#number-value>\n  var CSS_NUMBER = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\";\n\n  // Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\n  var CSS_UNIT = \"(?:\" + CSS_NUMBER + \")|(?:\" + CSS_INTEGER + \")\";\n\n  // Actual matching.\n  // Parentheses and commas are optional, but not required.\n  // Whitespace can take the place of commas or opening paren\n  var PERMISSIVE_MATCH3 =\n    \"[\\\\s|\\\\(]+(\" +\n    CSS_UNIT +\n    \")[,|\\\\s]+(\" +\n    CSS_UNIT +\n    \")[,|\\\\s]+(\" +\n    CSS_UNIT +\n    \")\\\\s*\\\\)?\";\n  var PERMISSIVE_MATCH4 =\n    \"[\\\\s|\\\\(]+(\" +\n    CSS_UNIT +\n    \")[,|\\\\s]+(\" +\n    CSS_UNIT +\n    \")[,|\\\\s]+(\" +\n    CSS_UNIT +\n    \")[,|\\\\s]+(\" +\n    CSS_UNIT +\n    \")\\\\s*\\\\)?\";\n\n  return {\n    CSS_UNIT: new RegExp(CSS_UNIT),\n    rgb: new RegExp(\"rgb\" + PERMISSIVE_MATCH3),\n    rgba: new RegExp(\"rgba\" + PERMISSIVE_MATCH4),\n    hsl: new RegExp(\"hsl\" + PERMISSIVE_MATCH3),\n    hsla: new RegExp(\"hsla\" + PERMISSIVE_MATCH4),\n    hsv: new RegExp(\"hsv\" + PERMISSIVE_MATCH3),\n    hsva: new RegExp(\"hsva\" + PERMISSIVE_MATCH4),\n    hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n    hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n    hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n    hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n  };\n})();\n\n// `isValidCSSUnit`\n// Take in a single string / number and check to see if it looks like a CSS unit\n// (see `matchers` above for definition).\nfunction isValidCSSUnit(color) {\n  return !!matchers.CSS_UNIT.exec(color);\n}\n\n// `stringInputToObject`\n// Permissive string parsing.  Take in a number of formats, and output an object\n// based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\nfunction stringInputToObject(color) {\n  color = color.replace(trimLeft, \"\").replace(trimRight, \"\").toLowerCase();\n  var named = false;\n  if (names[color]) {\n    color = names[color];\n    named = true;\n  } else if (color == \"transparent\") {\n    return { r: 0, g: 0, b: 0, a: 0, format: \"name\" };\n  }\n\n  // Try to match string input using regular expressions.\n  // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\n  // Just return an object and let the conversion functions handle that.\n  // This way the result will be the same whether the tinycolor is initialized with string or object.\n  var match;\n  if ((match = matchers.rgb.exec(color))) {\n    return { r: match[1], g: match[2], b: match[3] };\n  }\n  if ((match = matchers.rgba.exec(color))) {\n    return { r: match[1], g: match[2], b: match[3], a: match[4] };\n  }\n  if ((match = matchers.hsl.exec(color))) {\n    return { h: match[1], s: match[2], l: match[3] };\n  }\n  if ((match = matchers.hsla.exec(color))) {\n    return { h: match[1], s: match[2], l: match[3], a: match[4] };\n  }\n  if ((match = matchers.hsv.exec(color))) {\n    return { h: match[1], s: match[2], v: match[3] };\n  }\n  if ((match = matchers.hsva.exec(color))) {\n    return { h: match[1], s: match[2], v: match[3], a: match[4] };\n  }\n  if ((match = matchers.hex8.exec(color))) {\n    return {\n      r: parseIntFromHex(match[1]),\n      g: parseIntFromHex(match[2]),\n      b: parseIntFromHex(match[3]),\n      a: convertHexToDecimal(match[4]),\n      format: named ? \"name\" : \"hex8\",\n    };\n  }\n  if ((match = matchers.hex6.exec(color))) {\n    return {\n      r: parseIntFromHex(match[1]),\n      g: parseIntFromHex(match[2]),\n      b: parseIntFromHex(match[3]),\n      format: named ? \"name\" : \"hex\",\n    };\n  }\n  if ((match = matchers.hex4.exec(color))) {\n    return {\n      r: parseIntFromHex(match[1] + \"\" + match[1]),\n      g: parseIntFromHex(match[2] + \"\" + match[2]),\n      b: parseIntFromHex(match[3] + \"\" + match[3]),\n      a: convertHexToDecimal(match[4] + \"\" + match[4]),\n      format: named ? \"name\" : \"hex8\",\n    };\n  }\n  if ((match = matchers.hex3.exec(color))) {\n    return {\n      r: parseIntFromHex(match[1] + \"\" + match[1]),\n      g: parseIntFromHex(match[2] + \"\" + match[2]),\n      b: parseIntFromHex(match[3] + \"\" + match[3]),\n      format: named ? \"name\" : \"hex\",\n    };\n  }\n\n  return false;\n}\n\nfunction validateWCAG2Parms(parms) {\n  // return valid WCAG2 parms for isReadable.\n  // If input parms are invalid, return {\"level\":\"AA\", \"size\":\"small\"}\n  var level, size;\n  parms = parms || { level: \"AA\", size: \"small\" };\n  level = (parms.level || \"AA\").toUpperCase();\n  size = (parms.size || \"small\").toLowerCase();\n  if (level !== \"AA\" && level !== \"AAA\") {\n    level = \"AA\";\n  }\n  if (size !== \"small\" && size !== \"large\") {\n    size = \"small\";\n  }\n  return { level: level, size: size };\n}\n\nexport { tinycolor as default };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import tinycolor, { ColorInput, Instance } from 'tinycolor2';\nimport { insertAfter, outerWidthWithMargin, wrap } from './dom';\nimport { SpectrumColorFormat, SpectrumOptions, SpectrumLang, SpectrumListener } from './types';\nimport {\n  addClass,\n  emit,\n  eventDelegate,\n  getElementOffset,\n  html,\n  OffsetCSSOptions,\n  removeClass,\n  setElementOffset,\n  throttle,\n  toggleClass,\n} from './utils';\n\nconst defaultOpts: Partial<SpectrumOptions> = {\n\n    // Callbacks\n    beforeShow: noop,\n    move: noop,\n    change: noop,\n    show: noop,\n    hide: noop,\n\n    // Options\n    color: '',\n    type: 'component', // text, color, component or flat\n    showInput: false,\n    allowEmpty: true,\n    showButtons: true,\n    clickoutFiresChange: true,\n    showInitial: false,\n    showPalette: true,\n    showPaletteOnly: false,\n    hideAfterPaletteSelect: false,\n    togglePaletteOnly: false,\n    showSelectionPalette: true,\n    localStorageKey: '',\n    appendTo: 'body',\n    maxSelectionSize: 8,\n    locale: 'en',\n    cancelText: 'cancel',\n    chooseText: 'choose',\n    togglePaletteMoreText: 'more',\n    togglePaletteLessText: 'less',\n    clearText: 'Clear Color Selection',\n    noColorSelectedText: 'No Color Selected',\n    preferredFormat: 'name',\n    containerClassName: '',\n    replacerClassName: '',\n    showAlpha: true,\n    theme: 'sp-light',\n    palette: [\n      ['#000000', '#444444', '#5b5b5b', '#999999', '#bcbcbc', '#eeeeee', '#f3f6f4', '#ffffff'],\n      ['#f44336', '#744700', '#ce7e00', '#8fce00', '#2986cc', '#16537e', '#6a329f', '#c90076'],\n      ['#f4cccc', '#fce5cd', '#fff2cc', '#d9ead3', '#d0e0e3', '#cfe2f3', '#d9d2e9', '#ead1dc'],\n      ['#ea9999', '#f9cb9c', '#ffe599', '#b6d7a8', '#a2c4c9', '#9fc5e8', '#b4a7d6', '#d5a6bd'],\n      ['#e06666', '#f6b26b', '#ffd966', '#93c47d', '#76a5af', '#6fa8dc', '#8e7cc3', '#c27ba0'],\n      ['#cc0000', '#e69138', '#f1c232', '#6aa84f', '#45818e', '#3d85c6', '#674ea7', '#a64d79'],\n      ['#990000', '#b45f06', '#bf9000', '#38761d', '#134f5c', '#0b5394', '#351c75', '#741b47'],\n      ['#660000', '#783f04', '#7f6000', '#274e13', '#0c343d', '#073763', '#20124d', '#4c1130'],\n    ],\n    selectionPalette: [] as string[],\n    disabled: false,\n    offset: null,\n  },\n  spectrums: any[] = [],\n  replaceInput = html(\n    [\n      '<div class=\\'sp-replacer\\'>',\n      '<div class=\\'sp-preview\\'><div class=\\'sp-preview-inner\\'></div></div>',\n      '<div class=\\'sp-dd\\'>&#9660;</div>',\n      '</div>',\n    ].join(''),\n  ) as HTMLElement,\n  markup = (function () {\n    return [\n      '<div class=\\'sp-container sp-hidden\\'>',\n      '<div class=\\'sp-palette-container\\'>',\n      '<div class=\\'sp-palette sp-thumb sp-cf\\'></div>',\n      '<div class=\\'sp-palette-button-container sp-cf\\'>',\n      '<button type=\\'button\\' class=\\'sp-palette-toggle\\'></button>',\n      '</div>',\n      '</div>',\n      '<div class=\\'sp-picker-container\\'>',\n      '<div class=\\'sp-top sp-cf\\'>',\n      '<div class=\\'sp-fill\\'></div>',\n      '<div class=\\'sp-top-inner\\'>',\n      '<div class=\\'sp-color\\'>',\n      '<div class=\\'sp-sat\\'>',\n      '<div class=\\'sp-val\\'>',\n      '<div class=\\'sp-dragger\\'></div>',\n      '</div>',\n      '</div>',\n      '</div>',\n      '<div class=\\'sp-clear sp-clear-display\\'>',\n      '</div>',\n      '<div class=\\'sp-hue\\'>',\n      '<div class=\\'sp-slider\\'></div>',\n      '</div>',\n      '</div>',\n      '<div class=\\'sp-alpha\\'><div class=\\'sp-alpha-inner\\'><div class=\\'sp-alpha-handle\\'></div></div></div>',\n      '</div>',\n      '<div class=\\'sp-input-container sp-cf\\'>',\n      '<input class=\\'sp-input\\' type=\\'text\\' spellcheck=\\'false\\'  />',\n      '</div>',\n      '<div class=\\'sp-initial sp-thumb sp-cf\\'></div>',\n      '<div class=\\'sp-button-container sp-cf\\'>',\n      '<button class=\\'sp-cancel\\' href=\\'#\\'></button>',\n      '<button type=\\'button\\' class=\\'sp-choose\\'></button>',\n      '</div>',\n      '</div>',\n      '</div>',\n    ].join('');\n  })();\n\nfunction paletteTemplate(p: ColorInput[], color: ColorInput, className: string, opts: any) {\n  const html = [];\n  for (let i = 0; i < p.length; i++) {\n    const current = p[i];\n    if (current) {\n      const tiny = tinycolor(current);\n      let c = tiny.toHsl().l < 0.5 ? 'sp-thumb-el sp-thumb-dark' : 'sp-thumb-el sp-thumb-light';\n      c += (tinycolor.equals(color, current)) ? ' sp-thumb-active' : '';\n      const formattedString = tiny.toString(opts.preferredFormat || 'rgb');\n      const swatchStyle = 'background-color:' + tiny.toRgbString();\n      html.push('<span title=\"' + formattedString + '\" data-color=\"' + tiny.toRgbString() + '\" class=\"' + c + '\"><span class=\"sp-thumb-inner\" style=\"' + swatchStyle + ';\"></span></span>');\n    } else {\n      html.push('<span class=\"sp-thumb-el sp-clear-display\" ><span class=\"sp-clear-palette-only\" style=\"background-color: transparent;\"></span></span>');\n    }\n  }\n  return '<div class=\\'sp-cf ' + className + '\\'>' + html.join('') + '</div>';\n}\n\nfunction hideAll() {\n  for (let i = 0; i < spectrums.length; i++) {\n    if (spectrums[i]) {\n      spectrums[i].hide();\n    }\n  }\n}\n\nfunction instanceOptions(options: Partial<SpectrumOptions>, element: HTMLElement): SpectrumOptions {\n  // Clone first\n  options = Object.assign({}, options);\n\n  options.locale = options.locale || window.navigator.language;\n\n  if (typeof options.locale === 'string') {\n    if (options.locale) {\n      // handle locale like \"zh-TW\" to \"zh-tw\"\n      // handle locale like \"fr-FR\" to \"fr\"\n      let parts = options.locale.split('-')\n        .map((p) => p.toLowerCase());\n\n      if (parts[0] === parts[1]) {\n        parts = [parts[0]];\n      }\n\n      options.locale = parts.join('-');\n    }\n\n    if (options.locale !== 'en' && Spectrum.localization[options.locale]) {\n      options = Object.assign({}, options, Spectrum.localization[options.locale]);\n    }\n  } else {\n    options = Object.assign({}, options, options.locale);\n  }\n\n  const opts = Object.assign({}, defaultOpts, element.dataset, options) as SpectrumOptions;\n\n  opts.callbacks = {\n    'move': bind(opts.move as Function, element),\n    'change': bind(opts.change as Function, element),\n    'show': bind(opts.show as Function, element),\n    'hide': bind(opts.hide as Function, element),\n    'beforeShow': bind(opts.beforeShow as Function, element),\n  };\n\n  return opts;\n}\n\nfunction spectrum(element: HTMLElement, options: Partial<SpectrumOptions>) {\n\n  let opts = instanceOptions(options, element),\n    type = opts.type,\n    flat = (type === 'flat'),\n    showSelectionPalette = opts.showSelectionPalette,\n    localStorageKey = opts.localStorageKey,\n    theme = opts.theme,\n    callbacks = opts.callbacks,\n    resize = throttle(reflow, 10),\n    visible = false,\n    isDragging = false,\n    dragWidth = 0,\n    dragHeight = 0,\n    dragHelperHeight = 0,\n    slideHeight = 0,\n    slideWidth = 0,\n    alphaWidth = 0,\n    alphaSlideHelperWidth = 0,\n    slideHelperHeight = 0,\n    currentHue = 0,\n    currentSaturation = 0,\n    currentValue = 0,\n    currentAlpha = 1,\n    palette: any = [],\n    paletteArray: any[] = [],\n    paletteLookup: any = {},\n    selectionPalette = opts.selectionPalette.slice(0),\n    maxSelectionSize = opts.maxSelectionSize,\n    draggingClass = 'sp-dragging',\n    abortNextInputChange = false,\n    shiftMovementDirection: any = null;\n\n  const doc = element.ownerDocument;\n\n  const container = html(markup, doc) as HTMLElement;\n  container.classList.add(theme);\n  doc.body.appendChild(container);\n\n  let body = doc.body,\n    boundElement: HTMLElement | HTMLInputElement = element,\n    disabled = false,\n    pickerContainer = container.querySelector('.sp-picker-container') as HTMLElement,\n    dragger = container.querySelector('.sp-color') as HTMLElement,\n    dragHelper = container.querySelector('.sp-dragger') as HTMLElement,\n    slider = container.querySelector('.sp-hue') as HTMLElement,\n    slideHelper = container.querySelector('.sp-slider') as HTMLElement,\n    alphaSliderInner = container.querySelector('.sp-alpha-inner') as HTMLElement,\n    alphaSlider = container.querySelector('.sp-alpha') as HTMLElement,\n    alphaSlideHelper = container.querySelector('.sp-alpha-handle') as HTMLElement,\n    textInput = container.querySelector('.sp-input') as HTMLInputElement,\n    paletteContainer = container.querySelector('.sp-palette') as HTMLElement,\n    initialColorContainer = container.querySelector('.sp-initial') as HTMLElement,\n    cancelButton = container.querySelector('.sp-cancel') as HTMLElement,\n    clearButton = container.querySelector('.sp-clear') as HTMLElement,\n    chooseButton = container.querySelector('.sp-choose') as HTMLElement,\n    toggleButton = container.querySelector('.sp-palette-toggle') as HTMLElement,\n    isInput = boundElement.nodeName === 'INPUT',\n    isInputTypeColor = isInput && boundElement.getAttribute('type') === 'color',\n    shouldReplace = isInput && (type === 'color' || isInputTypeColor),\n    replacer = (shouldReplace)\n      ? (() => {\n        addClass(replaceInput, theme);\n        addClass(replaceInput, opts.replacerClassName);\n        return replaceInput;\n      })()\n      : null,\n    offsetElement = (shouldReplace) ? replacer : boundElement,\n    previewElement = replacer?.querySelector('.sp-preview-inner') as HTMLElement,\n    initialColor = opts.color || (isInput && (boundElement as HTMLInputElement).value),\n    colorOnShow: ColorInput = '',\n    currentPreferredFormat = opts.preferredFormat,\n    clickoutFiresChange = !opts.showButtons || opts.clickoutFiresChange,\n    isEmpty = !initialColor,\n    allowEmpty = opts.allowEmpty;\n\n  // Element to be updated with the input color. Populated in initialize method\n  let originalInputContainer: HTMLSpanElement;\n  let colorizeElement: HTMLElement | null;\n  let colorizeElementInitialColor: string;\n  let colorizeElementInitialBackground: string;\n\n  //If there is a label for this element, when clicked on, show the colour picker\n  const thisId = boundElement.getAttribute('id') || '';\n  if (thisId !== undefined && thisId.length > 0) {\n    const labels = document.querySelectorAll(`label[for=\"${thisId}\"]`);\n\n    labels.forEach((label) => {\n      label.addEventListener('click', function (e) {\n        e.preventDefault();\n        show();\n        return false;\n      });\n    });\n  }\n\n  function applyOptions() {\n\n    if (opts.showPaletteOnly) {\n      opts.showPalette = true;\n    }\n\n    if (toggleButton) {\n      toggleButton.textContent = opts.showPaletteOnly ? opts.togglePaletteMoreText : opts.togglePaletteLessText;\n    }\n\n    if (opts.palette) {\n      palette = opts.palette.slice(0);\n      paletteArray = Array.isArray(palette[0]) ? palette : [palette];\n      paletteLookup = {};\n      for (let i = 0; i < paletteArray.length; i++) {\n        for (let j = 0; j < paletteArray[i].length; j++) {\n          const rgb = tinycolor(paletteArray[i][j]).toRgbString();\n          paletteLookup[rgb] = true;\n        }\n      }\n\n      // if showPaletteOnly and didn't set initialcolor\n      // set initialcolor to first palette\n      if (opts.showPaletteOnly && !initialColor) {\n        initialColor = (palette[0][0] === '') ? palette[0][0] : Object.keys(paletteLookup)[0];\n      }\n    }\n\n    toggleClass(container, 'sp-flat', flat);\n    toggleClass(container, 'sp-input-disabled', !opts.showInput);\n    toggleClass(container, 'sp-alpha-enabled', opts.showAlpha);\n    toggleClass(container, 'sp-clear-enabled', allowEmpty);\n    toggleClass(container, 'sp-buttons-disabled', !opts.showButtons);\n    toggleClass(container, 'sp-palette-buttons-disabled', !opts.togglePaletteOnly);\n    toggleClass(container, 'sp-palette-disabled', !opts.showPalette);\n    toggleClass(container, 'sp-palette-only', opts.showPaletteOnly);\n    toggleClass(container, 'sp-initial-disabled', !opts.showInitial);\n    addClass(container, opts.containerClassName);\n\n    reflow();\n  }\n\n  function offsetElementStart(e: Event) {\n    if (!disabled) {\n      show();\n    }\n\n    e.stopPropagation();\n    const target = e.target as HTMLElement;\n\n    if (!target.matches('input')) {\n      e.preventDefault();\n    }\n  }\n\n  function initialize() {\n    applyOptions();\n    const inputStyle = window.getComputedStyle(boundElement);\n\n    originalInputContainer = html('<span class=\"sp-original-input-container\"></span>') as HTMLSpanElement;\n    ['margin'].forEach(function (cssProp: string) {\n      originalInputContainer.style[cssProp] = inputStyle[cssProp] || null;\n    });\n    // inline-flex by default, switching to flex if needed\n\n    if (inputStyle.display === 'block') {\n      originalInputContainer.style.display = 'flex';\n    }\n\n    if (shouldReplace) {\n      insertAfter(boundElement, replacer as Element);\n      boundElement.style.display = 'none';\n    } else if (type === 'text') {\n      addClass(originalInputContainer, 'sp-colorize-container');\n      addClass(boundElement, 'spectrum sp-colorize');\n      wrap(boundElement, originalInputContainer);\n    } else if (type === 'component') {\n      addClass(boundElement, 'spectrum');\n      wrap(boundElement, originalInputContainer);\n      const addOn = html(['<div class=\\'sp-colorize-container sp-add-on\\'>',\n        '<div class=\\'sp-colorize\\'></div> ',\n        '</div>'].join('')) as HTMLElement;\n\n      addOn.style.width = boundElement.offsetHeight + 'px';\n      addOn.style.borderRadius = inputStyle.borderRadius;\n      addOn.style.border = inputStyle.border;\n\n      boundElement.classList.add('with-add-on');\n\n      boundElement.before(addOn);\n    }\n\n    colorizeElement = boundElement.parentNode?.querySelector('.sp-colorize');\n    colorizeElementInitialColor = colorizeElement?.style.color || '';\n    colorizeElementInitialBackground = colorizeElement?.style.backgroundColor || '';\n\n    if (!allowEmpty) {\n      clearButton.style.display = 'none';\n    }\n\n    if (flat) {\n      boundElement.after(container);\n      boundElement.style.display = 'none';\n    } else {\n\n      let appendTo = opts.appendTo === 'parent' ? boundElement.parentElement : opts.appendTo;\n      if (!appendTo) {\n        appendTo = document.body;\n      }\n\n      if (typeof appendTo !== 'string') {\n        appendTo.append(container);\n      }\n    }\n\n    updateSelectionPaletteFromStorage();\n\n    offsetElement?.addEventListener('click', offsetElementStart);\n    offsetElement?.addEventListener('touchstart', offsetElementStart);\n\n    if (boundElement.matches(':disabled') || opts.disabled) {\n      disable();\n    }\n\n    // Prevent clicks from bubbling up to document.  This would cause it to be hidden.\n    container.addEventListener('click', (e) => e.stopPropagation());\n\n    // Handle user typed input\n    [textInput, boundElement].forEach(function (input: HTMLElement | HTMLInputElement) {\n      if (!('value' in input)) {\n        return;\n      }\n\n      input.addEventListener('change', () => {\n        setFromTextInput(input.value);\n      });\n      input.addEventListener('paste', () => {\n        setTimeout(() => {\n          setFromTextInput(input.value);\n        }, 1);\n      });\n      input.addEventListener('keydown', (e) => {\n        if (e.keyCode === 13) {\n          setFromTextInput(input.value);\n          if (input === boundElement) {\n            hide();\n          }\n        }\n      });\n    });\n\n    cancelButton.textContent = opts.cancelText;\n    cancelButton.addEventListener('click', function (e) {\n      e.stopPropagation();\n      e.preventDefault();\n      revert();\n      hide();\n    });\n\n    clearButton.setAttribute('title', opts.clearText);\n    clearButton.addEventListener('click', function (e) {\n      e.stopPropagation();\n      e.preventDefault();\n      isEmpty = true;\n      move();\n\n      if (flat) {\n        //for the flat style, this is a change event\n        updateOriginalInput(true);\n      }\n    });\n\n    chooseButton.textContent = opts.chooseText;\n    chooseButton.addEventListener('click', e => {\n      e.stopPropagation();\n      e.preventDefault();\n\n      // if (IE && textInput.matches(':focus')) {\n      //   textInput.dispatchEvent(new CustomEvent('change'));\n      // }\n\n      if (isValid()) {\n        updateOriginalInput(true);\n        hide();\n      }\n    });\n\n    toggleButton.textContent = opts.showPaletteOnly ? opts.togglePaletteMoreText : opts.togglePaletteLessText;\n    toggleButton.addEventListener('click', e => {\n      e.stopPropagation();\n      e.preventDefault();\n\n      opts.showPaletteOnly = !opts.showPaletteOnly;\n\n      // To make sure the Picker area is drawn on the right, next to the\n      // Palette area (and not below the palette), first move the Palette\n      // to the left to make space for the picker, plus 5px extra.\n      // The 'applyOptions' function puts the whole container back into place\n      // and takes care of the button-text and the sp-palette-only CSS class.\n      if (!opts.showPaletteOnly && !flat) {\n        container.style.left = '-=' + (outerWidthWithMargin(pickerContainer) + 5);\n      }\n      applyOptions();\n    });\n\n    draggable(alphaSlider, function (dragX, dragY, e) {\n      currentAlpha = (dragX / alphaWidth);\n      isEmpty = false;\n      if (e.shiftKey) {\n        currentAlpha = Math.round(currentAlpha * 10) / 10;\n      }\n\n      move();\n    }, dragStart, dragStop);\n\n    draggable(slider, function (dragX, dragY) {\n      currentHue = dragY / slideHeight;\n      isEmpty = false;\n      if (!opts.showAlpha) {\n        currentAlpha = 1;\n      }\n      move();\n    }, dragStart, dragStop);\n\n    draggable(dragger, function (dragX, dragY, e) {\n\n      // shift+drag should snap the movement to either the x or y axis.\n      if (!e.shiftKey) {\n        shiftMovementDirection = null;\n      } else if (!shiftMovementDirection) {\n        const oldDragX = currentSaturation * dragWidth;\n        const oldDragY = dragHeight - (currentValue * dragHeight);\n        const furtherFromX = Math.abs(dragX - oldDragX) > Math.abs(dragY - oldDragY);\n\n        shiftMovementDirection = furtherFromX ? 'x' : 'y';\n      }\n\n      const setSaturation = !shiftMovementDirection || shiftMovementDirection === 'x';\n      const setValue = !shiftMovementDirection || shiftMovementDirection === 'y';\n\n      if (setSaturation) {\n        currentSaturation = (dragX / dragWidth);\n      }\n      if (setValue) {\n        currentValue = ((dragHeight - dragY) / dragHeight);\n      }\n\n      isEmpty = false;\n      if (!opts.showAlpha) {\n        currentAlpha = 1;\n      }\n\n      move();\n\n    }, dragStart, dragStop);\n\n    if (!!initialColor) {\n      set(initialColor);\n\n      // In case color was black - update the preview UI and set the format\n      // since the set function will not run (default color is black).\n      updateUI();\n      currentPreferredFormat = tinycolor(initialColor).getFormat() as SpectrumColorFormat || opts.preferredFormat;\n      addColorToSelectionPalette(initialColor);\n    } else if (initialColor === '') {\n      set(initialColor);\n      updateUI();\n    } else {\n      updateUI();\n    }\n\n    if (flat) {\n      show();\n    }\n\n    function paletteElementClick(e: Event) {\n      // @ts-ignore\n      if (e.data && e.data.ignore) {\n        const el = (e.target as HTMLElement).closest('.sp-thumb-el') as HTMLElement | null;\n        set(el?.dataset?.color || '');\n        move();\n      } else {\n        const el = (e.target as HTMLElement).closest('.sp-thumb-el') as HTMLElement | null;\n        set(el?.dataset?.color || '');\n        move();\n\n        // If the picker is going to close immediately, a palette selection\n        // is a change.  Otherwise, it's a move only.\n        if (opts.hideAfterPaletteSelect) {\n          updateOriginalInput(true);\n          hide();\n        } else {\n          updateOriginalInput();\n        }\n      }\n\n      return false;\n    }\n\n    const paletteEvents = ['click', 'touchstart'];\n\n    for (const paletteEvent of paletteEvents) {\n      eventDelegate(paletteContainer, paletteEvent, '.sp-thumb-el', paletteElementClick);\n      eventDelegate(initialColorContainer, paletteEvent, '.sp-thumb-el:nth-child(1)', paletteElementClick, { ignore: true });\n    }\n  }\n\n  function updateSelectionPaletteFromStorage() {\n    if (localStorageKey) {\n      // Migrate old palettes over to new format.  May want to remove this eventually.\n      try {\n        const localStorage = window.localStorage;\n        const oldPalette = localStorage[localStorageKey].split(',#');\n        if (oldPalette.length > 1) {\n          delete localStorage[localStorageKey];\n\n          for (const c of oldPalette) {\n            addColorToSelectionPalette(c);\n          }\n        }\n      } catch (e) {\n      }\n\n      try {\n        selectionPalette = window.localStorage[localStorageKey].split(';');\n      } catch (e) {\n      }\n    }\n  }\n\n  function addColorToSelectionPalette(color: ColorInput) {\n    if (showSelectionPalette) {\n      const rgb = tinycolor(color).toRgbString();\n\n      if (!paletteLookup[rgb] && !selectionPalette.includes(rgb)) {\n        selectionPalette.push(rgb);\n        while (selectionPalette.length > maxSelectionSize) {\n          selectionPalette.shift();\n        }\n      }\n\n      if (localStorageKey) {\n        try {\n          window.localStorage[localStorageKey] = selectionPalette.join(';');\n        } catch (e) {\n        }\n      }\n    }\n  }\n\n  function getUniqueSelectionPalette() {\n    var unique = [];\n    if (opts.showPalette) {\n      for (var i = 0; i < selectionPalette.length; i++) {\n        var rgb = tinycolor(selectionPalette[i]).toRgbString();\n\n        if (!paletteLookup[rgb]) {\n          unique.push(selectionPalette[i]);\n        }\n      }\n    }\n\n    return unique.reverse().slice(0, opts.maxSelectionSize);\n  }\n\n  function drawPalette() {\n\n    const currentColor = get();\n\n    const html = paletteArray.map((palette, i) => {\n      return paletteTemplate(palette, currentColor, 'sp-palette-row sp-palette-row-' + i, opts);\n    });\n\n    updateSelectionPaletteFromStorage();\n\n    if (selectionPalette) {\n      html.push(paletteTemplate(getUniqueSelectionPalette(), currentColor, 'sp-palette-row sp-palette-row-selection', opts));\n    }\n\n    paletteContainer.innerHTML = html.join('');\n  }\n\n  function drawInitial() {\n    if (opts.showInitial) {\n      const initial = colorOnShow;\n      const current = get();\n      initialColorContainer.innerHTML = paletteTemplate([initial, current], current, 'sp-palette-row-initial', opts);\n    }\n  }\n\n  function dragStart() {\n    if (dragHeight <= 0 || dragWidth <= 0 || slideHeight <= 0) {\n      reflow();\n    }\n    isDragging = true;\n    addClass(container, draggingClass);\n    shiftMovementDirection = null;\n\n    emit(boundElement, 'dragstart', { color: get() });\n  }\n\n  function dragStop() {\n    isDragging = false;\n    removeClass(container, draggingClass);\n    emit(boundElement, 'dragstop', { color: get() });\n  }\n\n  function setFromTextInput(value: string) {\n    if (abortNextInputChange) {\n      abortNextInputChange = false;\n      return;\n    }\n    if ((value === null || value === '') && allowEmpty) {\n      set('');\n      move();\n      updateOriginalInput();\n    } else {\n      const tiny = tinycolor(value);\n      if (tiny.isValid()) {\n        set(tiny);\n        move();\n        updateOriginalInput();\n      } else {\n        textInput.classList.add('sp-validation-error');\n      }\n    }\n  }\n\n  function toggle() {\n    if (visible) {\n      hide();\n    } else {\n      show();\n    }\n  }\n\n  function show() {\n    if (visible) {\n      reflow();\n      return;\n    }\n\n    const event = emit(boundElement, 'beforeShow', { color: get() });\n\n    if (callbacks.beforeShow(event) === false || event.defaultPrevented) {\n      return;\n    }\n\n    hideAll();\n    visible = true;\n\n    doc.addEventListener('keydown', onkeydown);\n    doc.addEventListener('click', clickout);\n    window.addEventListener('resize', resize);\n    replacer?.classList.add('sp-active');\n    container.classList.remove('sp-hidden');\n\n    reflow();\n    updateUI();\n\n    colorOnShow = get();\n\n    drawInitial();\n\n    const e = emit(boundElement, 'show', { color: colorOnShow });\n    callbacks.show(e);\n  }\n\n  function onkeydown(e: KeyboardEvent) {\n    // Close on ESC\n    if (e.keyCode === 27) {\n      hide();\n    }\n  }\n\n  function clickout(e: MouseEvent) {\n    // Return on right click.\n    if (e.button == 2) {\n      return;\n    }\n\n    // If a drag event was happening during the mouseup, don't hide\n    // on click.\n    if (isDragging) {\n      return;\n    }\n\n    if (clickoutFiresChange) {\n      updateOriginalInput(true);\n    } else {\n      revert();\n    }\n    hide();\n  }\n\n  function hide() {\n    // Return if hiding is unnecessary\n    if (!visible || flat) {\n      return;\n    }\n    visible = false;\n\n    doc.removeEventListener('keydown', onkeydown);\n    doc.removeEventListener('click', clickout);\n    window.removeEventListener('resize', resize);\n\n    replacer?.classList.remove('sp-active');\n    container.classList.add('sp-hidden');\n\n    const event = emit(boundElement, 'hide', { color: get() });\n    callbacks.hide(event);\n  }\n\n  function revert() {\n    set(colorOnShow, true);\n    updateOriginalInput(true);\n  }\n\n  function set(color: ColorInput, ignoreFormatChange: boolean = false) {\n    if (tinycolor.equals(color, get())) {\n      // Update UI just in case a validation error needs\n      // to be cleared.\n      updateUI();\n      return;\n    }\n\n    var newColor, newHsv;\n    if ((!color || color === undefined) && allowEmpty) {\n      isEmpty = true;\n    } else {\n      isEmpty = false;\n      newColor = tinycolor(color);\n      newHsv = newColor.toHsv();\n\n      currentHue = (newHsv.h % 360) / 360;\n      currentSaturation = newHsv.s;\n      currentValue = newHsv.v;\n      currentAlpha = newHsv.a;\n    }\n    updateUI();\n\n    if (newColor && newColor.isValid() && !ignoreFormatChange) {\n      currentPreferredFormat = opts.preferredFormat || newColor.getFormat() as SpectrumColorFormat;\n    }\n  }\n\n  function get(opts: any = {}): Instance | '' {\n    if (allowEmpty && isEmpty) {\n      return '';\n    }\n\n    return tinycolor.fromRatio({\n      h: currentHue,\n      s: currentSaturation,\n      v: currentValue,\n      a: Math.round(currentAlpha * 1000) / 1000,\n      // @ts-ignore\n    }, { format: opts.format || currentPreferredFormat });\n  }\n\n  function isValid() {\n    return !textInput.classList.contains('sp-validation-error');\n  }\n\n  function move() {\n    updateUI();\n\n    const event = emit(boundElement, 'move', { color: get() });\n    callbacks.move(event);\n  }\n\n  function updateUI() {\n\n    textInput.classList.remove('sp-validation-error');\n\n    updateHelperLocations();\n\n    // Update dragger background color (gradients take care of saturation and value).\n    const flatColor = tinycolor.fromRatio({ h: currentHue, s: 1, v: 1 });\n    dragger.style.backgroundColor = flatColor.toHexString();\n\n    // Get a format that alpha will be included in (hex and names ignore alpha)\n    let format = currentPreferredFormat;\n    if (currentAlpha < 1 && !(currentAlpha === 0 && format === 'name')) {\n      if (format === 'hex' || format === 'hex3' || format === 'hex6' || format === 'name') {\n        format = 'rgb';\n      }\n    }\n\n    let realColor = get({ format }),\n      displayColor = '';\n\n    //reset background info for preview element\n    if (previewElement) {\n      previewElement.classList.remove('sp-clear-display');\n      previewElement.style.backgroundColor = 'transparent';\n    }\n\n    if (realColor === '') {\n      // Update the replaced elements background with icon indicating no color selection\n      previewElement?.classList.add('sp-clear-display');\n    } else {\n      const realHex = realColor.toHexString();\n      const realRgb = realColor.toRgbString();\n\n      if (previewElement) {\n        // Update the replaced elements background color (with actual selected color)\n        if (realColor.getAlpha() === 1) {\n          previewElement.style.backgroundColor = realRgb;\n        } else {\n          previewElement.style.backgroundColor = 'transparent';\n          previewElement.style.filter = realColor.toFilter();\n        }\n      }\n\n      if (opts.showAlpha) {\n        const rgb = realColor.toRgb();\n        rgb.a = 0;\n        const realAlpha = tinycolor(rgb).toRgbString();\n\n        alphaSliderInner.style.background = `linear-gradient(to right, ${realAlpha}, ${realHex})`;\n      }\n\n      displayColor = realColor.toString(format);\n    }\n\n    // Update the text entry input as it changes happen\n    if (opts.showInput) {\n      textInput.value = displayColor;\n    }\n    (boundElement as HTMLInputElement).value = displayColor;\n    if (opts.type == 'text' || opts.type == 'component') {\n      const color = realColor;\n      if (color && colorizeElement) {\n        const textColor = (color.isLight() || color.getAlpha() < 0.4) ? 'black' : 'white';\n        colorizeElement.style.backgroundColor = color.toRgbString();\n        colorizeElement.style.color = textColor;\n      } else if (colorizeElement) {\n        colorizeElement.style.backgroundColor = colorizeElementInitialBackground;\n        colorizeElement.style.color = colorizeElementInitialColor;\n      }\n    }\n\n    if (opts.showPalette) {\n      drawPalette();\n    }\n\n    drawInitial();\n  }\n\n  function updateHelperLocations() {\n    if (allowEmpty && isEmpty) {\n      //if selected color is empty, hide the helpers\n      alphaSlideHelper.style.display = 'none';\n      slideHelper.style.display = 'none';\n      dragHelper.style.display = 'none';\n    } else {\n      //make sure helpers are visible\n      alphaSlideHelper.style.display = 'block';\n      slideHelper.style.display = 'block';\n      dragHelper.style.display = 'block';\n\n      // Where to show the little circle in that displays your current selected color\n      let dragX = currentSaturation * dragWidth;\n      let dragY = dragHeight - (currentValue * dragHeight);\n      dragX = Math.max(\n        -dragHelperHeight,\n        Math.min(dragWidth - dragHelperHeight, dragX - dragHelperHeight),\n      );\n      dragY = Math.max(\n        -dragHelperHeight,\n        Math.min(dragHeight - dragHelperHeight, dragY - dragHelperHeight),\n      );\n      dragHelper.style.top = dragY + 'px';\n      dragHelper.style.left = dragX + 'px';\n\n      const alphaX = currentAlpha * alphaWidth;\n      alphaSlideHelper.style.left = (alphaX - (alphaSlideHelperWidth / 2)) + 'px';\n\n      // Where to show the bar that displays your current selected hue\n      const slideY = (currentHue) * slideHeight;\n      slideHelper.style.top = (slideY - slideHelperHeight) + 'px';\n    }\n  }\n\n  function updateOriginalInput(fireCallback = false) {\n    let color = get(),\n      displayColor = '',\n      hasChanged = !tinycolor.equals(color, colorOnShow);\n\n    if (color) {\n      displayColor = color.toString(currentPreferredFormat);\n      // Update the selection palette with the current color\n      addColorToSelectionPalette(color);\n    }\n\n    if (fireCallback && hasChanged) {\n      // we trigger the change event or input, but the input change event is also binded\n      // to some spectrum processing, that we do no need\n      abortNextInputChange = true;\n      const event = emit(boundElement, 'change', { color });\n      callbacks.change(event);\n    }\n  }\n\n  function reflow() {\n    if (!visible) {\n      return; // Calculations would be useless and wouldn't be reliable anyways\n    }\n\n    dragWidth = dragger.getBoundingClientRect().width;\n    dragHeight = dragger.getBoundingClientRect().height;\n\n    dragHelperHeight = dragHelper.getBoundingClientRect().height;\n    slideWidth = slider.getBoundingClientRect().width;\n    slideHeight = slider.getBoundingClientRect().height;\n    slideHelperHeight = slideHelper.getBoundingClientRect().height;\n    alphaWidth = alphaSlider.getBoundingClientRect().width;\n    alphaSlideHelperWidth = alphaSlideHelper.getBoundingClientRect().width;\n\n    if (!flat) {\n      container.style.position = 'absolute';\n\n      if (opts.offset) {\n        setElementOffset(container, opts.offset);\n      } else {\n        setElementOffset(container, getOffset(container, offsetElement as HTMLElement));\n      }\n    }\n\n    updateHelperLocations();\n\n    if (opts.showPalette) {\n      drawPalette();\n    }\n\n    emit(boundElement, 'reflow');\n  }\n\n  function destroy() {\n    delete boundElement.style.display;\n    boundElement.classList.remove('spectrum', 'with-add-on', 'sp-colorize');\n    offsetElement.removeEventListener('click', offsetElementStart);\n    offsetElement.removeEventListener('touchstart', offsetElementStart);\n    container.remove();\n    replacer?.remove();\n    if (colorizeElement) {\n      colorizeElement.style.backgroundColor = colorizeElementInitialBackground;\n      colorizeElement.style.color = colorizeElementInitialColor;\n    }\n    const originalInputContainer = boundElement.closest('.sp-original-input-container');\n    if (originalInputContainer) {\n      originalInputContainer.after(boundElement);\n      originalInputContainer.remove();\n    }\n    spectrums[spect.id] = null;\n  }\n\n  function option(optionName: string | undefined = undefined, optionValue: any = undefined) {\n    if (optionName === undefined) {\n      return Object.assign({}, opts);\n    }\n    if (optionValue === undefined) {\n      return opts[optionName];\n    }\n\n    opts[optionName] = optionValue;\n\n    if (optionName === 'preferredFormat') {\n      currentPreferredFormat = opts.preferredFormat;\n    }\n    applyOptions();\n  }\n\n  function enable() {\n    disabled = false;\n    (boundElement as HTMLInputElement).disabled = false;\n    offsetElement.classList.remove('sp-disabled');\n  }\n\n  function disable() {\n    hide();\n    disabled = true;\n    (boundElement as HTMLInputElement).disabled = true;\n    offsetElement.classList.add('sp-disabled');\n  }\n\n  function setOffset(coord: OffsetCSSOptions) {\n    opts.offset = coord;\n    reflow();\n  }\n\n  initialize();\n\n  let spect = {\n    id: 0,\n    show: show,\n    hide: hide,\n    toggle: toggle,\n    reflow: reflow,\n    option: option,\n    enable: enable,\n    disable: disable,\n    offset: setOffset,\n    set: function (c: ColorInput) {\n      set(c);\n      updateOriginalInput();\n    },\n    get: get,\n    destroy: destroy,\n    container: container,\n  };\n\n  spect.id = spectrums.push(spect) - 1;\n\n  return spect;\n}\n\n/**\n * checkOffset - get the offset below/above and left/right element depending on screen position\n * Thanks https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.datepicker.js\n */\nfunction getOffset(picker: HTMLElement, input: HTMLElement) {\n  const extraY = 0;\n  const dpWidth = picker.offsetWidth;\n  const dpHeight = picker.offsetHeight;\n  const inputHeight = input.offsetHeight;\n  const doc = picker.ownerDocument;\n  const docElem = doc.documentElement;\n  const viewWidth = docElem.clientWidth + window.pageXOffset;\n  const viewHeight = docElem.clientHeight + window.pageYOffset;\n  const offset = getElementOffset(input);\n  let offsetLeft = offset.left;\n  let offsetTop = offset.top;\n\n  offsetTop += inputHeight;\n\n  offsetLeft -=\n    Math.min(offsetLeft, (offsetLeft + dpWidth > viewWidth && viewWidth > dpWidth) ?\n      Math.abs(offsetLeft + dpWidth - viewWidth) : 0);\n\n  offsetTop -=\n    Math.min(offsetTop, ((offsetTop + dpHeight > viewHeight && viewHeight > dpHeight) ?\n      Math.abs(dpHeight + inputHeight - extraY) : extraY));\n\n  return {\n    top: offsetTop,\n    // bottom: offset.bottom,\n    left: offsetLeft,\n    // right: offset.right,\n    // width: offset.width,\n    // height: offset.height\n  };\n}\n\n/**\n * noop - do nothing\n */\nfunction noop() {\n\n}\n\n/**\n * Create a function bound to a given object\n * Thanks to underscore.js\n */\nfunction bind(func: Function, obj: object) {\n  const slice = Array.prototype.slice;\n  const args = slice.call(arguments, 2);\n  return function () {\n    return func.apply(obj, args.concat(slice.call(arguments)));\n  };\n}\n\n/**\n * Lightweight drag helper.  Handles containment within the element, so that\n * when dragging, the x is within [0,element.width] and y is within [0,element.height]\n */\nfunction draggable(\n  element: HTMLElement,\n  onmove: (x: number, y: number, e: DragEvent) => void,\n  onstart: (x: number, y: number, e: DragEvent) => void,\n  onstop: (x: number, y: number, e: DragEvent) => void,\n) {\n  onmove = onmove || noop;\n  onstart = onstart || noop;\n  onstop = onstop || noop;\n  const doc = document;\n  let dragging = false;\n  let offset: OffsetCSSOptions = {};\n  let maxHeight = 0;\n  let maxWidth = 0;\n  const hasTouch = ('ontouchstart' in window);\n\n  const duringDragEvents: { [P in keyof ElementEventMap]?: Function; } = {};\n  duringDragEvents['selectstart'] = prevent;\n  duringDragEvents['dragstart'] = prevent;\n  duringDragEvents['touchmove'] = move;\n  duringDragEvents['mousemove'] = move;\n  duringDragEvents['touchend'] = stop;\n  duringDragEvents['mouseup'] = stop;\n\n  function prevent(e: Event) {\n    if (e.stopPropagation) {\n      e.stopPropagation();\n    }\n    if (e.preventDefault) {\n      e.preventDefault();\n    }\n    e.returnValue = false;\n  }\n\n  function move(e: TouchEvent | MouseEvent) {\n    if (dragging) {\n      const t0 = 'touches' in e && e.touches[0];\n      const pageX = t0 && t0.pageX || (e as MouseEvent).pageX;\n      const pageY = t0 && t0.pageY || (e as MouseEvent).pageY;\n\n      const dragX = Math.max(0, Math.min(pageX - offset.left, maxWidth));\n      const dragY = Math.max(0, Math.min(pageY - offset.top, maxHeight));\n\n      if (hasTouch) {\n        // Stop scrolling in iOS\n        prevent(e);\n      }\n\n      onmove.apply(element, [dragX, dragY, e]);\n    }\n  }\n\n  function start(e: TouchEvent | MouseEvent) {\n    const rightclick = (e.which) ? (e.which == 3) : ((e as MouseEvent).button === 2);\n\n    if (!rightclick && !dragging) {\n      if (onstart.apply(element, arguments) !== false) {\n        dragging = true;\n        maxHeight = element.getBoundingClientRect().height;\n        maxWidth = element.getBoundingClientRect().width;\n        offset = getElementOffset(element);\n\n        for (const eventName in duringDragEvents) {\n          doc.addEventListener(eventName, duringDragEvents[eventName]);\n        }\n\n        doc.body.classList.add('sp-dragging');\n\n        move(e);\n\n        prevent(e);\n      }\n    }\n  }\n\n  function stop() {\n    if (dragging) {\n      for (const eventName in duringDragEvents) {\n        doc.removeEventListener(eventName, duringDragEvents[eventName]);\n      }\n      doc.body.classList.remove('sp-dragging');\n\n      // Wait a tick before notifying observers to allow the click event\n      // to fire in Chrome.\n      setTimeout(function () {\n        onstop.apply(element, arguments);\n      }, 0);\n    }\n    dragging = false;\n  }\n\n  element.addEventListener('touchstart', start);\n  element.addEventListener('mousedown', start);\n}\n\nexport default class Spectrum {\n  private spectrum: any;\n  public ele: HTMLInputElement;\n  public options: Partial<SpectrumOptions>;\n  public eventListeners: { [event: string]: EventListener[] } = {};\n\n  static defaultOptions = defaultOpts;\n  static draggable = draggable;\n  static localization: { [locale: string]: SpectrumLang } = {};\n  static palette: string[][] = [];\n\n  static create(selector: string | HTMLElement, options: Partial<SpectrumOptions> = {}): Spectrum {\n    const ele = this.wrap(selector);\n\n    if (!ele) {\n      let msg = 'Unable to find element';\n\n      if (typeof selector === 'string') {\n        msg += ' - Selector: ' + selector;\n      }\n      throw Error(msg);\n    }\n\n    return new this(ele, options);\n  }\n\n  static createIfExists(selector: string | HTMLElement, options: Partial<SpectrumOptions> = {}): Spectrum|null {\n    const ele = this.wrap(selector);\n\n    if (!ele) {\n      return null;\n    }\n\n    return new this(ele, options);\n  }\n\n  static getInstance(selector: string | HTMLElement, options: Partial<SpectrumOptions> = {}): Spectrum {\n    const ele = this.wrap(selector);\n\n    // @ts-ignore\n    return ele.__spectrum = ele.__spectrum || this.createIfExists(ele, options);\n  }\n\n  static hasInstance(selector: string | HTMLElement) {\n    const ele = this.wrap(selector);\n\n    // @ts-ignore\n    return ele.__spectrum !== undefined;\n  }\n\n  static createMultiple(\n    selector: string | NodeListOf<HTMLElement>,\n    options: Partial<SpectrumOptions> = {}\n  ) {\n    const instances: Spectrum[] = [];\n\n    this.wrapList(selector).forEach((ele) => {\n      instances.push(this.create(ele, options));\n    });\n\n    return instances;\n  }\n\n  static getInstanceMultiple(\n    selector: string | JQuery | NodeListOf<HTMLElement>,\n    options: Partial<SpectrumOptions> = {},\n  ) {\n    const instances: Spectrum[] = [];\n\n    this.wrapList(selector).forEach((ele) => {\n      instances.push(this.getInstance(ele, options));\n    });\n\n    return instances;\n  }\n\n  private static wrap(selector: string | JQuery | HTMLElement) {\n    if (typeof selector === 'string') {\n      return document.querySelector<HTMLElement>(selector);\n    } else if ((selector as JQuery).jquery) {\n      return selector[0];\n    } else {\n      return selector;\n    }\n  }\n\n  private static wrapList(selector: string | JQuery | NodeListOf<HTMLElement>): Array<HTMLElement> {\n    if (typeof selector === 'string') {\n      return Array.from(document.querySelectorAll<HTMLElement>(selector));\n    } else if ((selector as JQuery).jquery) {\n      return (selector as JQuery).toArray();\n    } else {\n      return Array.from(selector);\n    }\n  }\n\n  static locale(locale: string, localization: SpectrumLang) {\n    this.localization[locale] = localization;\n    return this;\n  }\n\n  static registerJQuery($: JQueryStatic) {\n    registerJQueryPlugin($);\n  }\n\n  constructor(ele: HTMLInputElement, options: Partial<SpectrumOptions> = {}) {\n    this.spectrum = spectrum(ele, options);\n    this.ele = ele;\n    this.options = options;\n  }\n\n  get id(): number {\n    return this.spectrum.id;\n  }\n\n  get container(): HTMLElement {\n    // @ts-ignore\n    if (!this.ele.__spectrum) {\n      return this.ele;\n    }\n\n    return this.spectrum.container;\n  }\n\n  show() {\n    this.spectrum.show();\n    return this;\n  }\n\n  hide() {\n    this.spectrum.hide();\n    return this;\n  }\n\n  toggle() {\n    this.spectrum.toggle();\n    return this;\n  }\n\n  reflow() {\n    this.spectrum.reflow();\n    return this;\n  }\n\n  option(optionName: string | undefined = undefined, optionValue: any = undefined): any {\n    return this.spectrum.option(optionName, optionValue);\n  }\n\n  enable() {\n    this.spectrum.enable();\n    return this;\n  }\n\n  disable() {\n    this.spectrum.disable();\n    return this;\n  }\n\n  offset(coord: OffsetCSSOptions) {\n    this.spectrum.offset(coord);\n    return this;\n  }\n\n  set(color: ColorInput, ignoreFormatChange: boolean = false) {\n    this.spectrum.set(color, ignoreFormatChange);\n    return this;\n  }\n\n  get(): ColorInput {\n    return this.spectrum.get();\n  }\n\n  destroy() {\n    this.destroyInnerObject();\n    // @ts-ignore\n    delete this.ele.__spectrum;\n    return this;\n  }\n\n  rebuild(options?: Partial<SpectrumOptions>) {\n    this.destroyInnerObject();\n    if (options) {\n      this.options = Object.assign({}, this.options, options);\n    }\n    this.spectrum = spectrum(this.ele, this.options);\n    return this;\n  }\n\n  private destroyInnerObject() {\n    this.spectrum.destroy();\n    this.off();\n  }\n\n  listeners(eventName: string) {\n    return this.eventListeners[eventName] || [];\n  }\n\n  on(\n    eventName: string,\n    listener: SpectrumListener,\n    options: AddEventListenerOptions|undefined = undefined\n  ): Function {\n    this.ele.addEventListener(eventName, listener, options);\n\n    this.eventListeners[eventName] = this.eventListeners[eventName] || [];\n\n    this.eventListeners[eventName].push(listener);\n\n    return () => {\n      this.off(eventName, listener);\n    };\n  }\n\n  once(\n    eventName: string,\n    listener: SpectrumListener,\n    options: AddEventListenerOptions|undefined = undefined\n  ): Function {\n    const cancel = this.on(\n      eventName,\n      (e) => {\n        listener(e);\n\n        cancel();\n      },\n      options\n    );\n\n    return cancel;\n  }\n\n  off(eventName: string = undefined, listener: EventListener|SpectrumListener|undefined = undefined) {\n    if (eventName && !this.eventListeners[eventName]) {\n      return;\n    }\n\n    if (!eventName) {\n      this.eventListeners = {};\n      return;\n    }\n\n    if (listener) {\n      this.eventListeners[eventName] = this.eventListeners[eventName]\n        .filter((l) => l === listener);\n\n      this.ele.removeEventListener(eventName, listener);\n    } else {\n      for (const listener of this.eventListeners[eventName]) {\n        this.ele.removeEventListener(eventName, listener);\n      }\n\n      this.eventListeners[eventName] = [];\n    }\n  }\n}\n\n// @ts-ignore\nconst jQuery = window.jQuery;\n\nif (jQuery) {\n  registerJQueryPlugin(jQuery);\n}\n\nfunction registerJQueryPlugin($: any) {\n  // @ts-ignore\n  $.fn.spectrum = function (action: string | undefined | Partial<SpectrumOptions> = undefined, ...args) {\n    if (typeof action === \"string\") {\n      let returnValue = this;\n      this.each(function () {\n        const spect = this.__spectrum;\n\n        if (spect) {\n          const method = spect[action];\n\n          if (!method) {\n            throw new Error(\"Spectrum: no such method: '\" + action + \"'\");\n          }\n\n          if (action === \"get\") {\n            returnValue = spect.get();\n          } else if (action === \"container\") {\n            returnValue = $(spect.container);\n          } else if (action === \"option\") {\n            returnValue = spect.option.apply(spect, args);\n          } else if (action === \"destroy\") {\n            spect.destroy();\n          } else {\n            spect[action](...args);\n          }\n        }\n      });\n\n      return returnValue;\n    }\n\n    // Initializing a new instance of spectrum\n    return this.each(function () {\n      const options: SpectrumOptions = $.extend({}, $(this).data(), action);\n      // Infer default type from input params and deprecated options\n      if (!$(this).is('input')) {\n        options.type = 'color';\n      } else if (options.type == \"flat\") {\n        options.type = 'flat';\n      } else if ($(this).attr('type') == 'color') {\n        options.type = 'color';\n      } else {\n        options.type = options.type || 'component';\n      }\n\n      if (Spectrum.hasInstance(this)) {\n        const sp = Spectrum.getInstance(this);\n\n        sp.options = options;\n        sp.rebuild();\n      } else {\n        Spectrum.getInstance(this, options);\n      }\n    });\n  };\n\n  $.fn.spectrum.load = true;\n  $.fn.spectrum.loadOpts = {};\n  $.fn.spectrum.draggable = draggable;\n  $.fn.spectrum.defaults = defaultOpts;\n  $.fn.spectrum.localization = Spectrum.localization;\n  $.fn.spectrum.palette = [];\n\n  $.fn.spectrum.processNativeColorInputs = function () {\n    const colorInputs = $(\"input[type=color]\");\n    if (colorInputs.length) {\n      colorInputs.spectrum({\n        preferredFormat: \"hex6\"\n      });\n    }\n  };\n}\n"],"names":["insertAfter","existingNode","newNode","parentNode","insertBefore","nextSibling","wrap","ele","wrapper","replaceWith","appendChild","outerWidthWithMargin","style","window","getComputedStyle","getBoundingClientRect","width","parseFloat","marginLeft","marginRight","html","doc","document","div","createElement","innerHTML","children","camelize","str","replace","word","index","toLowerCase","toUpperCase","throttle","func","wait","debounce","undefined","timeout","context","args","arguments","throttler","apply","clearTimeout","setTimeout","addClass","className","classes","split","filter","c","length","classList","add","removeClass","remove","toggleClass","state","toggle","emit","eventName","detail","event","CustomEvent","cancelable","bubbles","dispatchEvent","eventDelegate","selector","listener","payload","addEventListener","e","target","closest","data","Object","assign","setElementOffset","elem","options","curPosition","curTop","curLeft","calculatePosition","position","curElem","props","curOffset","getElementOffset","curCSSTop","top","curCSSLeft","left","indexOf","getElementPosition","using","call","k","el","box","docElem","documentElement","pageYOffset","clientTop","pageXOffset","clientLeft","marginTop","parseInt","tinycolor","defaultOpts","beforeShow","noop","move","change","show","hide","color","type","showInput","allowEmpty","showButtons","clickoutFiresChange","showInitial","showPalette","showPaletteOnly","hideAfterPaletteSelect","togglePaletteOnly","showSelectionPalette","localStorageKey","appendTo","maxSelectionSize","locale","cancelText","chooseText","togglePaletteMoreText","togglePaletteLessText","clearText","noColorSelectedText","preferredFormat","containerClassName","replacerClassName","showAlpha","theme","palette","selectionPalette","disabled","offset","spectrums","replaceInput","join","markup","paletteTemplate","p","opts","i","current","tiny","toHsl","l","equals","formattedString","toString","swatchStyle","toRgbString","push","hideAll","instanceOptions","element","navigator","language","parts","map","Spectrum","localization","dataset","callbacks","bind","spectrum","flat","resize","reflow","visible","isDragging","dragWidth","dragHeight","dragHelperHeight","slideHeight","slideWidth","alphaWidth","alphaSlideHelperWidth","slideHelperHeight","currentHue","currentSaturation","currentValue","currentAlpha","paletteArray","paletteLookup","slice","draggingClass","abortNextInputChange","shiftMovementDirection","ownerDocument","container","body","boundElement","pickerContainer","querySelector","dragger","dragHelper","slider","slideHelper","alphaSliderInner","alphaSlider","alphaSlideHelper","textInput","paletteContainer","initialColorContainer","cancelButton","clearButton","chooseButton","toggleButton","isInput","nodeName","isInputTypeColor","getAttribute","shouldReplace","replacer","offsetElement","previewElement","initialColor","value","colorOnShow","currentPreferredFormat","isEmpty","originalInputContainer","colorizeElement","colorizeElementInitialColor","colorizeElementInitialBackground","thisId","labels","querySelectorAll","forEach","label","preventDefault","applyOptions","textContent","Array","isArray","j","rgb","keys","offsetElementStart","stopPropagation","matches","initialize","inputStyle","cssProp","display","addOn","offsetHeight","borderRadius","border","before","backgroundColor","after","parentElement","append","updateSelectionPaletteFromStorage","disable","input","setFromTextInput","keyCode","revert","setAttribute","updateOriginalInput","isValid","draggable","dragX","dragY","shiftKey","Math","round","dragStart","dragStop","oldDragX","oldDragY","furtherFromX","abs","setSaturation","setValue","set","updateUI","getFormat","addColorToSelectionPalette","paletteElementClick","ignore","paletteEvents","paletteEvent","localStorage","oldPalette","includes","shift","getUniqueSelectionPalette","unique","reverse","drawPalette","currentColor","get","drawInitial","initial","defaultPrevented","onkeydown","clickout","button","removeEventListener","ignoreFormatChange","newColor","newHsv","toHsv","h","s","v","a","fromRatio","format","contains","updateHelperLocations","flatColor","toHexString","realColor","displayColor","realHex","realRgb","getAlpha","toFilter","toRgb","realAlpha","background","textColor","isLight","max","min","alphaX","slideY","fireCallback","hasChanged","height","getOffset","destroy","spect","id","option","optionName","optionValue","enable","setOffset","coord","picker","extraY","dpWidth","offsetWidth","dpHeight","inputHeight","viewWidth","clientWidth","viewHeight","clientHeight","offsetLeft","offsetTop","obj","prototype","concat","onmove","onstart","onstop","dragging","maxHeight","maxWidth","hasTouch","duringDragEvents","prevent","stop","returnValue","t0","touches","pageX","pageY","start","rightclick","which","create","msg","Error","createIfExists","getInstance","__spectrum","hasInstance","createMultiple","instances","wrapList","getInstanceMultiple","jquery","from","toArray","registerJQuery","$","registerJQueryPlugin","constructor","destroyInnerObject","rebuild","off","listeners","eventListeners","on","once","cancel","jQuery","fn","action","each","method","extend","is","attr","sp","load","loadOpts","defaults","processNativeColorInputs","colorInputs"],"sourceRoot":""}