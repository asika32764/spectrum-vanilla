{"version":3,"file":"spectrum.js","mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;;;;;;;;;;ACVA;;;;;;AAOM,SAAUA,WAAW,CAAoBC,YAAe,EAAEC,OAAgB;;EAC9E,kBAAY,CAACC,UAAU,0CAAEC,YAAY,CAACF,OAAO,EAAED,YAAY,CAACI,WAAW,CAAC;EACxE,OAAOJ,YAAY;AACrB;AAEM,SAAUG,YAAY,CAAoBH,YAAe,EAAEC,OAAgB;;EAC/E,kBAAY,CAACC,UAAU,0CAAEC,YAAY,CAACF,OAAO,EAAED,YAAY,CAAC;EAC5D,OAAOA,YAAY;AACrB;AAEM,SAAUK,IAAI,CAAoBC,GAAM,EAAEC,OAAgB;EAC9DD,GAAG,CAACE,WAAW,CAACD,OAAO,CAAC;EACxBA,OAAO,CAACE,WAAW,CAACH,GAAG,CAAC;EACxB,OAAOA,GAAG;AACZ;AAEM,SAAUI,oBAAoB,CAACJ,GAAgB;EACnD,IAAMK,KAAK,GAAGC,MAAM,CAACC,gBAAgB,CAACP,GAAG,CAAC;EAE1C,OACEA,GAAG,CAACQ,qBAAqB,EAAE,CAACC,KAAK,GACjCC,UAAU,CAACL,KAAK,CAACM,UAAU,CAAC,GAC5BD,UAAU,CAACL,KAAK,CAACO,WAAW,CAAC;AAEjC;;;;;;;;;;;;;;;;;;;;;;AC/BA;;;;;;AAOM,SAAUC,IAAI,CAACA,IAAY;EAC/B,IAAMC,GAAG,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;EACzCF,GAAG,CAACG,SAAS,GAAGJ,IAAI;EACpB,OAAOC,GAAG,CAACI,QAAQ,CAAC,CAAC,CAAC;AACxB;AAEM,SAAUC,QAAQ,CAACC,GAAW;EAClC,OAAOA,GAAG,CAACC,OAAO,CAAC,qBAAqB,EAAE,UAAUC,IAAI,EAAEC,KAAK;IAC7D,OAAOA,KAAK,KAAK,CAAC,GAAGD,IAAI,CAACE,WAAW,EAAE,GAAGF,IAAI,CAACG,WAAW,EAAE;EAC9D,CAAC,CAAC,CAACJ,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC;AACxB;AAEM,SAAUK,QAAQ,CAACC,IAAc,EAAEC,IAAY,EAAEC,QAA0C;EAA1C;IAAAA,oBAA0C;EAAA;EAC/F,IAAIC,OAAY;EAChB,OAAO;IACL;IACA,IAAMC,OAAO,GAAG,IAAI;MAAEC,IAAI,GAAGC,SAAS;IACtC,IAAMC,SAAS,GAAG;MAChBJ,OAAO,GAAG,IAAI;MACdH,IAAI,CAACQ,KAAK,CAACJ,OAAO,EAAEC,IAAI,CAAC;IAC3B,CAAC;IACD,IAAIH,QAAQ,EAAEO,YAAY,CAACN,OAAO,CAAC;IACnC,IAAID,QAAQ,IAAI,CAACC,OAAO,EAAE;MACxBA,OAAO,GAAGO,UAAU,CAACH,SAAS,EAAEN,IAAI,CAAC;;EAEzC,CAAC;AACH;AAEM,SAAUU,QAAQ,CAACtC,GAAgB,EAAEuC,SAAiB;;EAC1D,IAAMC,OAAO,GAAGD,SAAS,CAACE,KAAK,CAAC,GAAG,CAAC,CAACC,MAAM,CAAC,UAACC,CAAC;IAAK,QAAC,KAAK,EAAE;EAAR,CAAQ,CAAC;EAE5D,IAAIJ,SAAS,KAAK,EAAE,IAAIC,OAAO,CAACI,MAAM,EAAE;IACtC,SAAG,CAACC,SAAS,EAACC,GAAG,WAAIN,OAAO;;EAE9B,OAAOxC,GAAG;AACZ;AAEM,SAAU+C,WAAW,CAAC/C,GAAgB,EAAEuC,SAAiB;;EAC7D,IAAMC,OAAO,GAAGD,SAAS,CAACE,KAAK,CAAC,GAAG,CAAC,CAACC,MAAM,CAAC,UAACC,CAAC;IAAK,QAAC,KAAK,EAAE;EAAR,CAAQ,CAAC;EAC5D,IAAIJ,SAAS,KAAK,EAAE,IAAIC,OAAO,CAACI,MAAM,EAAE;IACtC,SAAG,CAACC,SAAS,EAACG,MAAM,WAAIR,OAAO;;EAEjC,OAAOxC,GAAG;AACZ;AAEM,SAAUiD,WAAW,CAACjD,GAAgB,EAChBuC,SAAiB,EACjBW,KAAsC;EAAtC;IAAAA,iBAAsC;EAAA;EAChE,IAAIA,KAAK,IAAIC,SAAS,EAAE;IACtBnD,GAAG,CAAC6C,SAAS,CAACO,MAAM,CAACb,SAAS,CAAC;GAChC,MAAM,IAAIW,KAAK,KAAK,IAAI,EAAE;IACzBZ,QAAQ,CAACtC,GAAG,EAAEuC,SAAS,CAAC;GACzB,MAAM;IACLQ,WAAW,CAAC/C,GAAG,EAAEuC,SAAS,CAAC;;EAE7B,OAAOvC,GAAG;AACZ;AAEM,SAAUqD,IAAI,CAACrD,GAAgB,EAAEsD,SAAiB,EAAEC,MAAgB;EAAhB;IAAAA,WAAgB;EAAA;EACxE,IAAMC,KAAK,GAAG,IAAIC,WAAW,CAC3BH,SAAS,EACT;IACEC,MAAM;GACP,CACF;EAEDvD,GAAG,CAAC0D,aAAa,CAACF,KAAK,CAAC;EAExB,OAAOA,KAAK;AACd;AAEM,SAAUG,aAAa,CAC3B3D,GAAgB,EAChBsD,SAAiB,EACjBM,QAAgB,EAChBC,QAAkB,EAClBC,OAAqC;EAArC;IAAAA,YAAqC;EAAA;EAErC9D,GAAG,CAAC+D,gBAAgB,CAACT,SAAS,EAAE,UAACU,CAAC;IAChC,IAAKA,CAAC,CAACC,MAAkB,CAACC,OAAO,CAACN,QAAQ,CAAC,EAAE;MAC3C;MACAI,CAAC,CAACG,IAAI,GAAGC,MAAM,CAACC,MAAM,CAAC,EAAE,EAAEL,CAAC,CAACG,IAAI,IAAI,EAAE,EAAEL,OAAO,CAAC;MAEjDD,QAAQ,CAACG,CAAC,CAAC;;EAEf,CAAC,EAAEF,OAAO,CAAC;AACb;AAIM,SAAUQ,gBAAgB,CAC9BC,IAAiB,EACjBC,OAAyB;EAEzB,IAAIC,WAAW;EACf,IAAIC,MAAM;EACV,IAAIC,OAAO;EACX,IAAIC,iBAAiB;EACrB,IAAIC,QAAQ,GAAGN,IAAI,CAAClE,KAAK,CAACwE,QAAQ;EAClC,IAAIC,OAAO,GAAGP,IAAI;EAClB,IAAIQ,KAAK,GAAqB,EAAE;EAEhC;EACA,IAAIF,QAAQ,KAAK,QAAQ,EAAE;IACzBN,IAAI,CAAClE,KAAK,CAACwE,QAAQ,GAAG,UAAU;;EAGlC,IAAIG,SAAS,GAAGC,gBAAgB,CAACH,OAAO,CAAC;EACzC,IAAII,SAAS,GAAGX,IAAI,CAAClE,KAAK,CAAC8E,GAAG;EAC9B,IAAIC,UAAU,GAAGb,IAAI,CAAClE,KAAK,CAACgF,IAAI;EAChCT,iBAAiB,GAAG,CAACC,QAAQ,KAAK,UAAU,IAAIA,QAAQ,KAAK,OAAO,KAClE,CAACK,SAAS,GAAGE,UAAU,EAAEE,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;EAE/C;EACA;EACA,IAAIV,iBAAiB,EAAE;IACrBH,WAAW,GAAGc,kBAAkB,CAACT,OAAO,CAAC;IACzCJ,MAAM,GAAGD,WAAW,CAACU,GAAG;IACxBR,OAAO,GAAGF,WAAW,CAACY,IAAI;GAE3B,MAAM;IACLX,MAAM,GAAGhE,UAAU,CAACwE,SAAS,CAAC,IAAI,CAAC;IACnCP,OAAO,GAAGjE,UAAU,CAAC0E,UAAU,CAAC,IAAI,CAAC;;EAGvC;EACA;EACA;EAEA,IAAIZ,OAAO,CAACW,GAAG,IAAI,IAAI,EAAE;IACvBJ,KAAK,CAACI,GAAG,GAAIX,OAAO,CAACW,GAAG,GAAGH,SAAS,CAACG,GAAG,GAAIT,MAAM;;EAEpD,IAAIF,OAAO,CAACa,IAAI,IAAI,IAAI,EAAE;IACxBN,KAAK,CAACM,IAAI,GAAIb,OAAO,CAACa,IAAI,GAAGL,SAAS,CAACK,IAAI,GAAIV,OAAO;;EAGxD,IAAI,OAAO,IAAIH,OAAO,EAAE;IACtBA,OAAO,CAACgB,KAAK,CAACC,IAAI,CAAClB,IAAI,EAAEQ,KAAK,CAAC;GAChC,MAAM;IACL,KAAK,IAAMW,CAAC,IAAIX,KAAK,EAAE;MACrBD,OAAO,CAACzE,KAAK,CAACqF,CAAC,CAAC,GAAGX,KAAK,CAACW,CAAC,CAAC;;;AAGjC;AAEM,SAAUT,gBAAgB,CAACU,EAAe;EAC9C,IAAMC,GAAG,GAAGD,EAAE,CAACnF,qBAAqB,EAAE;EACtC,IAAMqF,OAAO,GAAG9E,QAAQ,CAAC+E,eAAe;EACxC,OAAO;IACLX,GAAG,EAAES,GAAG,CAACT,GAAG,GAAG7E,MAAM,CAACyF,WAAW,GAAGF,OAAO,CAACG,SAAS;IACrDX,IAAI,EAAEO,GAAG,CAACP,IAAI,GAAG/E,MAAM,CAAC2F,WAAW,GAAGJ,OAAO,CAACK;GAC/C;AACH;AAEM,SAAUX,kBAAkB,CAACI,EAAe;EAC1C,SAAcA,EAAE,CAACnF,qBAAqB,EAAE;IAAvC2E,GAAG;IAAEE,IAAI,UAA8B;EACxC,SAA0B9E,gBAAgB,CAACoF,EAAE,CAAC;IAA7CQ,SAAS;IAAExF,UAAU,gBAAwB;EACpD,OAAO;IACLwE,GAAG,EAAEA,GAAG,GAAGiB,QAAQ,CAACD,SAAS,EAAE,EAAE,CAAC;IAClCd,IAAI,EAAEA,IAAI,GAAGe,QAAQ,CAACzF,UAAU,EAAE,EAAE;GACrC;AACH;;;;;;;;;;;;;ACxKA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,aAAa;AACb,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,aAAa;AACb,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB,UAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,UAAU;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe;AACf,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,WAAW;AACX;;AAEA;AACA;AACA;AACA,gBAAgB,UAAU;AAC1B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB;AACnB,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAW;AACX;;AAEA;AACA;AACA;AACA,gBAAgB,UAAU;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,WAAW;AACX,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;;AAEA;AACA;AACA;AACA,gBAAgB,UAAU;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAW;AACX;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,YAAY;AAC9B,4BAA4B,iDAAiD;AAC7E;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB,uCAAuC;AACvD,gBAAgB,wCAAwC;AACxD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,8DAA8D,WAAW;AACzE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yBAAyB,kBAAkB;AAC3C;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,2DAA2D,wBAAwB;;AAEnF;AACA;AACA,2CAA2C,wBAAwB;AACnE;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,8EAA8E,4BAA4B,iBAAiB;AAC3H,8EAA8E,2BAA2B,kBAAkB;AAC3H,qDAAqD,oDAAoD,iBAAiB;AAC1H,qDAAqD,oDAAoD,iBAAiB;AAC1H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,sBAAsB;AACxC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;;AAEA,MAAM,iBAAiB,aAAa,iBAAiB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,EAAE,cAAc,EAAE,cAAc,EAAE;AAC7D,2BAA2B,EAAE,cAAc,EAAE,cAAc,EAAE;AAC7D,2BAA2B,EAAE,cAAc,EAAE,cAAc,EAAE,cAAc,EAAE;AAC7E,2BAA2B,EAAE,cAAc,EAAE,cAAc,EAAE,cAAc,EAAE;AAC7E;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yCAAyC,SAAS,QAAQ,SAAS,QAAQ,QAAQ;AACnF;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,yCAAyC;AACzC;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;;AAEgC;;;;;;;UC7vChC;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;;;;;;;;;;;;ACAwB;AACW;AAE6B;AAa/C;AAEjB,IAAM2F,YAAY,GAAQ,EAAE;AAE5B,IAAMC,WAAW,GAAqB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","sources":["webpack://Spectrum/webpack/universalModuleDefinition","webpack://Spectrum/./src/dom.ts","webpack://Spectrum/./src/utils.ts","webpack://Spectrum/./node_modules/tinycolor2/esm/tinycolor.js","webpack://Spectrum/webpack/bootstrap","webpack://Spectrum/webpack/runtime/define property getters","webpack://Spectrum/webpack/runtime/hasOwnProperty shorthand","webpack://Spectrum/./src/index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Spectrum\"] = factory();\n\telse\n\t\troot[\"Spectrum\"] = factory();\n})(this, () => {\nreturn ","/**\r\n * Part of spectrum-vanilla project.\r\n *\r\n * @copyright  Copyright (C) 2023 __ORGANIZATION__.\r\n * @license    __LICENSE__\r\n */\r\n\r\nexport function insertAfter<T extends Element>(existingNode: T, newNode: Element): T {\r\n  existingNode.parentNode?.insertBefore(newNode, existingNode.nextSibling);\r\n  return existingNode;\r\n}\r\n\r\nexport function insertBefore<T extends Element>(existingNode: T, newNode: Element): T {\r\n  existingNode.parentNode?.insertBefore(newNode, existingNode);\r\n  return existingNode;\r\n}\r\n\r\nexport function wrap<T extends Element>(ele: T, wrapper: Element): T {\r\n  ele.replaceWith(wrapper);\r\n  wrapper.appendChild(ele);\r\n  return ele;\r\n}\r\n\r\nexport function outerWidthWithMargin(ele: HTMLElement) {\r\n  const style = window.getComputedStyle(ele);\r\n\r\n  return (\r\n    ele.getBoundingClientRect().width +\r\n    parseFloat(style.marginLeft) +\r\n    parseFloat(style.marginRight)\r\n  );\r\n}\r\n","/**\r\n * Part of spectrum-vanilla project.\r\n *\r\n * @copyright  Copyright (C) 2023 __ORGANIZATION__.\r\n * @license    __LICENSE__\r\n */\r\n\r\nexport function html(html: string) {\r\n  const div = document.createElement('div');\r\n  div.innerHTML = html;\r\n  return div.children[0];\r\n}\r\n\r\nexport function camelize(str: string): string {\r\n  return str.replace(/(?:^\\w|[A-Z]|\\b\\w)/g, function (word, index) {\r\n    return index === 0 ? word.toLowerCase() : word.toUpperCase();\r\n  }).replace(/\\s+/g, '');\r\n}\r\n\r\nexport function throttle(func: Function, wait: number, debounce: Function | undefined = undefined) {\r\n  let timeout: any;\r\n  return function () {\r\n    // @ts-ignore\r\n    const context = this, args = arguments;\r\n    const throttler = function () {\r\n      timeout = null;\r\n      func.apply(context, args);\r\n    };\r\n    if (debounce) clearTimeout(timeout);\r\n    if (debounce || !timeout) {\r\n      timeout = setTimeout(throttler, wait);\r\n    }\r\n  };\r\n}\r\n\r\nexport function addClass(ele: HTMLElement, className: string) {\r\n  const classes = className.split(' ').filter((c) => c !== '');\r\n\r\n  if (className !== '' && classes.length) {\r\n    ele.classList.add(...classes);\r\n  }\r\n  return ele;\r\n}\r\n\r\nexport function removeClass(ele: HTMLElement, className: string) {\r\n  const classes = className.split(' ').filter((c) => c !== '');\r\n  if (className !== '' && classes.length) {\r\n    ele.classList.remove(...classes);\r\n  }\r\n  return ele;\r\n}\r\n\r\nexport function toggleClass(ele: HTMLElement,\r\n                            className: string,\r\n                            state: boolean | undefined = undefined) {\r\n  if (state != undefined) {\r\n    ele.classList.toggle(className);\r\n  } else if (state === true) {\r\n    addClass(ele, className);\r\n  } else {\r\n    removeClass(ele, className);\r\n  }\r\n  return ele;\r\n}\r\n\r\nexport function emit(ele: EventTarget, eventName: string, detail: any = {}) {\r\n  const event = new CustomEvent(\r\n    eventName,\r\n    {\r\n      detail,\r\n    },\r\n  );\r\n\r\n  ele.dispatchEvent(event);\r\n\r\n  return event;\r\n}\r\n\r\nexport function eventDelegate(\r\n  ele: HTMLElement,\r\n  eventName: string,\r\n  selector: string,\r\n  listener: Function,\r\n  payload: { [name: string]: any } = {},\r\n) {\r\n  ele.addEventListener(eventName, (e) => {\r\n    if ((e.target as Element).closest(selector)) {\r\n      // @ts-ignore\r\n      e.data = Object.assign({}, e.data || {}, payload);\r\n\r\n      listener(e);\r\n    }\r\n  }, payload);\r\n}\r\n\r\nexport type OffsetCSSOptions = { top?: number, bottom?: number, left?: number, right?: number, using?: Function };\r\n\r\nexport function setElementOffset(\r\n  elem: HTMLElement,\r\n  options: OffsetCSSOptions\r\n) {\r\n  let curPosition;\r\n  let curTop;\r\n  let curLeft;\r\n  let calculatePosition;\r\n  let position = elem.style.position\r\n  let curElem = elem;\r\n  let props: OffsetCSSOptions = {};\r\n\r\n  // Set position first, in-case top/left are set even on static elem\r\n  if (position === \"static\") {\r\n    elem.style.position = \"relative\";\r\n  }\r\n\r\n  let curOffset = getElementOffset(curElem);\r\n  let curCSSTop = elem.style.top\r\n  let curCSSLeft = elem.style.left;\r\n  calculatePosition = (position === \"absolute\" || position === \"fixed\") &&\r\n    (curCSSTop + curCSSLeft).indexOf(\"auto\") > -1;\r\n\r\n  // Need to be able to calculate position if either\r\n  // top or left is auto and position is either absolute or fixed\r\n  if (calculatePosition) {\r\n    curPosition = getElementPosition(curElem);\r\n    curTop = curPosition.top;\r\n    curLeft = curPosition.left;\r\n\r\n  } else {\r\n    curTop = parseFloat(curCSSTop) || 0;\r\n    curLeft = parseFloat(curCSSLeft) || 0;\r\n  }\r\n\r\n  // if (typeof options === 'function') {\r\n  //   options = options.call(elem, Object.assign({}, curOffset)) as OffsetCSSOptions;\r\n  // }\r\n\r\n  if (options.top != null) {\r\n    props.top = (options.top - curOffset.top) + curTop;\r\n  }\r\n  if (options.left != null) {\r\n    props.left = (options.left - curOffset.left) + curLeft;\r\n  }\r\n\r\n  if (\"using\" in options) {\r\n    options.using.call(elem, props);\r\n  } else {\r\n    for (const k in props) {\r\n      curElem.style[k] = props[k];\r\n    }\r\n  }\r\n}\r\n\r\nexport function getElementOffset(el: HTMLElement) {\r\n  const box = el.getBoundingClientRect();\r\n  const docElem = document.documentElement;\r\n  return {\r\n    top: box.top + window.pageYOffset - docElem.clientTop,\r\n    left: box.left + window.pageXOffset - docElem.clientLeft\r\n  };\r\n}\r\n\r\nexport function getElementPosition(el: HTMLElement) {\r\n  const {top, left} = el.getBoundingClientRect();\r\n  const {marginTop, marginLeft} = getComputedStyle(el);\r\n  return {\r\n    top: top - parseInt(marginTop, 10),\r\n    left: left - parseInt(marginLeft, 10)\r\n  };\r\n}","// This file is autogenerated. It's used to publish ESM to npm.\n// https://github.com/bgrins/TinyColor\n// Brian Grinstead, MIT License\n\nconst trimLeft = /^\\s+/;\nconst trimRight = /\\s+$/;\n\nfunction tinycolor(color, opts) {\n  color = color ? color : \"\";\n  opts = opts || {};\n\n  // If input is already a tinycolor, return itself\n  if (color instanceof tinycolor) {\n    return color;\n  }\n  // If we are called as a function, call using new instead\n  if (!(this instanceof tinycolor)) {\n    return new tinycolor(color, opts);\n  }\n\n  var rgb = inputToRGB(color);\n  (this._originalInput = color),\n    (this._r = rgb.r),\n    (this._g = rgb.g),\n    (this._b = rgb.b),\n    (this._a = rgb.a),\n    (this._roundA = Math.round(100 * this._a) / 100),\n    (this._format = opts.format || rgb.format);\n  this._gradientType = opts.gradientType;\n\n  // Don't let the range of [0,255] come back in [0,1].\n  // Potentially lose a little bit of precision here, but will fix issues where\n  // .5 gets interpreted as half of the total, instead of half of 1\n  // If it was supposed to be 128, this was already taken care of by `inputToRgb`\n  if (this._r < 1) this._r = Math.round(this._r);\n  if (this._g < 1) this._g = Math.round(this._g);\n  if (this._b < 1) this._b = Math.round(this._b);\n\n  this._ok = rgb.ok;\n}\n\ntinycolor.prototype = {\n  isDark: function () {\n    return this.getBrightness() < 128;\n  },\n  isLight: function () {\n    return !this.isDark();\n  },\n  isValid: function () {\n    return this._ok;\n  },\n  getOriginalInput: function () {\n    return this._originalInput;\n  },\n  getFormat: function () {\n    return this._format;\n  },\n  getAlpha: function () {\n    return this._a;\n  },\n  getBrightness: function () {\n    //http://www.w3.org/TR/AERT#color-contrast\n    var rgb = this.toRgb();\n    return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\n  },\n  getLuminance: function () {\n    //http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    var rgb = this.toRgb();\n    var RsRGB, GsRGB, BsRGB, R, G, B;\n    RsRGB = rgb.r / 255;\n    GsRGB = rgb.g / 255;\n    BsRGB = rgb.b / 255;\n\n    if (RsRGB <= 0.03928) R = RsRGB / 12.92;\n    else R = Math.pow((RsRGB + 0.055) / 1.055, 2.4);\n    if (GsRGB <= 0.03928) G = GsRGB / 12.92;\n    else G = Math.pow((GsRGB + 0.055) / 1.055, 2.4);\n    if (BsRGB <= 0.03928) B = BsRGB / 12.92;\n    else B = Math.pow((BsRGB + 0.055) / 1.055, 2.4);\n    return 0.2126 * R + 0.7152 * G + 0.0722 * B;\n  },\n  setAlpha: function (value) {\n    this._a = boundAlpha(value);\n    this._roundA = Math.round(100 * this._a) / 100;\n    return this;\n  },\n  toHsv: function () {\n    var hsv = rgbToHsv(this._r, this._g, this._b);\n    return { h: hsv.h * 360, s: hsv.s, v: hsv.v, a: this._a };\n  },\n  toHsvString: function () {\n    var hsv = rgbToHsv(this._r, this._g, this._b);\n    var h = Math.round(hsv.h * 360),\n      s = Math.round(hsv.s * 100),\n      v = Math.round(hsv.v * 100);\n    return this._a == 1\n      ? \"hsv(\" + h + \", \" + s + \"%, \" + v + \"%)\"\n      : \"hsva(\" + h + \", \" + s + \"%, \" + v + \"%, \" + this._roundA + \")\";\n  },\n  toHsl: function () {\n    var hsl = rgbToHsl(this._r, this._g, this._b);\n    return { h: hsl.h * 360, s: hsl.s, l: hsl.l, a: this._a };\n  },\n  toHslString: function () {\n    var hsl = rgbToHsl(this._r, this._g, this._b);\n    var h = Math.round(hsl.h * 360),\n      s = Math.round(hsl.s * 100),\n      l = Math.round(hsl.l * 100);\n    return this._a == 1\n      ? \"hsl(\" + h + \", \" + s + \"%, \" + l + \"%)\"\n      : \"hsla(\" + h + \", \" + s + \"%, \" + l + \"%, \" + this._roundA + \")\";\n  },\n  toHex: function (allow3Char) {\n    return rgbToHex(this._r, this._g, this._b, allow3Char);\n  },\n  toHexString: function (allow3Char) {\n    return \"#\" + this.toHex(allow3Char);\n  },\n  toHex8: function (allow4Char) {\n    return rgbaToHex(this._r, this._g, this._b, this._a, allow4Char);\n  },\n  toHex8String: function (allow4Char) {\n    return \"#\" + this.toHex8(allow4Char);\n  },\n  toRgb: function () {\n    return {\n      r: Math.round(this._r),\n      g: Math.round(this._g),\n      b: Math.round(this._b),\n      a: this._a,\n    };\n  },\n  toRgbString: function () {\n    return this._a == 1\n      ? \"rgb(\" +\n          Math.round(this._r) +\n          \", \" +\n          Math.round(this._g) +\n          \", \" +\n          Math.round(this._b) +\n          \")\"\n      : \"rgba(\" +\n          Math.round(this._r) +\n          \", \" +\n          Math.round(this._g) +\n          \", \" +\n          Math.round(this._b) +\n          \", \" +\n          this._roundA +\n          \")\";\n  },\n  toPercentageRgb: function () {\n    return {\n      r: Math.round(bound01(this._r, 255) * 100) + \"%\",\n      g: Math.round(bound01(this._g, 255) * 100) + \"%\",\n      b: Math.round(bound01(this._b, 255) * 100) + \"%\",\n      a: this._a,\n    };\n  },\n  toPercentageRgbString: function () {\n    return this._a == 1\n      ? \"rgb(\" +\n          Math.round(bound01(this._r, 255) * 100) +\n          \"%, \" +\n          Math.round(bound01(this._g, 255) * 100) +\n          \"%, \" +\n          Math.round(bound01(this._b, 255) * 100) +\n          \"%)\"\n      : \"rgba(\" +\n          Math.round(bound01(this._r, 255) * 100) +\n          \"%, \" +\n          Math.round(bound01(this._g, 255) * 100) +\n          \"%, \" +\n          Math.round(bound01(this._b, 255) * 100) +\n          \"%, \" +\n          this._roundA +\n          \")\";\n  },\n  toName: function () {\n    if (this._a === 0) {\n      return \"transparent\";\n    }\n\n    if (this._a < 1) {\n      return false;\n    }\n\n    return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false;\n  },\n  toFilter: function (secondColor) {\n    var hex8String = \"#\" + rgbaToArgbHex(this._r, this._g, this._b, this._a);\n    var secondHex8String = hex8String;\n    var gradientType = this._gradientType ? \"GradientType = 1, \" : \"\";\n\n    if (secondColor) {\n      var s = tinycolor(secondColor);\n      secondHex8String = \"#\" + rgbaToArgbHex(s._r, s._g, s._b, s._a);\n    }\n\n    return (\n      \"progid:DXImageTransform.Microsoft.gradient(\" +\n      gradientType +\n      \"startColorstr=\" +\n      hex8String +\n      \",endColorstr=\" +\n      secondHex8String +\n      \")\"\n    );\n  },\n  toString: function (format) {\n    var formatSet = !!format;\n    format = format || this._format;\n\n    var formattedString = false;\n    var hasAlpha = this._a < 1 && this._a >= 0;\n    var needsAlphaFormat =\n      !formatSet &&\n      hasAlpha &&\n      (format === \"hex\" ||\n        format === \"hex6\" ||\n        format === \"hex3\" ||\n        format === \"hex4\" ||\n        format === \"hex8\" ||\n        format === \"name\");\n\n    if (needsAlphaFormat) {\n      // Special case for \"transparent\", all other non-alpha formats\n      // will return rgba when there is transparency.\n      if (format === \"name\" && this._a === 0) {\n        return this.toName();\n      }\n      return this.toRgbString();\n    }\n    if (format === \"rgb\") {\n      formattedString = this.toRgbString();\n    }\n    if (format === \"prgb\") {\n      formattedString = this.toPercentageRgbString();\n    }\n    if (format === \"hex\" || format === \"hex6\") {\n      formattedString = this.toHexString();\n    }\n    if (format === \"hex3\") {\n      formattedString = this.toHexString(true);\n    }\n    if (format === \"hex4\") {\n      formattedString = this.toHex8String(true);\n    }\n    if (format === \"hex8\") {\n      formattedString = this.toHex8String();\n    }\n    if (format === \"name\") {\n      formattedString = this.toName();\n    }\n    if (format === \"hsl\") {\n      formattedString = this.toHslString();\n    }\n    if (format === \"hsv\") {\n      formattedString = this.toHsvString();\n    }\n\n    return formattedString || this.toHexString();\n  },\n  clone: function () {\n    return tinycolor(this.toString());\n  },\n\n  _applyModification: function (fn, args) {\n    var color = fn.apply(null, [this].concat([].slice.call(args)));\n    this._r = color._r;\n    this._g = color._g;\n    this._b = color._b;\n    this.setAlpha(color._a);\n    return this;\n  },\n  lighten: function () {\n    return this._applyModification(lighten, arguments);\n  },\n  brighten: function () {\n    return this._applyModification(brighten, arguments);\n  },\n  darken: function () {\n    return this._applyModification(darken, arguments);\n  },\n  desaturate: function () {\n    return this._applyModification(desaturate, arguments);\n  },\n  saturate: function () {\n    return this._applyModification(saturate, arguments);\n  },\n  greyscale: function () {\n    return this._applyModification(greyscale, arguments);\n  },\n  spin: function () {\n    return this._applyModification(spin, arguments);\n  },\n\n  _applyCombination: function (fn, args) {\n    return fn.apply(null, [this].concat([].slice.call(args)));\n  },\n  analogous: function () {\n    return this._applyCombination(analogous, arguments);\n  },\n  complement: function () {\n    return this._applyCombination(complement, arguments);\n  },\n  monochromatic: function () {\n    return this._applyCombination(monochromatic, arguments);\n  },\n  splitcomplement: function () {\n    return this._applyCombination(splitcomplement, arguments);\n  },\n  // Disabled until https://github.com/bgrins/TinyColor/issues/254\n  // polyad: function (number) {\n  //   return this._applyCombination(polyad, [number]);\n  // },\n  triad: function () {\n    return this._applyCombination(polyad, [3]);\n  },\n  tetrad: function () {\n    return this._applyCombination(polyad, [4]);\n  },\n};\n\n// If input is an object, force 1 into \"1.0\" to handle ratios properly\n// String input requires \"1.0\" as input, so 1 will be treated as 1\ntinycolor.fromRatio = function (color, opts) {\n  if (typeof color == \"object\") {\n    var newColor = {};\n    for (var i in color) {\n      if (color.hasOwnProperty(i)) {\n        if (i === \"a\") {\n          newColor[i] = color[i];\n        } else {\n          newColor[i] = convertToPercentage(color[i]);\n        }\n      }\n    }\n    color = newColor;\n  }\n\n  return tinycolor(color, opts);\n};\n\n// Given a string or object, convert that input to RGB\n// Possible string inputs:\n//\n//     \"red\"\n//     \"#f00\" or \"f00\"\n//     \"#ff0000\" or \"ff0000\"\n//     \"#ff000000\" or \"ff000000\"\n//     \"rgb 255 0 0\" or \"rgb (255, 0, 0)\"\n//     \"rgb 1.0 0 0\" or \"rgb (1, 0, 0)\"\n//     \"rgba (255, 0, 0, 1)\" or \"rgba 255, 0, 0, 1\"\n//     \"rgba (1.0, 0, 0, 1)\" or \"rgba 1.0, 0, 0, 1\"\n//     \"hsl(0, 100%, 50%)\" or \"hsl 0 100% 50%\"\n//     \"hsla(0, 100%, 50%, 1)\" or \"hsla 0 100% 50%, 1\"\n//     \"hsv(0, 100%, 100%)\" or \"hsv 0 100% 100%\"\n//\nfunction inputToRGB(color) {\n  var rgb = { r: 0, g: 0, b: 0 };\n  var a = 1;\n  var s = null;\n  var v = null;\n  var l = null;\n  var ok = false;\n  var format = false;\n\n  if (typeof color == \"string\") {\n    color = stringInputToObject(color);\n  }\n\n  if (typeof color == \"object\") {\n    if (\n      isValidCSSUnit(color.r) &&\n      isValidCSSUnit(color.g) &&\n      isValidCSSUnit(color.b)\n    ) {\n      rgb = rgbToRgb(color.r, color.g, color.b);\n      ok = true;\n      format = String(color.r).substr(-1) === \"%\" ? \"prgb\" : \"rgb\";\n    } else if (\n      isValidCSSUnit(color.h) &&\n      isValidCSSUnit(color.s) &&\n      isValidCSSUnit(color.v)\n    ) {\n      s = convertToPercentage(color.s);\n      v = convertToPercentage(color.v);\n      rgb = hsvToRgb(color.h, s, v);\n      ok = true;\n      format = \"hsv\";\n    } else if (\n      isValidCSSUnit(color.h) &&\n      isValidCSSUnit(color.s) &&\n      isValidCSSUnit(color.l)\n    ) {\n      s = convertToPercentage(color.s);\n      l = convertToPercentage(color.l);\n      rgb = hslToRgb(color.h, s, l);\n      ok = true;\n      format = \"hsl\";\n    }\n\n    if (color.hasOwnProperty(\"a\")) {\n      a = color.a;\n    }\n  }\n\n  a = boundAlpha(a);\n\n  return {\n    ok: ok,\n    format: color.format || format,\n    r: Math.min(255, Math.max(rgb.r, 0)),\n    g: Math.min(255, Math.max(rgb.g, 0)),\n    b: Math.min(255, Math.max(rgb.b, 0)),\n    a: a,\n  };\n}\n\n// Conversion Functions\n// --------------------\n\n// `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\n// <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\n\n// `rgbToRgb`\n// Handle bounds / percentage checking to conform to CSS color spec\n// <http://www.w3.org/TR/css3-color/>\n// *Assumes:* r, g, b in [0, 255] or [0, 1]\n// *Returns:* { r, g, b } in [0, 255]\nfunction rgbToRgb(r, g, b) {\n  return {\n    r: bound01(r, 255) * 255,\n    g: bound01(g, 255) * 255,\n    b: bound01(b, 255) * 255,\n  };\n}\n\n// `rgbToHsl`\n// Converts an RGB color value to HSL.\n// *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\n// *Returns:* { h, s, l } in [0,1]\nfunction rgbToHsl(r, g, b) {\n  r = bound01(r, 255);\n  g = bound01(g, 255);\n  b = bound01(b, 255);\n\n  var max = Math.max(r, g, b),\n    min = Math.min(r, g, b);\n  var h,\n    s,\n    l = (max + min) / 2;\n\n  if (max == min) {\n    h = s = 0; // achromatic\n  } else {\n    var d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n    switch (max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0);\n        break;\n      case g:\n        h = (b - r) / d + 2;\n        break;\n      case b:\n        h = (r - g) / d + 4;\n        break;\n    }\n\n    h /= 6;\n  }\n\n  return { h: h, s: s, l: l };\n}\n\n// `hslToRgb`\n// Converts an HSL color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\nfunction hslToRgb(h, s, l) {\n  var r, g, b;\n\n  h = bound01(h, 360);\n  s = bound01(s, 100);\n  l = bound01(l, 100);\n\n  function hue2rgb(p, q, t) {\n    if (t < 0) t += 1;\n    if (t > 1) t -= 1;\n    if (t < 1 / 6) return p + (q - p) * 6 * t;\n    if (t < 1 / 2) return q;\n    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n    return p;\n  }\n\n  if (s === 0) {\n    r = g = b = l; // achromatic\n  } else {\n    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    var p = 2 * l - q;\n    r = hue2rgb(p, q, h + 1 / 3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1 / 3);\n  }\n\n  return { r: r * 255, g: g * 255, b: b * 255 };\n}\n\n// `rgbToHsv`\n// Converts an RGB color value to HSV\n// *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\n// *Returns:* { h, s, v } in [0,1]\nfunction rgbToHsv(r, g, b) {\n  r = bound01(r, 255);\n  g = bound01(g, 255);\n  b = bound01(b, 255);\n\n  var max = Math.max(r, g, b),\n    min = Math.min(r, g, b);\n  var h,\n    s,\n    v = max;\n\n  var d = max - min;\n  s = max === 0 ? 0 : d / max;\n\n  if (max == min) {\n    h = 0; // achromatic\n  } else {\n    switch (max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0);\n        break;\n      case g:\n        h = (b - r) / d + 2;\n        break;\n      case b:\n        h = (r - g) / d + 4;\n        break;\n    }\n    h /= 6;\n  }\n  return { h: h, s: s, v: v };\n}\n\n// `hsvToRgb`\n// Converts an HSV color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\nfunction hsvToRgb(h, s, v) {\n  h = bound01(h, 360) * 6;\n  s = bound01(s, 100);\n  v = bound01(v, 100);\n\n  var i = Math.floor(h),\n    f = h - i,\n    p = v * (1 - s),\n    q = v * (1 - f * s),\n    t = v * (1 - (1 - f) * s),\n    mod = i % 6,\n    r = [v, q, p, p, t, v][mod],\n    g = [t, v, v, q, p, p][mod],\n    b = [p, p, t, v, v, q][mod];\n\n  return { r: r * 255, g: g * 255, b: b * 255 };\n}\n\n// `rgbToHex`\n// Converts an RGB color to hex\n// Assumes r, g, and b are contained in the set [0, 255]\n// Returns a 3 or 6 character hex\nfunction rgbToHex(r, g, b, allow3Char) {\n  var hex = [\n    pad2(Math.round(r).toString(16)),\n    pad2(Math.round(g).toString(16)),\n    pad2(Math.round(b).toString(16)),\n  ];\n\n  // Return a 3 character hex if possible\n  if (\n    allow3Char &&\n    hex[0].charAt(0) == hex[0].charAt(1) &&\n    hex[1].charAt(0) == hex[1].charAt(1) &&\n    hex[2].charAt(0) == hex[2].charAt(1)\n  ) {\n    return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\n  }\n\n  return hex.join(\"\");\n}\n\n// `rgbaToHex`\n// Converts an RGBA color plus alpha transparency to hex\n// Assumes r, g, b are contained in the set [0, 255] and\n// a in [0, 1]. Returns a 4 or 8 character rgba hex\nfunction rgbaToHex(r, g, b, a, allow4Char) {\n  var hex = [\n    pad2(Math.round(r).toString(16)),\n    pad2(Math.round(g).toString(16)),\n    pad2(Math.round(b).toString(16)),\n    pad2(convertDecimalToHex(a)),\n  ];\n\n  // Return a 4 character hex if possible\n  if (\n    allow4Char &&\n    hex[0].charAt(0) == hex[0].charAt(1) &&\n    hex[1].charAt(0) == hex[1].charAt(1) &&\n    hex[2].charAt(0) == hex[2].charAt(1) &&\n    hex[3].charAt(0) == hex[3].charAt(1)\n  ) {\n    return (\n      hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0) + hex[3].charAt(0)\n    );\n  }\n\n  return hex.join(\"\");\n}\n\n// `rgbaToArgbHex`\n// Converts an RGBA color to an ARGB Hex8 string\n// Rarely used, but required for \"toFilter()\"\nfunction rgbaToArgbHex(r, g, b, a) {\n  var hex = [\n    pad2(convertDecimalToHex(a)),\n    pad2(Math.round(r).toString(16)),\n    pad2(Math.round(g).toString(16)),\n    pad2(Math.round(b).toString(16)),\n  ];\n\n  return hex.join(\"\");\n}\n\n// `equals`\n// Can be called with any tinycolor input\ntinycolor.equals = function (color1, color2) {\n  if (!color1 || !color2) return false;\n  return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();\n};\n\ntinycolor.random = function () {\n  return tinycolor.fromRatio({\n    r: Math.random(),\n    g: Math.random(),\n    b: Math.random(),\n  });\n};\n\n// Modification Functions\n// ----------------------\n// Thanks to less.js for some of the basics here\n// <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\n\nfunction desaturate(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.s -= amount / 100;\n  hsl.s = clamp01(hsl.s);\n  return tinycolor(hsl);\n}\n\nfunction saturate(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.s += amount / 100;\n  hsl.s = clamp01(hsl.s);\n  return tinycolor(hsl);\n}\n\nfunction greyscale(color) {\n  return tinycolor(color).desaturate(100);\n}\n\nfunction lighten(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.l += amount / 100;\n  hsl.l = clamp01(hsl.l);\n  return tinycolor(hsl);\n}\n\nfunction brighten(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var rgb = tinycolor(color).toRgb();\n  rgb.r = Math.max(0, Math.min(255, rgb.r - Math.round(255 * -(amount / 100))));\n  rgb.g = Math.max(0, Math.min(255, rgb.g - Math.round(255 * -(amount / 100))));\n  rgb.b = Math.max(0, Math.min(255, rgb.b - Math.round(255 * -(amount / 100))));\n  return tinycolor(rgb);\n}\n\nfunction darken(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.l -= amount / 100;\n  hsl.l = clamp01(hsl.l);\n  return tinycolor(hsl);\n}\n\n// Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\n// Values outside of this range will be wrapped into this range.\nfunction spin(color, amount) {\n  var hsl = tinycolor(color).toHsl();\n  var hue = (hsl.h + amount) % 360;\n  hsl.h = hue < 0 ? 360 + hue : hue;\n  return tinycolor(hsl);\n}\n\n// Combination Functions\n// ---------------------\n// Thanks to jQuery xColor for some of the ideas behind these\n// <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\n\nfunction complement(color) {\n  var hsl = tinycolor(color).toHsl();\n  hsl.h = (hsl.h + 180) % 360;\n  return tinycolor(hsl);\n}\n\nfunction polyad(color, number) {\n  if (isNaN(number) || number <= 0) {\n    throw new Error(\"Argument to polyad must be a positive number\");\n  }\n  var hsl = tinycolor(color).toHsl();\n  var result = [tinycolor(color)];\n  var step = 360 / number;\n  for (var i = 1; i < number; i++) {\n    result.push(tinycolor({ h: (hsl.h + i * step) % 360, s: hsl.s, l: hsl.l }));\n  }\n\n  return result;\n}\n\nfunction splitcomplement(color) {\n  var hsl = tinycolor(color).toHsl();\n  var h = hsl.h;\n  return [\n    tinycolor(color),\n    tinycolor({ h: (h + 72) % 360, s: hsl.s, l: hsl.l }),\n    tinycolor({ h: (h + 216) % 360, s: hsl.s, l: hsl.l }),\n  ];\n}\n\nfunction analogous(color, results, slices) {\n  results = results || 6;\n  slices = slices || 30;\n\n  var hsl = tinycolor(color).toHsl();\n  var part = 360 / slices;\n  var ret = [tinycolor(color)];\n\n  for (hsl.h = (hsl.h - ((part * results) >> 1) + 720) % 360; --results; ) {\n    hsl.h = (hsl.h + part) % 360;\n    ret.push(tinycolor(hsl));\n  }\n  return ret;\n}\n\nfunction monochromatic(color, results) {\n  results = results || 6;\n  var hsv = tinycolor(color).toHsv();\n  var h = hsv.h,\n    s = hsv.s,\n    v = hsv.v;\n  var ret = [];\n  var modification = 1 / results;\n\n  while (results--) {\n    ret.push(tinycolor({ h: h, s: s, v: v }));\n    v = (v + modification) % 1;\n  }\n\n  return ret;\n}\n\n// Utility Functions\n// ---------------------\n\ntinycolor.mix = function (color1, color2, amount) {\n  amount = amount === 0 ? 0 : amount || 50;\n\n  var rgb1 = tinycolor(color1).toRgb();\n  var rgb2 = tinycolor(color2).toRgb();\n\n  var p = amount / 100;\n\n  var rgba = {\n    r: (rgb2.r - rgb1.r) * p + rgb1.r,\n    g: (rgb2.g - rgb1.g) * p + rgb1.g,\n    b: (rgb2.b - rgb1.b) * p + rgb1.b,\n    a: (rgb2.a - rgb1.a) * p + rgb1.a,\n  };\n\n  return tinycolor(rgba);\n};\n\n// Readability Functions\n// ---------------------\n// <http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef (WCAG Version 2)\n\n// `contrast`\n// Analyze the 2 colors and returns the color contrast defined by (WCAG Version 2)\ntinycolor.readability = function (color1, color2) {\n  var c1 = tinycolor(color1);\n  var c2 = tinycolor(color2);\n  return (\n    (Math.max(c1.getLuminance(), c2.getLuminance()) + 0.05) /\n    (Math.min(c1.getLuminance(), c2.getLuminance()) + 0.05)\n  );\n};\n\n// `isReadable`\n// Ensure that foreground and background color combinations meet WCAG2 guidelines.\n// The third argument is an optional Object.\n//      the 'level' property states 'AA' or 'AAA' - if missing or invalid, it defaults to 'AA';\n//      the 'size' property states 'large' or 'small' - if missing or invalid, it defaults to 'small'.\n// If the entire object is absent, isReadable defaults to {level:\"AA\",size:\"small\"}.\n\n// *Example*\n//    tinycolor.isReadable(\"#000\", \"#111\") => false\n//    tinycolor.isReadable(\"#000\", \"#111\",{level:\"AA\",size:\"large\"}) => false\ntinycolor.isReadable = function (color1, color2, wcag2) {\n  var readability = tinycolor.readability(color1, color2);\n  var wcag2Parms, out;\n\n  out = false;\n\n  wcag2Parms = validateWCAG2Parms(wcag2);\n  switch (wcag2Parms.level + wcag2Parms.size) {\n    case \"AAsmall\":\n    case \"AAAlarge\":\n      out = readability >= 4.5;\n      break;\n    case \"AAlarge\":\n      out = readability >= 3;\n      break;\n    case \"AAAsmall\":\n      out = readability >= 7;\n      break;\n  }\n  return out;\n};\n\n// `mostReadable`\n// Given a base color and a list of possible foreground or background\n// colors for that base, returns the most readable color.\n// Optionally returns Black or White if the most readable color is unreadable.\n// *Example*\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:false}).toHexString(); // \"#112255\"\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:true}).toHexString();  // \"#ffffff\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"large\"}).toHexString(); // \"#faf3f3\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"small\"}).toHexString(); // \"#ffffff\"\ntinycolor.mostReadable = function (baseColor, colorList, args) {\n  var bestColor = null;\n  var bestScore = 0;\n  var readability;\n  var includeFallbackColors, level, size;\n  args = args || {};\n  includeFallbackColors = args.includeFallbackColors;\n  level = args.level;\n  size = args.size;\n\n  for (var i = 0; i < colorList.length; i++) {\n    readability = tinycolor.readability(baseColor, colorList[i]);\n    if (readability > bestScore) {\n      bestScore = readability;\n      bestColor = tinycolor(colorList[i]);\n    }\n  }\n\n  if (\n    tinycolor.isReadable(baseColor, bestColor, {\n      level: level,\n      size: size,\n    }) ||\n    !includeFallbackColors\n  ) {\n    return bestColor;\n  } else {\n    args.includeFallbackColors = false;\n    return tinycolor.mostReadable(baseColor, [\"#fff\", \"#000\"], args);\n  }\n};\n\n// Big List of Colors\n// ------------------\n// <https://www.w3.org/TR/css-color-4/#named-colors>\nvar names = (tinycolor.names = {\n  aliceblue: \"f0f8ff\",\n  antiquewhite: \"faebd7\",\n  aqua: \"0ff\",\n  aquamarine: \"7fffd4\",\n  azure: \"f0ffff\",\n  beige: \"f5f5dc\",\n  bisque: \"ffe4c4\",\n  black: \"000\",\n  blanchedalmond: \"ffebcd\",\n  blue: \"00f\",\n  blueviolet: \"8a2be2\",\n  brown: \"a52a2a\",\n  burlywood: \"deb887\",\n  burntsienna: \"ea7e5d\",\n  cadetblue: \"5f9ea0\",\n  chartreuse: \"7fff00\",\n  chocolate: \"d2691e\",\n  coral: \"ff7f50\",\n  cornflowerblue: \"6495ed\",\n  cornsilk: \"fff8dc\",\n  crimson: \"dc143c\",\n  cyan: \"0ff\",\n  darkblue: \"00008b\",\n  darkcyan: \"008b8b\",\n  darkgoldenrod: \"b8860b\",\n  darkgray: \"a9a9a9\",\n  darkgreen: \"006400\",\n  darkgrey: \"a9a9a9\",\n  darkkhaki: \"bdb76b\",\n  darkmagenta: \"8b008b\",\n  darkolivegreen: \"556b2f\",\n  darkorange: \"ff8c00\",\n  darkorchid: \"9932cc\",\n  darkred: \"8b0000\",\n  darksalmon: \"e9967a\",\n  darkseagreen: \"8fbc8f\",\n  darkslateblue: \"483d8b\",\n  darkslategray: \"2f4f4f\",\n  darkslategrey: \"2f4f4f\",\n  darkturquoise: \"00ced1\",\n  darkviolet: \"9400d3\",\n  deeppink: \"ff1493\",\n  deepskyblue: \"00bfff\",\n  dimgray: \"696969\",\n  dimgrey: \"696969\",\n  dodgerblue: \"1e90ff\",\n  firebrick: \"b22222\",\n  floralwhite: \"fffaf0\",\n  forestgreen: \"228b22\",\n  fuchsia: \"f0f\",\n  gainsboro: \"dcdcdc\",\n  ghostwhite: \"f8f8ff\",\n  gold: \"ffd700\",\n  goldenrod: \"daa520\",\n  gray: \"808080\",\n  green: \"008000\",\n  greenyellow: \"adff2f\",\n  grey: \"808080\",\n  honeydew: \"f0fff0\",\n  hotpink: \"ff69b4\",\n  indianred: \"cd5c5c\",\n  indigo: \"4b0082\",\n  ivory: \"fffff0\",\n  khaki: \"f0e68c\",\n  lavender: \"e6e6fa\",\n  lavenderblush: \"fff0f5\",\n  lawngreen: \"7cfc00\",\n  lemonchiffon: \"fffacd\",\n  lightblue: \"add8e6\",\n  lightcoral: \"f08080\",\n  lightcyan: \"e0ffff\",\n  lightgoldenrodyellow: \"fafad2\",\n  lightgray: \"d3d3d3\",\n  lightgreen: \"90ee90\",\n  lightgrey: \"d3d3d3\",\n  lightpink: \"ffb6c1\",\n  lightsalmon: \"ffa07a\",\n  lightseagreen: \"20b2aa\",\n  lightskyblue: \"87cefa\",\n  lightslategray: \"789\",\n  lightslategrey: \"789\",\n  lightsteelblue: \"b0c4de\",\n  lightyellow: \"ffffe0\",\n  lime: \"0f0\",\n  limegreen: \"32cd32\",\n  linen: \"faf0e6\",\n  magenta: \"f0f\",\n  maroon: \"800000\",\n  mediumaquamarine: \"66cdaa\",\n  mediumblue: \"0000cd\",\n  mediumorchid: \"ba55d3\",\n  mediumpurple: \"9370db\",\n  mediumseagreen: \"3cb371\",\n  mediumslateblue: \"7b68ee\",\n  mediumspringgreen: \"00fa9a\",\n  mediumturquoise: \"48d1cc\",\n  mediumvioletred: \"c71585\",\n  midnightblue: \"191970\",\n  mintcream: \"f5fffa\",\n  mistyrose: \"ffe4e1\",\n  moccasin: \"ffe4b5\",\n  navajowhite: \"ffdead\",\n  navy: \"000080\",\n  oldlace: \"fdf5e6\",\n  olive: \"808000\",\n  olivedrab: \"6b8e23\",\n  orange: \"ffa500\",\n  orangered: \"ff4500\",\n  orchid: \"da70d6\",\n  palegoldenrod: \"eee8aa\",\n  palegreen: \"98fb98\",\n  paleturquoise: \"afeeee\",\n  palevioletred: \"db7093\",\n  papayawhip: \"ffefd5\",\n  peachpuff: \"ffdab9\",\n  peru: \"cd853f\",\n  pink: \"ffc0cb\",\n  plum: \"dda0dd\",\n  powderblue: \"b0e0e6\",\n  purple: \"800080\",\n  rebeccapurple: \"663399\",\n  red: \"f00\",\n  rosybrown: \"bc8f8f\",\n  royalblue: \"4169e1\",\n  saddlebrown: \"8b4513\",\n  salmon: \"fa8072\",\n  sandybrown: \"f4a460\",\n  seagreen: \"2e8b57\",\n  seashell: \"fff5ee\",\n  sienna: \"a0522d\",\n  silver: \"c0c0c0\",\n  skyblue: \"87ceeb\",\n  slateblue: \"6a5acd\",\n  slategray: \"708090\",\n  slategrey: \"708090\",\n  snow: \"fffafa\",\n  springgreen: \"00ff7f\",\n  steelblue: \"4682b4\",\n  tan: \"d2b48c\",\n  teal: \"008080\",\n  thistle: \"d8bfd8\",\n  tomato: \"ff6347\",\n  turquoise: \"40e0d0\",\n  violet: \"ee82ee\",\n  wheat: \"f5deb3\",\n  white: \"fff\",\n  whitesmoke: \"f5f5f5\",\n  yellow: \"ff0\",\n  yellowgreen: \"9acd32\",\n});\n\n// Make it easy to access colors via `hexNames[hex]`\nvar hexNames = (tinycolor.hexNames = flip(names));\n\n// Utilities\n// ---------\n\n// `{ 'name1': 'val1' }` becomes `{ 'val1': 'name1' }`\nfunction flip(o) {\n  var flipped = {};\n  for (var i in o) {\n    if (o.hasOwnProperty(i)) {\n      flipped[o[i]] = i;\n    }\n  }\n  return flipped;\n}\n\n// Return a valid alpha value [0,1] with all invalid values being set to 1\nfunction boundAlpha(a) {\n  a = parseFloat(a);\n\n  if (isNaN(a) || a < 0 || a > 1) {\n    a = 1;\n  }\n\n  return a;\n}\n\n// Take input from [0, n] and return it as [0, 1]\nfunction bound01(n, max) {\n  if (isOnePointZero(n)) n = \"100%\";\n\n  var processPercent = isPercentage(n);\n  n = Math.min(max, Math.max(0, parseFloat(n)));\n\n  // Automatically convert percentage into number\n  if (processPercent) {\n    n = parseInt(n * max, 10) / 100;\n  }\n\n  // Handle floating point rounding errors\n  if (Math.abs(n - max) < 0.000001) {\n    return 1;\n  }\n\n  // Convert into [0, 1] range if it isn't already\n  return (n % max) / parseFloat(max);\n}\n\n// Force a number between 0 and 1\nfunction clamp01(val) {\n  return Math.min(1, Math.max(0, val));\n}\n\n// Parse a base-16 hex value into a base-10 integer\nfunction parseIntFromHex(val) {\n  return parseInt(val, 16);\n}\n\n// Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\n// <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\nfunction isOnePointZero(n) {\n  return typeof n == \"string\" && n.indexOf(\".\") != -1 && parseFloat(n) === 1;\n}\n\n// Check to see if string passed in is a percentage\nfunction isPercentage(n) {\n  return typeof n === \"string\" && n.indexOf(\"%\") != -1;\n}\n\n// Force a hex value to have 2 characters\nfunction pad2(c) {\n  return c.length == 1 ? \"0\" + c : \"\" + c;\n}\n\n// Replace a decimal with it's percentage value\nfunction convertToPercentage(n) {\n  if (n <= 1) {\n    n = n * 100 + \"%\";\n  }\n\n  return n;\n}\n\n// Converts a decimal to a hex value\nfunction convertDecimalToHex(d) {\n  return Math.round(parseFloat(d) * 255).toString(16);\n}\n// Converts a hex value to a decimal\nfunction convertHexToDecimal(h) {\n  return parseIntFromHex(h) / 255;\n}\n\nvar matchers = (function () {\n  // <http://www.w3.org/TR/css3-values/#integers>\n  var CSS_INTEGER = \"[-\\\\+]?\\\\d+%?\";\n\n  // <http://www.w3.org/TR/css3-values/#number-value>\n  var CSS_NUMBER = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\";\n\n  // Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\n  var CSS_UNIT = \"(?:\" + CSS_NUMBER + \")|(?:\" + CSS_INTEGER + \")\";\n\n  // Actual matching.\n  // Parentheses and commas are optional, but not required.\n  // Whitespace can take the place of commas or opening paren\n  var PERMISSIVE_MATCH3 =\n    \"[\\\\s|\\\\(]+(\" +\n    CSS_UNIT +\n    \")[,|\\\\s]+(\" +\n    CSS_UNIT +\n    \")[,|\\\\s]+(\" +\n    CSS_UNIT +\n    \")\\\\s*\\\\)?\";\n  var PERMISSIVE_MATCH4 =\n    \"[\\\\s|\\\\(]+(\" +\n    CSS_UNIT +\n    \")[,|\\\\s]+(\" +\n    CSS_UNIT +\n    \")[,|\\\\s]+(\" +\n    CSS_UNIT +\n    \")[,|\\\\s]+(\" +\n    CSS_UNIT +\n    \")\\\\s*\\\\)?\";\n\n  return {\n    CSS_UNIT: new RegExp(CSS_UNIT),\n    rgb: new RegExp(\"rgb\" + PERMISSIVE_MATCH3),\n    rgba: new RegExp(\"rgba\" + PERMISSIVE_MATCH4),\n    hsl: new RegExp(\"hsl\" + PERMISSIVE_MATCH3),\n    hsla: new RegExp(\"hsla\" + PERMISSIVE_MATCH4),\n    hsv: new RegExp(\"hsv\" + PERMISSIVE_MATCH3),\n    hsva: new RegExp(\"hsva\" + PERMISSIVE_MATCH4),\n    hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n    hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n    hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n    hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n  };\n})();\n\n// `isValidCSSUnit`\n// Take in a single string / number and check to see if it looks like a CSS unit\n// (see `matchers` above for definition).\nfunction isValidCSSUnit(color) {\n  return !!matchers.CSS_UNIT.exec(color);\n}\n\n// `stringInputToObject`\n// Permissive string parsing.  Take in a number of formats, and output an object\n// based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\nfunction stringInputToObject(color) {\n  color = color.replace(trimLeft, \"\").replace(trimRight, \"\").toLowerCase();\n  var named = false;\n  if (names[color]) {\n    color = names[color];\n    named = true;\n  } else if (color == \"transparent\") {\n    return { r: 0, g: 0, b: 0, a: 0, format: \"name\" };\n  }\n\n  // Try to match string input using regular expressions.\n  // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\n  // Just return an object and let the conversion functions handle that.\n  // This way the result will be the same whether the tinycolor is initialized with string or object.\n  var match;\n  if ((match = matchers.rgb.exec(color))) {\n    return { r: match[1], g: match[2], b: match[3] };\n  }\n  if ((match = matchers.rgba.exec(color))) {\n    return { r: match[1], g: match[2], b: match[3], a: match[4] };\n  }\n  if ((match = matchers.hsl.exec(color))) {\n    return { h: match[1], s: match[2], l: match[3] };\n  }\n  if ((match = matchers.hsla.exec(color))) {\n    return { h: match[1], s: match[2], l: match[3], a: match[4] };\n  }\n  if ((match = matchers.hsv.exec(color))) {\n    return { h: match[1], s: match[2], v: match[3] };\n  }\n  if ((match = matchers.hsva.exec(color))) {\n    return { h: match[1], s: match[2], v: match[3], a: match[4] };\n  }\n  if ((match = matchers.hex8.exec(color))) {\n    return {\n      r: parseIntFromHex(match[1]),\n      g: parseIntFromHex(match[2]),\n      b: parseIntFromHex(match[3]),\n      a: convertHexToDecimal(match[4]),\n      format: named ? \"name\" : \"hex8\",\n    };\n  }\n  if ((match = matchers.hex6.exec(color))) {\n    return {\n      r: parseIntFromHex(match[1]),\n      g: parseIntFromHex(match[2]),\n      b: parseIntFromHex(match[3]),\n      format: named ? \"name\" : \"hex\",\n    };\n  }\n  if ((match = matchers.hex4.exec(color))) {\n    return {\n      r: parseIntFromHex(match[1] + \"\" + match[1]),\n      g: parseIntFromHex(match[2] + \"\" + match[2]),\n      b: parseIntFromHex(match[3] + \"\" + match[3]),\n      a: convertHexToDecimal(match[4] + \"\" + match[4]),\n      format: named ? \"name\" : \"hex8\",\n    };\n  }\n  if ((match = matchers.hex3.exec(color))) {\n    return {\n      r: parseIntFromHex(match[1] + \"\" + match[1]),\n      g: parseIntFromHex(match[2] + \"\" + match[2]),\n      b: parseIntFromHex(match[3] + \"\" + match[3]),\n      format: named ? \"name\" : \"hex\",\n    };\n  }\n\n  return false;\n}\n\nfunction validateWCAG2Parms(parms) {\n  // return valid WCAG2 parms for isReadable.\n  // If input parms are invalid, return {\"level\":\"AA\", \"size\":\"small\"}\n  var level, size;\n  parms = parms || { level: \"AA\", size: \"small\" };\n  level = (parms.level || \"AA\").toUpperCase();\n  size = (parms.size || \"small\").toLowerCase();\n  if (level !== \"AA\" && level !== \"AAA\") {\n    level = \"AA\";\n  }\n  if (size !== \"small\" && size !== \"large\") {\n    size = \"small\";\n  }\n  return { level: level, size: size };\n}\n\nexport { tinycolor as default };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import './spectrum.css';\r\nimport tinycolor from 'tinycolor2';\r\nimport { ColorInput, Instance } from 'tinycolor2';\r\nimport { insertAfter, outerWidthWithMargin, wrap } from './dom';\r\nimport { ColorFormat, Options } from './types';\r\nimport {\r\n  addClass,\r\n  emit,\r\n  eventDelegate,\r\n  getElementOffset,\r\n  html,\r\n  OffsetCSSOptions,\r\n  removeClass,\r\n  setElementOffset,\r\n  throttle,\r\n  toggleClass,\r\n} from './utils';\r\n\r\nconst localization: any = {};\r\n\r\nconst defaultOpts: Partial<Options> = {\r\n\r\n    // Callbacks\r\n    beforeShow: noop,\r\n    move: noop,\r\n    change: noop,\r\n    show: noop,\r\n    hide: noop,\r\n\r\n    // Options\r\n    color: '',\r\n    type: 'color', // text, color, component or flat\r\n    showInput: false,\r\n    allowEmpty: true,\r\n    showButtons: true,\r\n    clickoutFiresChange: true,\r\n    showInitial: false,\r\n    showPalette: true,\r\n    showPaletteOnly: false,\r\n    hideAfterPaletteSelect: false,\r\n    togglePaletteOnly: false,\r\n    showSelectionPalette: true,\r\n    localStorageKey: '',\r\n    appendTo: 'body',\r\n    maxSelectionSize: 8,\r\n    locale: 'en',\r\n    cancelText: 'cancel',\r\n    chooseText: 'choose',\r\n    togglePaletteMoreText: 'more',\r\n    togglePaletteLessText: 'less',\r\n    clearText: 'Clear Color Selection',\r\n    noColorSelectedText: 'No Color Selected',\r\n    preferredFormat: 'name',\r\n    containerClassName: '',\r\n    replacerClassName: '',\r\n    showAlpha: true,\r\n    theme: 'sp-light',\r\n    palette: [\r\n      [ '#000000', '#444444', '#5b5b5b', '#999999', '#bcbcbc', '#eeeeee', '#f3f6f4', '#ffffff' ],\r\n      [ '#f44336', '#744700', '#ce7e00', '#8fce00', '#2986cc', '#16537e', '#6a329f', '#c90076' ],\r\n      [ '#f4cccc', '#fce5cd', '#fff2cc', '#d9ead3', '#d0e0e3', '#cfe2f3', '#d9d2e9', '#ead1dc' ],\r\n      [ '#ea9999', '#f9cb9c', '#ffe599', '#b6d7a8', '#a2c4c9', '#9fc5e8', '#b4a7d6', '#d5a6bd' ],\r\n      [ '#e06666', '#f6b26b', '#ffd966', '#93c47d', '#76a5af', '#6fa8dc', '#8e7cc3', '#c27ba0' ],\r\n      [ '#cc0000', '#e69138', '#f1c232', '#6aa84f', '#45818e', '#3d85c6', '#674ea7', '#a64d79' ],\r\n      [ '#990000', '#b45f06', '#bf9000', '#38761d', '#134f5c', '#0b5394', '#351c75', '#741b47' ],\r\n      [ '#660000', '#783f04', '#7f6000', '#274e13', '#0c343d', '#073763', '#20124d', '#4c1130' ]\r\n    ],\r\n    selectionPalette: [] as string[],\r\n    disabled: false,\r\n    offset: {}\r\n  },\r\n  spectrums: any[] = [],\r\n  IE = !!/msie/i.exec(window.navigator.userAgent),\r\n  rgbaSupport = (() => {\r\n    function contains(str: string, substr: string) {\r\n      return !!~('' + str).indexOf(substr);\r\n    }\r\n\r\n    const elem = document.createElement('div');\r\n    const style = elem.style;\r\n    style.cssText = 'background-color:rgba(0,0,0,.5)';\r\n    return contains(style.backgroundColor, 'rgba') || contains(style.backgroundColor, 'hsla');\r\n  })(),\r\n  replaceInput = html(\r\n    [\r\n      '<div class=\\'sp-replacer\\'>',\r\n      '<div class=\\'sp-preview\\'><div class=\\'sp-preview-inner\\'></div></div>',\r\n      '<div class=\\'sp-dd\\'>&#9660;</div>',\r\n      '</div>'\r\n    ].join('')\r\n  ) as HTMLElement,\r\n  markup = (function () {\r\n\r\n    // IE does not support gradients with multiple stops, so we need to simulate\r\n    //  that for the rainbow slider with 8 divs that each have a single gradient\r\n    let gradientFix = '';\r\n    if (IE) {\r\n      for (let i = 1; i <= 6; i++) {\r\n        gradientFix += '<div class=\\'sp-' + i + '\\'></div>';\r\n      }\r\n    }\r\n\r\n    return [\r\n      '<div class=\\'sp-container sp-hidden\\'>',\r\n      '<div class=\\'sp-palette-container\\'>',\r\n      '<div class=\\'sp-palette sp-thumb sp-cf\\'></div>',\r\n      '<div class=\\'sp-palette-button-container sp-cf\\'>',\r\n      '<button type=\\'button\\' class=\\'sp-palette-toggle\\'></button>',\r\n      '</div>',\r\n      '</div>',\r\n      '<div class=\\'sp-picker-container\\'>',\r\n      '<div class=\\'sp-top sp-cf\\'>',\r\n      '<div class=\\'sp-fill\\'></div>',\r\n      '<div class=\\'sp-top-inner\\'>',\r\n      '<div class=\\'sp-color\\'>',\r\n      '<div class=\\'sp-sat\\'>',\r\n      '<div class=\\'sp-val\\'>',\r\n      '<div class=\\'sp-dragger\\'></div>',\r\n      '</div>',\r\n      '</div>',\r\n      '</div>',\r\n      '<div class=\\'sp-clear sp-clear-display\\'>',\r\n      '</div>',\r\n      '<div class=\\'sp-hue\\'>',\r\n      '<div class=\\'sp-slider\\'></div>',\r\n      gradientFix,\r\n      '</div>',\r\n      '</div>',\r\n      '<div class=\\'sp-alpha\\'><div class=\\'sp-alpha-inner\\'><div class=\\'sp-alpha-handle\\'></div></div></div>',\r\n      '</div>',\r\n      '<div class=\\'sp-input-container sp-cf\\'>',\r\n      '<input class=\\'sp-input\\' type=\\'text\\' spellcheck=\\'false\\'  />',\r\n      '</div>',\r\n      '<div class=\\'sp-initial sp-thumb sp-cf\\'></div>',\r\n      '<div class=\\'sp-button-container sp-cf\\'>',\r\n      '<button class=\\'sp-cancel\\' href=\\'#\\'></button>',\r\n      '<button type=\\'button\\' class=\\'sp-choose\\'></button>',\r\n      '</div>',\r\n      '</div>',\r\n      '</div>'\r\n    ].join('');\r\n  })();\r\n\r\nfunction paletteTemplate(p: ColorInput[], color: ColorInput, className: string, opts: any) {\r\n  const html = [];\r\n  for (let i = 0; i < p.length; i++) {\r\n    const current = p[i];\r\n    if (current) {\r\n      const tiny = tinycolor(current);\r\n      let c = tiny.toHsl().l < 0.5 ? 'sp-thumb-el sp-thumb-dark' : 'sp-thumb-el sp-thumb-light';\r\n      c += (tinycolor.equals(color, current)) ? ' sp-thumb-active' : '';\r\n      const formattedString = tiny.toString(opts.preferredFormat || 'rgb');\r\n      const swatchStyle = rgbaSupport ? ('background-color:' + tiny.toRgbString()) : 'filter:' + tiny.toFilter();\r\n      html.push('<span title=\"' + formattedString + '\" data-color=\"' + tiny.toRgbString() + '\" class=\"' + c + '\"><span class=\"sp-thumb-inner\" style=\"' + swatchStyle + ';\"></span></span>');\r\n    } else {\r\n      html.push('<span class=\"sp-thumb-el sp-clear-display\" ><span class=\"sp-clear-palette-only\" style=\"background-color: transparent;\"></span></span>');\r\n    }\r\n  }\r\n  return '<div class=\\'sp-cf ' + className + '\\'>' + html.join('') + '</div>';\r\n}\r\n\r\nfunction hideAll() {\r\n  for (let i = 0; i < spectrums.length; i++) {\r\n    if (spectrums[i]) {\r\n      spectrums[i].style.display = 'none';\r\n    }\r\n  }\r\n}\r\n\r\nfunction instanceOptions(options: Partial<Options>, callbackContext: object): Options {\r\n  options.locale = options.locale || window.navigator.language;\r\n  if (options.locale) options.locale = options.locale.split('-')[0].toLowerCase(); // handle locale like \"fr-FR\"\r\n  if (options.locale !== 'en' && localization[options.locale]) {\r\n    options = Object.assign({}, localization[options.locale], options);\r\n  }\r\n  const opts = Object.assign({}, defaultOpts, options) as Options;\r\n\r\n  opts.callbacks = {\r\n    'move': bind(opts.move as Function, callbackContext),\r\n    'change': bind(opts.change as Function, callbackContext),\r\n    'show': bind(opts.show as Function, callbackContext),\r\n    'hide': bind(opts.hide as Function, callbackContext),\r\n    'beforeShow': bind(opts.beforeShow as Function, callbackContext)\r\n  };\r\n\r\n  return opts;\r\n}\r\n\r\nfunction spectrum(element: HTMLInputElement, options: Partial<Options>) {\r\n\r\n  let opts = instanceOptions(options, element),\r\n    type = opts.type,\r\n    flat = (type === 'flat'),\r\n    showSelectionPalette = opts.showSelectionPalette,\r\n    localStorageKey = opts.localStorageKey,\r\n    theme = opts.theme,\r\n    callbacks = opts.callbacks,\r\n    resize = throttle(reflow, 10),\r\n    visible = false,\r\n    isDragging = false,\r\n    dragWidth = 0,\r\n    dragHeight = 0,\r\n    dragHelperHeight = 0,\r\n    slideHeight = 0,\r\n    slideWidth = 0,\r\n    alphaWidth = 0,\r\n    alphaSlideHelperWidth = 0,\r\n    slideHelperHeight = 0,\r\n    currentHue = 0,\r\n    currentSaturation = 0,\r\n    currentValue = 0,\r\n    currentAlpha = 1,\r\n    palette: any = [],\r\n    paletteArray: any[] = [],\r\n    paletteLookup: any = {},\r\n    selectionPalette = opts.selectionPalette.slice(0),\r\n    maxSelectionSize = opts.maxSelectionSize,\r\n    draggingClass = 'sp-dragging',\r\n    abortNextInputChange = false,\r\n    shiftMovementDirection: any = null;\r\n\r\n  const container = html(markup) as HTMLElement;\r\n  container.classList.add(theme);\r\n\r\n  let doc = element.ownerDocument,\r\n    body = doc.body,\r\n    boundElement: HTMLInputElement = element,\r\n    disabled = false,\r\n    pickerContainer = container.querySelector('.sp-picker-container') as HTMLElement,\r\n    dragger = container.querySelector('.sp-color') as HTMLElement,\r\n    dragHelper = container.querySelector('.sp-dragger') as HTMLElement,\r\n    slider = container.querySelector('.sp-hue') as HTMLElement,\r\n    slideHelper = container.querySelector('.sp-slider') as HTMLElement,\r\n    alphaSliderInner = container.querySelector('.sp-alpha-inner') as HTMLElement,\r\n    alphaSlider = container.querySelector('.sp-alpha') as HTMLElement,\r\n    alphaSlideHelper = container.querySelector('.sp-alpha-handle') as HTMLElement,\r\n    textInput = container.querySelector('.sp-input') as HTMLInputElement,\r\n    paletteContainer = container.querySelector('.sp-palette') as HTMLElement,\r\n    initialColorContainer = container.querySelector('.sp-initial') as HTMLElement,\r\n    cancelButton = container.querySelector('.sp-cancel') as HTMLElement,\r\n    clearButton = container.querySelector('.sp-clear') as HTMLElement,\r\n    chooseButton = container.querySelector('.sp-choose') as HTMLElement,\r\n    toggleButton = container.querySelector('.sp-palette-toggle') as HTMLElement,\r\n    isInput = boundElement.nodeName === 'INPUT',\r\n    isInputTypeColor = isInput && boundElement.getAttribute('type') === 'color',\r\n    shouldReplace = isInput && type === 'color',\r\n    replacer = (shouldReplace)\r\n      ? (() => {\r\n          addClass(replaceInput, theme);\r\n          addClass(replaceInput, opts.replacerClassName);\r\n          return replaceInput;\r\n        })()\r\n      : null,\r\n    offsetElement = (shouldReplace) ? replacer : boundElement,\r\n    previewElement = replacer?.querySelector('.sp-preview-inner') as HTMLElement,\r\n    initialColor = opts.color || (isInput && boundElement.value),\r\n    colorOnShow: ColorInput = '',\r\n    currentPreferredFormat = opts.preferredFormat,\r\n    clickoutFiresChange = !opts.showButtons || opts.clickoutFiresChange,\r\n    isEmpty = !initialColor,\r\n    allowEmpty = opts.allowEmpty;\r\n\r\n  // Element to be updated with the input color. Populated in initialize method\r\n  let originalInputContainer: HTMLSpanElement;\r\n  let colorizeElement: HTMLElement|null;\r\n  let colorizeElementInitialColor: string;\r\n  let colorizeElementInitialBackground: string;\r\n\r\n  //If there is a label for this element, when clicked on, show the colour picker\r\n  const thisId = boundElement.getAttribute('id') || '';\r\n  if (thisId !== undefined && thisId.length > 0) {\r\n    const labels = document.querySelectorAll(`label[for=\"${thisId}\"]`);\r\n\r\n    labels.forEach((label) => {\r\n      label.addEventListener('click', function (e) {\r\n        e.preventDefault();\r\n        // Todo: use native\r\n        boundElement.spectrum('show');\r\n        return false;\r\n      });\r\n    });\r\n  }\r\n\r\n  function applyOptions() {\r\n\r\n    if (opts.showPaletteOnly) {\r\n      opts.showPalette = true;\r\n    }\r\n\r\n    if (toggleButton) {\r\n      toggleButton.textContent = opts.showPaletteOnly ? opts.togglePaletteMoreText : opts.togglePaletteLessText;\r\n    }\r\n\r\n    if (opts.palette) {\r\n      palette = opts.palette.slice(0);\r\n      paletteArray = Array.isArray(palette[0]) ? palette : [ palette ];\r\n      paletteLookup = {};\r\n      for (let i = 0; i < paletteArray.length; i++) {\r\n        for (let j = 0; j < paletteArray[i].length; j++) {\r\n          const rgb = tinycolor(paletteArray[i][j]).toRgbString();\r\n          paletteLookup[rgb] = true;\r\n        }\r\n      }\r\n\r\n      // if showPaletteOnly and didn't set initialcolor\r\n      // set initialcolor to first palette\r\n      if (opts.showPaletteOnly && !initialColor) {\r\n        initialColor = (palette[0][0] === '') ? palette[0][0] : Object.keys(paletteLookup)[0];\r\n      }\r\n    }\r\n\r\n    toggleClass(container, 'sp-flat', flat);\r\n    toggleClass(container, 'sp-input-disabled', !opts.showInput);\r\n    toggleClass(container, 'sp-alpha-enabled', opts.showAlpha);\r\n    toggleClass(container, 'sp-clear-enabled', allowEmpty);\r\n    toggleClass(container, 'sp-buttons-disabled', !opts.showButtons);\r\n    toggleClass(container, 'sp-palette-buttons-disabled', !opts.togglePaletteOnly);\r\n    toggleClass(container, 'sp-palette-disabled', !opts.showPalette);\r\n    toggleClass(container, 'sp-palette-only', opts.showPaletteOnly);\r\n    toggleClass(container, 'sp-initial-disabled', !opts.showInitial);\r\n    addClass(container, opts.containerClassName);\r\n\r\n    reflow();\r\n  }\r\n\r\n  function offsetElementStart(e: Event) {\r\n    if (!disabled) {\r\n      show();\r\n    }\r\n\r\n    e.stopPropagation();\r\n    const target = e.target as HTMLElement;\r\n\r\n    if (!target.matches('input')) {\r\n      e.preventDefault();\r\n    }\r\n  }\r\n\r\n  function initialize() {\r\n\r\n    if (IE) {\r\n      container.querySelector('*:not(input)')?.setAttribute('unselectable', 'on');\r\n    }\r\n\r\n    applyOptions();\r\n\r\n    originalInputContainer = html('<span class=\"sp-original-input-container\"></span>') as HTMLSpanElement;\r\n    [ 'margin' ].forEach(function (cssProp: string) {\r\n      // @ts-ignore\r\n      originalInputContainer.style[cssProp] = boundElement.style[cssProp];\r\n    });\r\n    // inline-flex by default, switching to flex if needed\r\n    if (boundElement.style.display === 'block') {\r\n      originalInputContainer.style.display = 'flex';\r\n    }\r\n\r\n    if (shouldReplace) {\r\n      insertAfter(boundElement, replacer as Element);\r\n      boundElement.style.display = 'none';\r\n    } else if (type === 'text') {\r\n      addClass(originalInputContainer, 'sp-colorize-container');\r\n      addClass(boundElement, 'spectrum sp-colorize');\r\n      wrap(boundElement, originalInputContainer);\r\n    } else if (type === 'component') {\r\n      addClass(boundElement, 'spectrum');\r\n      wrap(boundElement, originalInputContainer);\r\n      const addOn = html(['<div class=\\'sp-colorize-container sp-add-on\\'>',\r\n        '<div class=\\'sp-colorize\\'></div> ',\r\n        '</div>'].join('')) as HTMLElement;\r\n      addOn.style.width = boundElement.offsetHeight + 'px';\r\n      addOn.style.borderRadius = boundElement.style.borderRadius + 'px';\r\n      addOn.style.border = boundElement.style.border + 'px';\r\n      boundElement.classList.add('with-add-on');\r\n\r\n      boundElement.before(addOn);\r\n    }\r\n\r\n    colorizeElement = boundElement.parentNode?.querySelector('.sp-colorize');\r\n    colorizeElementInitialColor = colorizeElement?.style.color || '';\r\n    colorizeElementInitialBackground = colorizeElement?.style.backgroundColor || '';\r\n\r\n    if (!allowEmpty) {\r\n      clearButton.style.display = 'none';\r\n    }\r\n\r\n    if (flat) {\r\n      boundElement.after(container);\r\n      boundElement.style.display = 'none';\r\n    } else {\r\n\r\n      let appendTo = opts.appendTo === 'parent' ? boundElement.parentElement : opts.appendTo;\r\n      if (!appendTo) {\r\n        appendTo = document.body;\r\n      }\r\n\r\n      if (typeof appendTo !== 'string') {\r\n        appendTo.append(container);\r\n      }\r\n    }\r\n\r\n    updateSelectionPaletteFromStorage();\r\n\r\n    offsetElement?.addEventListener('click', offsetElementStart);\r\n    offsetElement?.addEventListener('touchstart', offsetElementStart);\r\n\r\n    if (boundElement.matches(':disabled') || opts.disabled) {\r\n      disable();\r\n    }\r\n\r\n    // Prevent clicks from bubbling up to document.  This would cause it to be hidden.\r\n    container.addEventListener('click', (e) => e.stopPropagation());\r\n\r\n    // Handle user typed input\r\n    [ textInput, boundElement ].forEach(function (input) {\r\n      input.addEventListener('change', () => {\r\n        setFromTextInput(input.value);\r\n      });\r\n      input.addEventListener('paste', () => {\r\n        setTimeout(() => {\r\n          setFromTextInput(input.value);\r\n        }, 1);\r\n      });\r\n      input.addEventListener('keydown', (e) => {\r\n        if (e.keyCode === 13) {\r\n          setFromTextInput(input.value);\r\n          if (input === boundElement) {\r\n            hide();\r\n          }\r\n        }\r\n      });\r\n    });\r\n\r\n    cancelButton.textContent = opts.cancelText;\r\n    cancelButton.addEventListener('click.spectrum', function (e) {\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n      revert();\r\n      hide();\r\n    });\r\n\r\n    clearButton.setAttribute('title', opts.clearText);\r\n    clearButton.addEventListener('click.spectrum', function (e) {\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n      isEmpty = true;\r\n      move();\r\n\r\n      if (flat) {\r\n        //for the flat style, this is a change event\r\n        updateOriginalInput(true);\r\n      }\r\n    });\r\n\r\n    chooseButton.textContent = opts.chooseText;\r\n    chooseButton.addEventListener('click.spectrum', e => {\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n\r\n      if (IE && textInput.matches(':focus')) {\r\n        textInput.dispatchEvent(new CustomEvent('change'));\r\n      }\r\n\r\n      if (isValid()) {\r\n        updateOriginalInput(true);\r\n        hide();\r\n      }\r\n    });\r\n\r\n    toggleButton.textContent = opts.showPaletteOnly ? opts.togglePaletteMoreText : opts.togglePaletteLessText;\r\n    toggleButton.addEventListener('click.spectrum', e => {\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n\r\n      opts.showPaletteOnly = !opts.showPaletteOnly;\r\n\r\n      // To make sure the Picker area is drawn on the right, next to the\r\n      // Palette area (and not below the palette), first move the Palette\r\n      // to the left to make space for the picker, plus 5px extra.\r\n      // The 'applyOptions' function puts the whole container back into place\r\n      // and takes care of the button-text and the sp-palette-only CSS class.\r\n      if (!opts.showPaletteOnly && !flat) {\r\n        container.style.left =  '-=' + (outerWidthWithMargin(pickerContainer) + 5);\r\n      }\r\n      applyOptions();\r\n    });\r\n\r\n    draggable(alphaSlider, function (dragX, dragY, e) {\r\n      currentAlpha = (dragX / alphaWidth);\r\n      isEmpty = false;\r\n      if (e.shiftKey) {\r\n        currentAlpha = Math.round(currentAlpha * 10) / 10;\r\n      }\r\n\r\n      move();\r\n    }, dragStart, dragStop);\r\n\r\n    draggable(slider, function (dragX, dragY) {\r\n      currentHue = dragY / slideHeight;\r\n      isEmpty = false;\r\n      if (!opts.showAlpha) {\r\n        currentAlpha = 1;\r\n      }\r\n      move();\r\n    }, dragStart, dragStop);\r\n\r\n    draggable(dragger, function (dragX, dragY, e) {\r\n\r\n      // shift+drag should snap the movement to either the x or y axis.\r\n      if (!e.shiftKey) {\r\n        shiftMovementDirection = null;\r\n      } else if (!shiftMovementDirection) {\r\n        const oldDragX = currentSaturation * dragWidth;\r\n        const oldDragY = dragHeight - (currentValue * dragHeight);\r\n        const furtherFromX = Math.abs(dragX - oldDragX) > Math.abs(dragY - oldDragY);\r\n\r\n        shiftMovementDirection = furtherFromX ? 'x' : 'y';\r\n      }\r\n\r\n      const setSaturation = !shiftMovementDirection || shiftMovementDirection === 'x';\r\n      const setValue = !shiftMovementDirection || shiftMovementDirection === 'y';\r\n\r\n      if (setSaturation) {\r\n        currentSaturation = (dragX / dragWidth);\r\n      }\r\n      if (setValue) {\r\n        currentValue = ((dragHeight - dragY) / dragHeight);\r\n      }\r\n\r\n      isEmpty = false;\r\n      if (!opts.showAlpha) {\r\n        currentAlpha = 1;\r\n      }\r\n\r\n      move();\r\n\r\n    }, dragStart, dragStop);\r\n\r\n    if (!!initialColor) {\r\n      set(initialColor);\r\n\r\n      // In case color was black - update the preview UI and set the format\r\n      // since the set function will not run (default color is black).\r\n      updateUI();\r\n      currentPreferredFormat = tinycolor(initialColor).format || opts.preferredFormat;\r\n      addColorToSelectionPalette(initialColor);\r\n    } else if (initialColor === '') {\r\n      set(initialColor);\r\n      updateUI();\r\n    } else {\r\n      updateUI();\r\n    }\r\n\r\n    if (flat) {\r\n      show();\r\n    }\r\n\r\n    function paletteElementClick(e: Event) {\r\n      // @ts-ignore\r\n      if (e.data && e.data.ignore) {\r\n        const el = (e.target as HTMLElement).closest('.sp-thumb-el') as HTMLElement|null;\r\n        set(el?.dataset?.color || '');\r\n        move();\r\n      } else {\r\n        const el = (e.target as HTMLElement).closest('.sp-thumb-el') as HTMLElement|null;\r\n        set(el?.dataset?.color || '');\r\n        move();\r\n\r\n        // If the picker is going to close immediately, a palette selection\r\n        // is a change.  Otherwise, it's a move only.\r\n        if (opts.hideAfterPaletteSelect) {\r\n          updateOriginalInput(true);\r\n          hide();\r\n        } else {\r\n          updateOriginalInput();\r\n        }\r\n      }\r\n\r\n      return false;\r\n    }\r\n\r\n    var paletteEvent = IE ? 'mousedown.spectrum' : 'click.spectrum touchstart.spectrum';\r\n    eventDelegate(paletteContainer, paletteEvent, '.sp-thumb-el', paletteElementClick);\r\n    eventDelegate(initialColorContainer, paletteEvent,  '.sp-thumb-el:nth-child(1)', paletteElementClick, { ignore: true });\r\n  }\r\n\r\n  function updateSelectionPaletteFromStorage() {\r\n\r\n    if (localStorageKey) {\r\n      // Migrate old palettes over to new format.  May want to remove this eventually.\r\n      try {\r\n        const localStorage = window.localStorage;\r\n        const oldPalette = localStorage[localStorageKey].split(',#');\r\n        if (oldPalette.length > 1) {\r\n          delete localStorage[localStorageKey];\r\n\r\n          for (const c of oldPalette) {\r\n            addColorToSelectionPalette(c);\r\n          }\r\n        }\r\n      } catch (e) {\r\n      }\r\n\r\n      try {\r\n        selectionPalette = window.localStorage[localStorageKey].split(';');\r\n      } catch (e) {\r\n      }\r\n    }\r\n  }\r\n\r\n  function addColorToSelectionPalette(color: ColorInput) {\r\n    if (showSelectionPalette) {\r\n      const rgb = tinycolor(color).toRgbString();\r\n\r\n      if (!paletteLookup[rgb] && selectionPalette.includes(rgb)) {\r\n        selectionPalette.push(rgb);\r\n        while (selectionPalette.length > maxSelectionSize) {\r\n          selectionPalette.shift();\r\n        }\r\n      }\r\n\r\n      if (localStorageKey) {\r\n        try {\r\n          window.localStorage[localStorageKey] = selectionPalette.join(';');\r\n        } catch (e) {\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function getUniqueSelectionPalette() {\r\n    var unique = [];\r\n    if (opts.showPalette) {\r\n      for (var i = 0; i < selectionPalette.length; i++) {\r\n        var rgb = tinycolor(selectionPalette[i]).toRgbString();\r\n\r\n        if (!paletteLookup[rgb]) {\r\n          unique.push(selectionPalette[i]);\r\n        }\r\n      }\r\n    }\r\n\r\n    return unique.reverse().slice(0, opts.maxSelectionSize);\r\n  }\r\n\r\n  function drawPalette() {\r\n\r\n    const currentColor = get();\r\n\r\n    const html = paletteArray.map((palette, i) => {\r\n      return paletteTemplate(palette, currentColor, 'sp-palette-row sp-palette-row-' + i, opts);\r\n    });\r\n\r\n    updateSelectionPaletteFromStorage();\r\n\r\n    if (selectionPalette) {\r\n      html.push(paletteTemplate(getUniqueSelectionPalette(), currentColor, 'sp-palette-row sp-palette-row-selection', opts));\r\n    }\r\n\r\n    paletteContainer.innerHTML = html.join('');\r\n  }\r\n\r\n  function drawInitial() {\r\n    if (opts.showInitial) {\r\n      const initial = colorOnShow;\r\n      const current = get();\r\n      initialColorContainer.innerHTML = paletteTemplate([ initial, current ], current, 'sp-palette-row-initial', opts);\r\n    }\r\n  }\r\n\r\n  function dragStart() {\r\n    if (dragHeight <= 0 || dragWidth <= 0 || slideHeight <= 0) {\r\n      reflow();\r\n    }\r\n    isDragging = true;\r\n    addClass(container, draggingClass);\r\n    shiftMovementDirection = null;\r\n\r\n    emit(boundElement, 'dragstart.spectrum', [ get() ]);\r\n  }\r\n\r\n  function dragStop() {\r\n    isDragging = false;\r\n    removeClass(container, draggingClass);\r\n    emit(boundElement, 'dragstop.spectrum', [ get() ]);\r\n  }\r\n\r\n  function setFromTextInput(value: string) {\r\n    if (abortNextInputChange) {\r\n      abortNextInputChange = false;\r\n      return;\r\n    }\r\n    if ((value === null || value === '') && allowEmpty) {\r\n      set('');\r\n      move();\r\n      updateOriginalInput();\r\n    } else {\r\n      const tiny = tinycolor(value);\r\n      if (tiny.isValid()) {\r\n        set(tiny);\r\n        move();\r\n        updateOriginalInput();\r\n      } else {\r\n        textInput.classList.add('sp-validation-error');\r\n      }\r\n    }\r\n  }\r\n\r\n  function toggle() {\r\n    if (visible) {\r\n      hide();\r\n    } else {\r\n      show();\r\n    }\r\n  }\r\n\r\n  function show() {\r\n    if (visible) {\r\n      reflow();\r\n      return;\r\n    }\r\n\r\n    const event = emit(boundElement, 'beforeShow.spectrum', [ get() ]);\r\n\r\n    if (callbacks.beforeShow(get()) === false || event.defaultPrevented) {\r\n      return;\r\n    }\r\n\r\n    hideAll();\r\n    visible = true;\r\n\r\n\r\n    doc.addEventListener('keydown', onkeydown);\r\n    doc.addEventListener('click', clickout);\r\n    window.addEventListener('resize', resize);\r\n    replacer?.classList.add('sp-active');\r\n    container.classList.remove('sp-hidden');\r\n\r\n    reflow();\r\n    updateUI();\r\n\r\n    colorOnShow = get();\r\n\r\n    drawInitial();\r\n    callbacks.show(colorOnShow);\r\n    emit(boundElement, 'show.spectrum', [ colorOnShow ]);\r\n  }\r\n\r\n  function onkeydown(e: KeyboardEvent) {\r\n    // Close on ESC\r\n    if (e.keyCode === 27) {\r\n      hide();\r\n    }\r\n  }\r\n\r\n  function clickout(e: MouseEvent) {\r\n    // Return on right click.\r\n    if (e.button == 2) {\r\n      return;\r\n    }\r\n\r\n    // If a drag event was happening during the mouseup, don't hide\r\n    // on click.\r\n    if (isDragging) {\r\n      return;\r\n    }\r\n\r\n    if (clickoutFiresChange) {\r\n      updateOriginalInput(true);\r\n    } else {\r\n      revert();\r\n    }\r\n    hide();\r\n  }\r\n\r\n  function hide() {\r\n    // Return if hiding is unnecessary\r\n    if (!visible || flat) {\r\n      return;\r\n    }\r\n    visible = false;\r\n\r\n    doc.removeEventListener('keydown', onkeydown);\r\n    doc.removeEventListener('click', clickout);\r\n    window.removeEventListener('resize', resize);\r\n\r\n    replacer?.classList.remove('sp-active');\r\n    container.classList.add('sp-hidden');\r\n\r\n    callbacks.hide(get());\r\n    emit(boundElement, 'hide.spectrum', [ get() ]);\r\n  }\r\n\r\n  function revert() {\r\n    set(colorOnShow, true);\r\n    updateOriginalInput(true);\r\n  }\r\n\r\n  function set(color: ColorInput, ignoreFormatChange: boolean = false) {\r\n    if (tinycolor.equals(color, get())) {\r\n      // Update UI just in case a validation error needs\r\n      // to be cleared.\r\n      updateUI();\r\n      return;\r\n    }\r\n\r\n    var newColor, newHsv;\r\n    if ((!color || color === undefined) && allowEmpty) {\r\n      isEmpty = true;\r\n    } else {\r\n      isEmpty = false;\r\n      newColor = tinycolor(color);\r\n      newHsv = newColor.toHsv();\r\n\r\n      currentHue = (newHsv.h % 360) / 360;\r\n      currentSaturation = newHsv.s;\r\n      currentValue = newHsv.v;\r\n      currentAlpha = newHsv.a;\r\n    }\r\n    updateUI();\r\n\r\n    if (newColor && newColor.isValid() && !ignoreFormatChange) {\r\n      currentPreferredFormat = opts.preferredFormat || newColor.getFormat() as ColorFormat;\r\n    }\r\n  }\r\n\r\n  function get(opts: any = {}): Instance|'' {\r\n    if (allowEmpty && isEmpty) {\r\n      return '';\r\n    }\r\n\r\n    return tinycolor.fromRatio({\r\n      h: currentHue,\r\n      s: currentSaturation,\r\n      v: currentValue,\r\n      a: Math.round(currentAlpha * 1000) / 1000\r\n      // @ts-ignore\r\n    }, { format: opts.format || currentPreferredFormat });\r\n  }\r\n\r\n  function isValid() {\r\n    return !textInput.classList.contains('sp-validation-error')\r\n  }\r\n\r\n  function move() {\r\n    updateUI();\r\n\r\n    callbacks.move(get());\r\n    emit(boundElement, 'move.spectrum', [ get() ]);\r\n  }\r\n\r\n  function updateUI() {\r\n\r\n    textInput.classList.remove('sp-validation-error');\r\n\r\n    updateHelperLocations();\r\n\r\n    // Update dragger background color (gradients take care of saturation and value).\r\n    const flatColor = tinycolor.fromRatio({ h: currentHue, s: 1, v: 1 });\r\n    dragger.style.backgroundColor = flatColor.toHexString();\r\n\r\n    // Get a format that alpha will be included in (hex and names ignore alpha)\r\n    let format = currentPreferredFormat;\r\n    if (currentAlpha < 1 && !(currentAlpha === 0 && format === 'name')) {\r\n      if (format === 'hex' || format === 'hex3' || format === 'hex6' || format === 'name') {\r\n        format = 'rgb';\r\n      }\r\n    }\r\n\r\n    var realColor = get({ format: format }),\r\n      displayColor = '';\r\n\r\n    //reset background info for preview element\r\n    previewElement.classList.remove('sp-clear-display');\r\n    previewElement.style.backgroundColor = 'transparent';\r\n\r\n    if (realColor === '') {\r\n      // Update the replaced elements background with icon indicating no color selection\r\n      previewElement.classList.add('sp-clear-display');\r\n    } else {\r\n      const realHex = realColor.toHexString();\r\n      const realRgb = realColor.toRgbString();\r\n\r\n      // Update the replaced elements background color (with actual selected color)\r\n      if (rgbaSupport || realColor.getAlpha() === 1) {\r\n        previewElement.style.backgroundColor = realRgb;\r\n      } else {\r\n        previewElement.style.backgroundColor = 'transparent';\r\n        previewElement.style.filter = realColor.toFilter();\r\n      }\r\n\r\n      if (opts.showAlpha) {\r\n        const rgb = realColor.toRgb();\r\n        rgb.a = 0;\r\n        const realAlpha = tinycolor(rgb).toRgbString();\r\n        const gradient = 'linear-gradient(left, ' + realAlpha + ', ' + realHex + ')';\r\n\r\n        if (IE) {\r\n          alphaSliderInner.style.filter = tinycolor(realAlpha).toFilter(/* { gradientType: 1 }, realHex */);\r\n        } else {\r\n          // alphaSliderInner.css('background', '-webkit-' + gradient);\r\n          // alphaSliderInner.css('background', '-moz-' + gradient);\r\n          // alphaSliderInner.css('background', '-ms-' + gradient);\r\n          // Use current syntax gradient on unprefixed property.\r\n          alphaSliderInner.style.background = `linear-gradient(to right, ${realAlpha}, ${realHex})`;\r\n        }\r\n      }\r\n\r\n      displayColor = realColor.toString(format);\r\n    }\r\n\r\n    // Update the text entry input as it changes happen\r\n    if (opts.showInput) {\r\n      textInput.value = displayColor;\r\n    }\r\n    boundElement.value = displayColor;\r\n    if (opts.type == 'text' || opts.type == 'component') {\r\n      const color = realColor;\r\n      if (color && colorizeElement) {\r\n        const textColor = (color.isLight() || color.getAlpha() < 0.4) ? 'black' : 'white';\r\n        colorizeElement.style.backgroundColor = color.toRgbString();\r\n        colorizeElement.style.color = textColor;\r\n      } else {\r\n        colorizeElement.style.backgroundColor = colorizeElementInitialBackground;\r\n        colorizeElement.style.color = colorizeElementInitialColor;\r\n      }\r\n    }\r\n\r\n    if (opts.showPalette) {\r\n      drawPalette();\r\n    }\r\n\r\n    drawInitial();\r\n  }\r\n\r\n  function updateHelperLocations() {\r\n    if (allowEmpty && isEmpty) {\r\n      //if selected color is empty, hide the helpers\r\n      alphaSlideHelper.style.display = 'none';\r\n      slideHelper.style.display = 'none';\r\n      dragHelper.style.display = 'none';\r\n    } else {\r\n      //make sure helpers are visible\r\n      alphaSlideHelper.style.display = 'block';\r\n      slideHelper.style.display = 'block';\r\n      dragHelper.style.display = 'block';\r\n\r\n      // Where to show the little circle in that displays your current selected color\r\n      let dragX = currentSaturation * dragWidth;\r\n      let dragY = dragHeight - (currentValue * dragHeight);\r\n      dragX = Math.max(\r\n        -dragHelperHeight,\r\n        Math.min(dragWidth - dragHelperHeight, dragX - dragHelperHeight)\r\n      );\r\n      dragY = Math.max(\r\n        -dragHelperHeight,\r\n        Math.min(dragHeight - dragHelperHeight, dragY - dragHelperHeight)\r\n      );\r\n      dragHelper.style.top = dragY + 'px';\r\n      dragHelper.style.left = dragX + 'px';\r\n\r\n      const alphaX = currentAlpha * alphaWidth;\r\n      alphaSlideHelper.style.left = (alphaX - (alphaSlideHelperWidth / 2)) + 'px';\r\n\r\n      // Where to show the bar that displays your current selected hue\r\n      const slideY = (currentHue) * slideHeight;\r\n      slideHelper.style.top = (slideY - slideHelperHeight) + 'px';\r\n    }\r\n  }\r\n\r\n  function updateOriginalInput(fireCallback = false) {\r\n    let color = get(),\r\n      displayColor = '',\r\n      hasChanged = !tinycolor.equals(color, colorOnShow);\r\n\r\n    if (color) {\r\n      displayColor = color.toString(currentPreferredFormat);\r\n      // Update the selection palette with the current color\r\n      addColorToSelectionPalette(color);\r\n    }\r\n\r\n    if (fireCallback && hasChanged) {\r\n      callbacks.change(color);\r\n      // we trigger the change event or input, but the input change event is also binded\r\n      // to some spectrum processing, that we do no need\r\n      abortNextInputChange = true;\r\n      emit(boundElement, 'change', [ color ]);\r\n    }\r\n  }\r\n\r\n  function reflow() {\r\n    if (!visible) {\r\n      return; // Calculations would be useless and wouldn't be reliable anyways\r\n    }\r\n\r\n    dragWidth = dragger.getBoundingClientRect().width;\r\n    dragHeight = dragger.getBoundingClientRect().height;\r\n\r\n    dragHelperHeight = dragHelper.getBoundingClientRect().height;\r\n    slideWidth = slider.getBoundingClientRect().width;\r\n    slideHeight = slider.getBoundingClientRect().height;\r\n    slideHelperHeight = slideHelper.getBoundingClientRect().height;\r\n    alphaWidth = alphaSlider.getBoundingClientRect().width;\r\n    alphaSlideHelperWidth = alphaSlideHelper.getBoundingClientRect().width;\r\n\r\n    if (!flat) {\r\n      container.style.position = 'absolute';\r\n      if (opts.offset) {\r\n        setElementOffset(container, opts.offset);\r\n      } else {\r\n        setElementOffset(container, getOffset(container, offsetElement as HTMLElement));\r\n      }\r\n    }\r\n\r\n    updateHelperLocations();\r\n\r\n    if (opts.showPalette) {\r\n      drawPalette();\r\n    }\r\n\r\n    emit(boundElement, 'reflow.spectrum');\r\n  }\r\n\r\n  function destroy() {\r\n    boundElement.style.display = 'block';\r\n    boundElement.classList.remove('spectrum', 'with-add-on', 'sp-colorize');\r\n    offsetElement.removeEventListener('click', offsetElementStart);\r\n    offsetElement.removeEventListener('touchstart', offsetElementStart);\r\n    container.remove();\r\n    replacer.remove();\r\n    if (colorizeElement) {\r\n      colorizeElement.style.backgroundColor = colorizeElementInitialBackground;\r\n      colorizeElement.style.color = colorizeElementInitialColor;\r\n    }\r\n    const originalInputContainer = boundElement.closest('.sp-original-input-container');\r\n    if (originalInputContainer) {\r\n      originalInputContainer.after(boundElement);\r\n      originalInputContainer.remove();\r\n    }\r\n    spectrums[spect.id] = null;\r\n  }\r\n\r\n  function option(optionName: string|undefined = undefined, optionValue: any = undefined) {\r\n    if (optionName === undefined) {\r\n      return Object.assign({}, opts);\r\n    }\r\n    if (optionValue === undefined) {\r\n      return opts[optionName];\r\n    }\r\n\r\n    opts[optionName] = optionValue;\r\n\r\n    if (optionName === 'preferredFormat') {\r\n      currentPreferredFormat = opts.preferredFormat;\r\n    }\r\n    applyOptions();\r\n  }\r\n\r\n  function enable() {\r\n    disabled = false;\r\n    boundElement.disabled = false;\r\n    offsetElement.classList.remove('sp-disabled');\r\n  }\r\n\r\n  function disable() {\r\n    hide();\r\n    disabled = true;\r\n    boundElement.disabled = true;\r\n    offsetElement.classList.add('sp-disabled');\r\n  }\r\n\r\n  function setOffset(coord: OffsetCSSOptions) {\r\n    opts.offset = coord;\r\n    reflow();\r\n  }\r\n\r\n  initialize();\r\n\r\n  let spect = {\r\n    id: 0,\r\n    show: show,\r\n    hide: hide,\r\n    toggle: toggle,\r\n    reflow: reflow,\r\n    option: option,\r\n    enable: enable,\r\n    disable: disable,\r\n    offset: setOffset,\r\n    set: function (c: ColorInput) {\r\n      set(c);\r\n      updateOriginalInput();\r\n    },\r\n    get: get,\r\n    destroy: destroy,\r\n    container: container\r\n  };\r\n\r\n  spect.id = spectrums.push(spect) - 1;\r\n\r\n  return spect;\r\n}\r\n\r\n/**\r\n * checkOffset - get the offset below/above and left/right element depending on screen position\r\n * Thanks https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.datepicker.js\r\n */\r\nfunction getOffset(picker: HTMLElement, input: HTMLElement) {\r\n  const extraY = 0;\r\n  const dpWidth = picker.offsetWidth;\r\n  const dpHeight = picker.offsetHeight;\r\n  const inputHeight = input.offsetHeight;\r\n  const doc = picker[0].ownerDocument;\r\n  const docElem = doc.documentElement;\r\n  const viewWidth = docElem.clientWidth + doc.pageXOffset;\r\n  const viewHeight = docElem.clientHeight + doc.pageYOffset;\r\n  const offset = getElementOffset(input);\r\n  let offsetLeft = offset.left;\r\n  let offsetTop = offset.top;\r\n\r\n  offsetTop += inputHeight;\r\n\r\n  offsetLeft -=\r\n    Math.min(offsetLeft, (offsetLeft + dpWidth > viewWidth && viewWidth > dpWidth) ?\r\n      Math.abs(offsetLeft + dpWidth - viewWidth) : 0);\r\n\r\n  offsetTop -=\r\n    Math.min(offsetTop, ((offsetTop + dpHeight > viewHeight && viewHeight > dpHeight) ?\r\n      Math.abs(dpHeight + inputHeight - extraY) : extraY));\r\n\r\n  return {\r\n    top: offsetTop,\r\n    // bottom: offset.bottom,\r\n    left: offsetLeft,\r\n    // right: offset.right,\r\n    // width: offset.width,\r\n    // height: offset.height\r\n  };\r\n}\r\n\r\n/**\r\n * noop - do nothing\r\n */\r\nfunction noop() {\r\n\r\n}\r\n\r\n/**\r\n * Create a function bound to a given object\r\n * Thanks to underscore.js\r\n */\r\nfunction bind(func: Function, obj: object) {\r\n  const slice = Array.prototype.slice;\r\n  const args = slice.call(arguments, 2);\r\n  return function () {\r\n    return func.apply(obj, args.concat(slice.call(arguments)));\r\n  };\r\n}\r\n\r\n/**\r\n * Lightweight drag helper.  Handles containment within the element, so that\r\n * when dragging, the x is within [0,element.width] and y is within [0,element.height]\r\n */\r\nfunction draggable(\r\n  element: HTMLElement,\r\n  onmove: (x: number, y: number, e: DragEvent) => void,\r\n  onstart: (x: number, y: number, e: DragEvent) => void,\r\n  onstop: (x: number, y: number, e: DragEvent) => void,\r\n) {\r\n  onmove = onmove || noop;\r\n  onstart = onstart || noop;\r\n  onstop = onstop || noop;\r\n  const doc = document;\r\n  let dragging = false;\r\n  let offset: OffsetCSSOptions = {};\r\n  let maxHeight = 0;\r\n  let maxWidth = 0;\r\n  const hasTouch = ('ontouchstart' in window);\r\n\r\n  const duringDragEvents: { [P in keyof ElementEventMap]?: Function; } = {};\r\n  duringDragEvents['selectstart'] = prevent;\r\n  duringDragEvents['dragstart'] = prevent;\r\n  duringDragEvents['touchmove'] = move;\r\n  duringDragEvents['mousemove'] = move;\r\n  duringDragEvents['touchend'] = stop;\r\n  duringDragEvents['mouseup'] = stop;\r\n\r\n  function prevent(e: Event) {\r\n    if (e.stopPropagation) {\r\n      e.stopPropagation();\r\n    }\r\n    if (e.preventDefault) {\r\n      e.preventDefault();\r\n    }\r\n    e.returnValue = false;\r\n  }\r\n\r\n  function move(e: TouchEvent|MouseEvent) {\r\n    if (dragging) {\r\n      // @ts-ignore\r\n      // Mouseup happened outside of window\r\n      if (IE && doc.documentMode < 9 && !e.button) {\r\n        return stop();\r\n      }\r\n\r\n      const t0 = 'touches' in e && e.touches[0];\r\n      const pageX = t0 && t0.pageX || (e as MouseEvent).pageX;\r\n      const pageY = t0 && t0.pageY || (e as MouseEvent).pageY;\r\n\r\n      const dragX = Math.max(0, Math.min(pageX - offset.left, maxWidth));\r\n      const dragY = Math.max(0, Math.min(pageY - offset.top, maxHeight));\r\n\r\n      if (hasTouch) {\r\n        // Stop scrolling in iOS\r\n        prevent(e);\r\n      }\r\n\r\n      onmove.apply(element, [ dragX, dragY, e ]);\r\n    }\r\n  }\r\n\r\n  function start(e: TouchEvent|MouseEvent) {\r\n    const rightclick = (e.which) ? (e.which == 3) : ((e as MouseEvent).button === 2);\r\n\r\n    if (!rightclick && !dragging) {\r\n      if (onstart.apply(element, arguments) !== false) {\r\n        dragging = true;\r\n        maxHeight = element.getBoundingClientRect().height;\r\n        maxWidth = element.getBoundingClientRect().width;\r\n        offset = getElementOffset(element);\r\n\r\n        for (const eventName in duringDragEvents) {\r\n          doc.addEventListener(eventName, duringDragEvents[eventName]);\r\n        }\r\n\r\n        doc.body.classList.add('sp-dragging');\r\n\r\n        move(e);\r\n\r\n        prevent(e);\r\n      }\r\n    }\r\n  }\r\n\r\n  function stop() {\r\n    if (dragging) {\r\n      for (const eventName in duringDragEvents) {\r\n        doc.removeEventListener(eventName, duringDragEvents[eventName]);\r\n      }\r\n      doc.body.classList.remove('sp-dragging');\r\n\r\n      // Wait a tick before notifying observers to allow the click event\r\n      // to fire in Chrome.\r\n      setTimeout(function () {\r\n        onstop.apply(element, arguments);\r\n      }, 0);\r\n    }\r\n    dragging = false;\r\n  }\r\n\r\n  element.addEventListener('touchstart', start);\r\n  element.addEventListener('mousedown', start);\r\n}\r\n\r\nexport default class Spectrum {\r\n  private spectrum: any;\r\n  public ele: HTMLInputElement;\r\n  public options: Partial<Options>;\r\n\r\n  static defaultOptions = defaultOpts;\r\n  static draggable = draggable;\r\n\r\n  static create(selector: string|HTMLInputElement, options: Partial<Options> = {}) {\r\n    return new this(this.wrap(selector), options);\r\n  }\r\n\r\n  static getInstance(selector: string|HTMLInputElement, options: Partial<Options> = {}) {\r\n    const ele = this.wrap(selector);\r\n\r\n    // @ts-ignore\r\n    return ele.__spectrum = ele.__spectrum || this.create(ele, options);\r\n  }\r\n\r\n  static createMultiple(selector: string|NodeListOf<HTMLInputElement>, options: Partial<Options> = {}) {\r\n    const instances: Spectrum[] = [];\r\n\r\n    this.wrapList(selector).forEach((ele) => {\r\n      instances.push(this.create(ele, options));\r\n    });\r\n\r\n    return instances;\r\n  }\r\n\r\n  static getInstanceMultiple(selector: string|NodeListOf<HTMLInputElement>, options: Partial<Options> = {}) {\r\n    const instances: Spectrum[] = [];\r\n\r\n    this.wrapList(selector).forEach((ele) => {\r\n      instances.push(this.getInstance(ele, options));\r\n    });\r\n\r\n    return instances;\r\n  }\r\n\r\n  private static wrap(selector: string|HTMLInputElement) {\r\n    if (typeof selector === 'string') {\r\n      return document.querySelector<HTMLInputElement>(selector);\r\n    } else {\r\n      return selector;\r\n    }\r\n  }\r\n\r\n  private static wrapList(selector: string|NodeListOf<HTMLInputElement>) {\r\n    if (typeof selector === 'string') {\r\n      return document.querySelectorAll<HTMLInputElement>(selector);\r\n    } else {\r\n      return selector;\r\n    }\r\n  }\r\n\r\n  constructor(ele: HTMLInputElement, options: Partial<Options> = {}) {\r\n    this.spectrum = spectrum(ele, options);\r\n    this.ele = ele;\r\n    this.options = options;\r\n  }\r\n\r\n  get id(): number {\r\n    return this.spectrum.id;\r\n  }\r\n\r\n  get container(): HTMLElement {\r\n    return this.spectrum.constructor;\r\n  }\r\n\r\n  show() { this.spectrum.show(); return this; }\r\n  hide() { this.spectrum.hide(); return this; }\r\n  toggle() { this.spectrum.toggle(); return this; }\r\n  reflow() { this.spectrum.reflow(); return this; }\r\n  option(optionName: string|undefined = undefined, optionValue: any = undefined): any {\r\n    return this.spectrum.option(optionName, optionValue);\r\n  }\r\n  enable() { this.spectrum.enable(); return this; }\r\n  disable() { this.spectrum.disable(); return this; }\r\n  offset(coord: OffsetCSSOptions) { this.spectrum.setOffset(coord); return this; }\r\n  set(color: ColorInput, ignoreFormatChange: boolean = false) {\r\n    this.spectrum.set(color, ignoreFormatChange);\r\n    return this;\r\n  }\r\n  get(): ColorInput { return this.spectrum.get() }\r\n  destroy() {\r\n    this.spectrum.destroy();\r\n    // @ts-ignore\r\n    delete this.ele.__spectrum;\r\n    return this;\r\n  }\r\n\r\n  rebuild() {\r\n    this.spectrum.destroy();\r\n    this.spectrum = spectrum(this.ele, this.options);\r\n    return this;\r\n  }\r\n}\r\n"],"names":["insertAfter","existingNode","newNode","parentNode","insertBefore","nextSibling","wrap","ele","wrapper","replaceWith","appendChild","outerWidthWithMargin","style","window","getComputedStyle","getBoundingClientRect","width","parseFloat","marginLeft","marginRight","html","div","document","createElement","innerHTML","children","camelize","str","replace","word","index","toLowerCase","toUpperCase","throttle","func","wait","debounce","timeout","context","args","arguments","throttler","apply","clearTimeout","setTimeout","addClass","className","classes","split","filter","c","length","classList","add","removeClass","remove","toggleClass","state","undefined","toggle","emit","eventName","detail","event","CustomEvent","dispatchEvent","eventDelegate","selector","listener","payload","addEventListener","e","target","closest","data","Object","assign","setElementOffset","elem","options","curPosition","curTop","curLeft","calculatePosition","position","curElem","props","curOffset","getElementOffset","curCSSTop","top","curCSSLeft","left","indexOf","getElementPosition","using","call","k","el","box","docElem","documentElement","pageYOffset","clientTop","pageXOffset","clientLeft","marginTop","parseInt","tinycolor","localization","defaultOpts","beforeShow","noop","move","change","show","hide","color","type","showInput","allowEmpty","showButtons","clickoutFiresChange","showInitial","showPalette","showPaletteOnly","hideAfterPaletteSelect","togglePaletteOnly","showSelectionPalette","localStorageKey","appendTo","maxSelectionSize","locale","cancelText","chooseText","togglePaletteMoreText","togglePaletteLessText","clearText","noColorSelectedText","preferredFormat","containerClassName","replacerClassName","showAlpha","theme","palette","selectionPalette","disabled","offset","spectrums","IE","exec","navigator","userAgent","rgbaSupport","contains","substr","cssText","backgroundColor","replaceInput","join","markup","gradientFix","i","paletteTemplate","p","opts","current","tiny","toHsl","l","equals","formattedString","toString","swatchStyle","toRgbString","toFilter","push","hideAll","display","instanceOptions","callbackContext","language","callbacks","bind","spectrum","element","flat","resize","reflow","visible","isDragging","dragWidth","dragHeight","dragHelperHeight","slideHeight","slideWidth","alphaWidth","alphaSlideHelperWidth","slideHelperHeight","currentHue","currentSaturation","currentValue","currentAlpha","paletteArray","paletteLookup","slice","draggingClass","abortNextInputChange","shiftMovementDirection","container","doc","ownerDocument","body","boundElement","pickerContainer","querySelector","dragger","dragHelper","slider","slideHelper","alphaSliderInner","alphaSlider","alphaSlideHelper","textInput","paletteContainer","initialColorContainer","cancelButton","clearButton","chooseButton","toggleButton","isInput","nodeName","isInputTypeColor","getAttribute","shouldReplace","replacer","offsetElement","previewElement","initialColor","value","colorOnShow","currentPreferredFormat","isEmpty","originalInputContainer","colorizeElement","colorizeElementInitialColor","colorizeElementInitialBackground","thisId","labels","querySelectorAll","forEach","label","preventDefault","applyOptions","textContent","Array","isArray","j","rgb","keys","offsetElementStart","stopPropagation","matches","initialize","setAttribute","cssProp","addOn","offsetHeight","borderRadius","border","before","after","parentElement","append","updateSelectionPaletteFromStorage","disable","input","setFromTextInput","keyCode","revert","updateOriginalInput","isValid","draggable","dragX","dragY","shiftKey","Math","round","dragStart","dragStop","oldDragX","oldDragY","furtherFromX","abs","setSaturation","setValue","set","updateUI","format","addColorToSelectionPalette","paletteElementClick","ignore","dataset","paletteEvent","localStorage_1","localStorage","oldPalette","oldPalette_1","_i","includes","shift","getUniqueSelectionPalette","unique","reverse","drawPalette","currentColor","get","map","drawInitial","initial","defaultPrevented","onkeydown","clickout","button","removeEventListener","ignoreFormatChange","newColor","newHsv","toHsv","h","s","v","a","getFormat","fromRatio","updateHelperLocations","flatColor","toHexString","realColor","displayColor","realHex","realRgb","getAlpha","toRgb","realAlpha","gradient","background","textColor","isLight","max","min","alphaX","slideY","fireCallback","hasChanged","height","getOffset","destroy","spect","id","option","optionName","optionValue","enable","setOffset","coord","picker","extraY","dpWidth","offsetWidth","dpHeight","inputHeight","viewWidth","clientWidth","viewHeight","clientHeight","offsetLeft","offsetTop","obj","prototype","concat","onmove","onstart","onstop","dragging","maxHeight","maxWidth","hasTouch","duringDragEvents","prevent","stop","returnValue","documentMode","t0","touches","pageX","pageY","start","rightclick","which","Spectrum","__spectrum","create","instances","wrapList","_this","getInstance","constructor"],"sourceRoot":""}